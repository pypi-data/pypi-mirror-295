checks:
  - cmd: argocd app get namespace/bl01t
    rsp: ""
  - cmd: argocd app list -l "ec_service=true" --app-namespace namespace -o yaml
    rsp: |
      - metadata:
          creationTimestamp: "2024-07-12T13:42:50Z"
          name: bl01t-ea-test-01
        spec:
          source:
            targetRevision: main
        status:
          resources:
            - kind: StatefulSet
              name: bl01t-ea-test-01
  - cmd: argocd app manifests namespace/bl01t-ea-test-01 --source live
    rsp: |
      ---
      apiVersion: apps/v1
      kind: StatefulSet
      metadata:
        name: bl01t-ea-test-01
        creationTimestamp: "2024-07-12T13:52:35Z"
      status:
        readyReplicas: 1

logs:
  - cmd: argocd app logs namespace/bl01t-ea-test-01
    rsp: ""

log_history:
  - cmd: https://graylog2.diamond.ac.uk/bl01t-ea-test-01*
    rsp: True

restart:
  - cmd: argocd app delete-resource namespace/bl01t-ea-test-01 --kind StatefulSet
    rsp: ""

start:
  - cmd: argocd app set namespace/bl01t-ea-test-01 -p global.enabled=true
    rsp: ""

stop:
  - cmd: argocd app set namespace/bl01t-ea-test-01 -p global.enabled=false
    rsp: ""
