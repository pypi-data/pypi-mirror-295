import{_ as b,aI as ve,aJ as Se,aK as le,aL as we,W as f,X as l,V as h,Y as p,S as i,ao as F,aM as n,aC as w,aD as D,aE as S,an as $,ah as c,aN as T,aO as ue,aB as k,m as P,T as v,U as C,aP as L,aQ as W,aG as B,aR as O,aS as Be,am as _e,aT as Ce,aU as V,aV as te,aW as re,aX as Te,aY as se,aZ as ke,E as U,M as E,a_ as Ve,au as X,a$ as Me,O as G,b0 as Pe,b1 as $e,as as Fe,R as q,b2 as Ie,b3 as Oe,b4 as J,b5 as xe,b6 as De,ai as H,b7 as Ne,b8 as Re,h as Y,al as He,b9 as Ae,at as Le,ba as Ue,aw as Ee,ax as I,av as Ge,bb as qe,az as ze,bc as je,bd as de,be as We,bf as Ye,bg as Qe,bh as Ke,bi as ce,bj as z,bk as oe,bl as Xe,bm as me,bn as pe,bo as he,bp as Je,bq as Ze,br as et,bs as tt,bt as rt,bu as st,bv as ot,bw as nt,bx as at}from"./admin-drawer-panel-D4CYCd_H.js";import{V as it}from"./VTable-xJS8rtC3.js";import{V as lt}from"./VDialog-DOm1w6bL.js";import{u as g,f as Q,g as ut,a as dt,d as ct,c as mt}from"./main-BnyyRHtu.js";import{V as A}from"./VCheckbox-D_kRyvnz.js";import{b as pt,a as j,V as ne,c as ht,S as ft}from"./settings-drawer-CF0z39tG.js";import{M as gt,p as bt,B as yt,g as vt,V as K,N as ae,t as St,T as x,a as wt,P as Bt,b as _t,c as Ct}from"./pagination-toolbar-B-H-BgUh.js";import{C as Tt}from"./confirm-dialog-B8T3Aamf.js";import{V as kt}from"./VSelect-DhYHkIlU.js";import{E as Vt,P as Mt,V as fe,U as Pt}from"./unauthorized-CFFrmehB.js";import{V as $t}from"./VCombobox-BemG8ph3.js";import{V as Ft}from"./VTextField-CWKnATIB.js";import"./VCheckboxBtn-CasNFNDK.js";import"./VSelectionControl-DZ7Z3QaY.js";import"./copy-to-clipboard-DoUvDJVx.js";import"./VSlideGroup-BfZo3lM5.js";import"./change-password-dialog-CrIdNi1F.js";import"./filter-DMpQdE_u.js";const It=[["characters","CSV","category"],["community_rating","Decimal","communityrating"],["contributor","CSV","author, creator, credit, person, people"],["country","String"],["created_at","DateTime","created"],["critical_rating","Decimal","criticalrating"],["day","Integer"],["date","Date"],["decade","Integer"],["file_type","String","filetype, type"],["genres","CSV","genre"],["identifier","CSV","id, nss"],["identifier_type","CSV","id_type, idtype, nid"],["imprint","String"],["issue","String","(Combined issue_number and issue_suffix)"],["issue_number","Decimal","number"],["issue_suffix","String"],["language","String"],["location","CSV","location"],["maturity_rating","String"],["monochrome","String","blackandwhite"],["month","Integer"],["reading_direction","String","direction"],["name","String","title"],["notes","String"],["original_format","String","format, orginalformat"],["path","String","filename, folder, folders"],["page_count","Integer","pages, pagecount"],["publisher","String"],["reading_direction","String","direction"],["review","String"],["scan_info","String","scan, scaninfo"],["series","String"],["series_groups","CSV","seriesgroups"],["size","Integer"],["stories","CSV","story"],["story_arcs","CSV","storyarcs"],["summary","String","comments, description"],["tags","CSV","tag"],["tagger","String"],["teams","CSV","team"],["updated_at","Date","updated"],["volume","String"],["web","String"],["year","Integer"]],Ot={name:"SearchHelp",components:{CloseButton:ve,DrawerItem:Se},data(){return{mdiOpenInNew:le,mdiArchiveSearchOutline:we,dialog:!1,FIELD_ROWS:It}}},xt={id:"searchHelp"},Dt={id:"fieldTableContainer"},Nt={class:"aliasCol"},Rt={id:"textContainer"},Ht={href:"https://whoosh.readthedocs.io/en/latest/querylang.html",target:"_blank"},At={href:"https://whoosh.readthedocs.io/en/latest/dates.html#parsing-date-queries",target:"_blank"};function Lt(e,t,s,d,o,r){const a=f("DrawerItem"),u=f("CloseButton");return l(),h(lt,{modelValue:o.dialog,"onUpdate:modelValue":t[2]||(t[2]=m=>o.dialog=m),"content-class":"browserSearchHelp",fullscreen:"",scrim:!1,transition:"dialog-bottom-transition"},{activator:p(({props:m})=>[i(a,F(m,{"prepend-icon":o.mdiArchiveSearchOutline,title:"Search Help"}),null,16,["prepend-icon"])]),default:p(()=>[n("div",xt,[i(u,{class:"closeButton",title:"Close Help (esc)",size:"x-large",onClick:t[0]||(t[0]=m=>o.dialog=!1)}),t[59]||(t[59]=n("h1",null,"Search Help",-1)),n("div",Dt,[t[4]||(t[4]=n("h2",null,"Search Fields",-1)),i(it,{id:"fieldTable",class:"highlight-table"},{default:p(()=>[t[3]||(t[3]=n("thead",null,[n("tr",null,[n("th",null,"Field"),n("th",null,"Type"),n("th",null,"Aliases")])],-1)),n("tbody",null,[(l(!0),w($,null,D(o.FIELD_ROWS,m=>(l(),w("tr",{key:m[0]},[n("td",null,S(m[0]),1),n("td",null,S(m[1]),1),n("td",Nt,S(m[2]||""),1)]))),128))])]),_:1})]),n("div",Rt,[t[15]||(t[15]=n("h2",null,"Whoosh Query Parser",-1)),n("p",null,[t[6]||(t[6]=c(" Codex uses the Whoosh search engine to execute your text search queries. Whoosh operates much like other familiar search engines. As such, only some special features are documented on this page. To understand its full power, users are encouraged to read the ")),n("a",Ht,[t[5]||(t[5]=c("Whoosh Query Language ")),i(T,{size:"small"},{default:p(()=>[c(S(o.mdiOpenInNew),1)]),_:1})]),t[7]||(t[7]=c(" documentation. "))]),t[16]||(t[16]=n("h2",null,"Operators",-1)),t[17]||(t[17]=c(" Whoosh has the ")),t[18]||(t[18]=n("code",null,"and",-1)),t[19]||(t[19]=c(", ")),t[20]||(t[20]=n("code",null,"or",-1)),t[21]||(t[21]=c(", ")),t[22]||(t[22]=n("code",null,"not",-1)),t[23]||(t[23]=c(", ")),t[24]||(t[24]=n("code",null,"andnot",-1)),t[25]||(t[25]=c(", ")),t[26]||(t[26]=n("code",null,"andmaybe",-1)),t[27]||(t[27]=c(", and ")),t[28]||(t[28]=n("code",null,"require",-1)),t[29]||(t[29]=c(" operators. ")),t[30]||(t[30]=n("h2",null,"Searching Fields",-1)),t[31]||(t[31]=n("p",null,[c(" Like Codex's filter selector menu, but more powerful. You may search on individual comic metadata fields. using a search token like "),n("code",null,"field:value"),c(". ")],-1)),t[32]||(t[32]=n("h3",null,"Dates and DateTimes",-1)),n("p",null,[t[9]||(t[9]=c(" Whoosh parses Dates and DateTime values liberally. Read ")),n("a",At,[t[8]||(t[8]=c("Whoosh Parsing Date Queries ")),i(T,{size:"small"},{default:p(()=>[c(S(o.mdiOpenInNew),1)]),_:1})]),t[10]||(t[10]=c(" documentation for what formats and natural language phrases are accepted. If the format you try fails, the ")),t[11]||(t[11]=n("code",null,"YYYYMMDD",-1)),t[12]||(t[12]=c(" and ")),t[13]||(t[13]=n("code",null,"YYYMMDDHHmmSS",-1)),t[14]||(t[14]=c(" formats are reliable. "))]),t[33]||(t[33]=n("h3",null,"Single Quote complex field Queries",-1)),t[34]||(t[34]=n("p",null,[c(" Use "),n("em",null,"single"),c(" quotes to tell Codex that a complex or natural language phrase should be applied to a specific field ")],-1)),t[35]||(t[35]=n("code",null," created:'this year' ",-1)),t[36]||(t[36]=n("h3",null,"Size Byte Multipliers",-1)),t[37]||(t[37]=n("p",null,[c(" The size field can make use of convenient byte multiplier suffixes like "),n("code",null,"kb"),c(" and "),n("code",null,"mb"),c(" as well as binary suffixes like "),n("code",null,"gib"),c(" and "),n("code",null,"tib"),c(". ")],-1)),t[38]||(t[38]=n("h3",null,"Ranges of Fields",-1)),t[39]||(t[39]=n("p",null,[c(" Whoosh uses brackets and the "),n("em",null,"uppercase"),c(" "),n("code",null,"TO"),c(" operator to delineate a range search. ")],-1)),t[40]||(t[40]=n("code",null,"updated:[last sunday TO 10am]",-1)),t[41]||(t[41]=c(". ")),t[42]||(t[42]=n("p",null," You may leave out the upper or lower bound or use >, <, >=, <= operators. ",-1)),t[43]||(t[43]=n("code",null,"size:<50mb",-1)),t[44]||(t[44]=c(". ")),t[45]||(t[45]=n("h3",null,"Multi Value Fields",-1)),t[46]||(t[46]=n("p",null,[c(" Fields marked type "),n("code",null,"CSV"),c(" in the table to the left may contain comma separated values. This filters by all the supplied values. Multi Value tokens look like: "),n("code",null,"field:term1,term2,term3")],-1)),t[47]||(t[47]=n("h2",null,"Grouped Queries",-1)),t[48]||(t[48]=n("p",null,"Whoosh allows grouping of queries with parenthesis.",-1)),t[49]||(t[49]=n("h2",null,"Example Search",-1)),t[50]||(t[50]=n("p",null," This example search is more convoluted than most searches but uses many features for demonstration: ",-1)),t[51]||(t[51]=n("code",null,' (Holmes and Tesla date:>=1999-1-2 size:[10mib TO 1gb] Gadzooks) or "Captain Nemo" -Quartermain ',-1)),t[52]||(t[52]=n("p",{style:{"margin-top":"1em"}},' Search for comics that contain Holmes and Tesla published after the second day of 1999 that are between 10 Mebibytes and 10 Gigabytes that also contain the word "Gadzooks" but also all comics with the the phrase "Captain Nemo" but no comics will contain the word "Quartermain". ',-1)),t[53]||(t[53]=n("h2",null,"Group and Sorting Behavior",-1)),t[54]||(t[54]=n("p",null," If the search field is empty and then you supply a search query for the first time, Codex navigates you to the to All Issues view and your sets your Sorted By selection to Search Score. If you prefer a different view you may change the group and sort selections after your you make your first search. ",-1)),t[55]||(t[55]=n("h2",null,"Filter Behavior",-1)),t[56]||(t[56]=n("p",null,[c(" Codex applies "),n("em",null,"both"),c(" the Filter selection menu filters "),n("em",null,"and"),c(" the search query field filters to the search. Be sure to clear the filter selector or the search field if you prefer to apply only one of them. ")],-1)),t[57]||(t[57]=n("h2",null,"Faster Browsing and Searching",-1)),t[58]||(t[58]=n("p",null,' Browsing large collections using the group tree and filter dropdown is relatively fast. Searching with the search bar will always be slower. To aid search speed there is a setting for limiting search results which can help with large collections. To see all results, choose Search Result Limit: "Unlimited". ',-1))]),i(u,{class:"closeButton",title:"Close Help (esc)",size:"x-large",onClick:t[1]||(t[1]=m=>o.dialog=!1)})])]),_:1},8,["modelValue"])}const Ut=b(Ot,[["render",Lt],["__scopeId","data-v-975ceadc"]]),Et="rpisv",Gt={name:"BrowserSettingsPanel",components:{SearchHelp:Ut},data(){return{mdiReload:ue,openDelay:2e3}},computed:{...k(P,["isAuthorized"]),...v(P,{isUserAuthorized:e=>!!e.user}),...v(g,{groupChoices:e=>{var t,s;return((s=(t=e.choices)==null?void 0:t.static)==null?void 0:s.settingsGroup)||{}},showSettings:e=>{var t;return((t=e.settings)==null?void 0:t.show)||{}},twentyFourHourTime:e=>{var t;return((t=e.settings)==null?void 0:t.twentyFourHourTime)||!1},twentyFourHourTimeTitle:e=>{var t,s,d;return((d=(s=(t=e.choices)==null?void 0:t.static)==null?void 0:s.twentyFourHourTime)==null?void 0:d.title)||""},dynamicCovers:e=>{var t;return((t=e.settings)==null?void 0:t.dynamicCovers)||!1},customCovers:e=>{var t;return((t=e.settings)==null?void 0:t.customCovers)||!1}}),showShowSettings(){var e,t;return Et.includes((t=(e=this.$route)==null?void 0:e.params)==null?void 0:t.group)}},methods:{...C(g,["setSettings"]),setShow(e,t){const s={show:{[e]:t===!0}};this.setSettings(s)},set24HourTime(e){const t={twentyFourHourTime:e===!0};this.setSettings(t)},setDynamicCovers(e){const t={dynamicCovers:e===!0};this.setSettings(t)},setCustomCovers(e){const t={customCovers:e===!0};this.setSettings(t)}}},qt={key:0,id:"showSettings"};function zt(e,t,s,d,o,r){const a=f("SearchHelp");return l(),w($,null,[r.showShowSettings?L((l(),w("div",qt,[t[3]||(t[3]=n("h4",{class:"settingsHeader"},"Show Group Levels",-1)),(l(!0),w($,null,D(e.groupChoices,u=>(l(),h(A,{key:u.title,class:"browserGroupCheckbox",density:"compact","hide-details":"auto","model-value":e.showSettings[u.value],"true-value":!0,label:`Show ${u.title}`,"onUpdate:modelValue":m=>r.setShow(u.value,m)},null,8,["model-value","label","onUpdate:modelValue"]))),128))])),[[W,{openDelay:o.openDelay,text:"Show these groups when navigating the browse tree"}]]):B("",!0),i(O),n("div",null,[t[4]||(t[4]=n("h4",{class:"settingsHeader"},"Covers",-1)),L(i(A,{class:"browserGroupCheckbox",density:"compact","hide-details":"auto","model-value":e.dynamicCovers,"true-value":!0,label:"Dynamic Covers","onUpdate:modelValue":t[0]||(t[0]=u=>r.setDynamicCovers(u))},null,8,["model-value"]),[[W,{openDelay:o.openDelay,text:"Choose covers by filters, search, and order"}]]),L(i(A,{class:"browserGroupCheckbox",density:"compact","hide-details":"auto","model-value":e.customCovers,"true-value":!0,label:"Custom Covers","onUpdate:modelValue":t[1]||(t[1]=u=>r.setCustomCovers(u))},null,8,["model-value"]),[[W,{openDelay:o.openDelay,text:"Overlay custom covers if the admin has set them."}]])]),i(O),i(a),i(O),i(A,{class:"browserGroupCheckbox",density:"compact","hide-details":"auto","model-value":e.twentyFourHourTime,"true-value":!0,indeterminate:"",label:"Force 24 Hour Time","onUpdate:modelValue":t[2]||(t[2]=u=>r.set24HourTime(u))},null,8,["model-value"]),i(O)],64)}const jt=b(Gt,[["render",zt],["__scopeId","data-v-7305feeb"]]),Wt={name:"BrowserSettingsDrawer",components:{SettingsDrawer:pt,BrowserSettingsPanel:jt}};function Yt(e,t,s,d,o,r){const a=f("BrowserSettingsPanel"),u=f("SettingsDrawer");return l(),h(u,{title:"Browser",temporary:"","disable-resize-watcher":""},{panel:p(()=>[i(a)]),_:1})}const Qt=b(Wt,[["render",Yt]]),Kt={name:"BrowserContainerMenu",components:{ConfirmDialog:Tt},props:{item:{type:Object,required:!0}},data(){return{mdiDotsVertical:Be,showMenu:!1}},computed:{...v(g,{groupNames:e=>e.choices.static.groupNames}),verb(){return this.item.finished?"Unread":"Read"},confirmText(){return`Mark ${this.verb}`},markReadText(){const e=["Mark"];this.item.group!="c"&&e.push("Entire");let t=this.groupNames[this.item.group];return this.item.group!=="s"&&(t=t.slice(0,-1)),e.push(t,this.verb),e.join(" ")},itemName(){return this.item.name?this.item.name:"(Empty)"}},methods:{...C(g,["setBookmarkFinished"]),toggleRead:function(){this.setBookmarkFinished(this.item,!this.item.finished),this.showMenu=!1}}},Xt={class:"background-soft-highlight"};function Jt(e,t,s,d,o,r){const a=f("ConfirmDialog");return l(),h(kt,{modelValue:o.showMenu,"onUpdate:modelValue":t[2]||(t[2]=u=>o.showMenu=u),"offset-y":"",top:""},{activator:p(({props:u})=>[i(_e,F({"aria-label":"action menu",class:"browserCardMenuIcon cardControlButton",icon:"",title:"Action Menu",variant:"text"},u,{onClick:t[0]||(t[0]=Ce(()=>{},["prevent"]))}),{default:p(()=>[i(T,null,{default:p(()=>[c(S(o.mdiDotsVertical),1)]),_:1})]),_:2},1040)]),default:p(()=>[n("div",Xt,[s.item.group==="c"?(l(),h(V,{key:0,title:r.markReadText,onClick:r.toggleRead},null,8,["title","onClick"])):(l(),h(a,{key:1,"button-text":r.markReadText,"title-text":r.markReadText,"confirm-text":r.confirmText,"object-name":r.itemName,onConfirm:r.toggleRead,onCancel:t[1]||(t[1]=u=>o.showMenu=!1)},null,8,["button-text","title-text","confirm-text","object-name","onConfirm"]))])]),_:1},8,["modelValue"])}const Zt=b(Kt,[["render",Jt]]),er={name:"BrowserCardControls",components:{BrowserCardMenu:Zt,MetadataButton:gt},props:{item:{type:Object,required:!0},eyeOpen:{type:Boolean,required:!0}},data(){return{mdiEye:te,mdiEyeOff:re}},computed:{eyeIcon:function(){return this.eyeOpen?te:re}}},tr={class:"cardControls"};function rr(e,t,s,d,o,r){const a=f("MetadataButton"),u=f("BrowserCardMenu");return l(),w("div",tr,[s.item.group==="c"?(l(),h(T,{key:0,class:"eye"},{default:p(()=>[c(S(r.eyeIcon),1)]),_:1})):B("",!0),i(a,{group:s.item.group,book:s.item,children:s.item.childCount},null,8,["group","book","children"]),i(u,{item:s.item},null,8,["item"])])}const sr=b(er,[["render",rr],["__scopeId","data-v-6f2c700a"]]),or=new Set(["community_rating","critical_rating"]),nr=new Set(["date"]),ar=new Set(["bookmark_updated_at","created_at","updated_at"]),ir={name:"OrderByCaption",props:{item:{type:Object,required:!0}},computed:{...v(g,{orderBy:e=>e.settings.orderBy,twentyFourHourTime:e=>e.settings.twentyFourHourTime,topGroup:e=>e.settings.topGroup}),orderValue(){let e=this.item.orderValue;try{if(this.orderBy===void 0||this.orderBy===null||this.orderBy==="sort_name"&&(this.item.group!=="c"||this.topGroup!=="f")||this.orderBy==="filename"&&this.item.group==="f"||this.orderBy==="story_arc_number"&&this.item.group==="a"||e===null||e===void 0)e="";else if(nr.has(this.orderBy)){const t=new Date(e);e=Te.format(t)}else this.orderBy=="search_score"?e=se.format(Math.round(Number.parseFloat(e)*10)):ar.has(this.orderBy)?e=ke(e,this.twentyFourHourTime,!0):this.orderBy=="page_count"?e=`${se.format(e)} pages`:this.orderBy=="size"?e=bt(Number.parseInt(e,10)):or.has(this.orderBy)&&(e=`★  ${e}`)}catch(t){console.debug(t)}return e}}},lr=["innerHTML"];function ur(e,t,s,d,o,r){return r.orderValue?(l(),w("div",{key:0,class:"orderCaption text-caption",innerHTML:r.orderValue},null,8,lr)):B("",!0)}const dr=b(ir,[["render",ur],["__scopeId","data-v-26f7741a"]]),cr={name:"BrowserCardSubtitle",props:{item:{type:Object,required:!0}},computed:{...v(g,{orderByName:e=>e.settings.orderBy=="sort_name",topGroup:e=>e.settings.topGroup,showSeries:e=>e.settings.show.s,showVolume:e=>e.settings.show.v,zeroPad:e=>e.page.zeroPad}),seriesName(){return(this.topGroup==="a"||this.orderByName&&!this.showSeries)&&["c","v"].includes(this.item.group)&&this.item.seriesName?this.item.seriesName:!1},volumeName(){return(this.topGroup==="a"||this.orderByName&&!this.showVolume)&&this.item.group==="c"&&this.item.volumeName?Q(this.item.volumeName):!1},headerName:function(){let e;switch(this.item.group){case"i":e=this.item.publisherName;break;case"v":e=this.item.seriesName;break;case"c":e=this.$route.params.group==="f"?ut(this.item,this.zeroPad):dt(this.item,this.zeroPad);break;default:e=""}return e&&this.item.ids&&this.item.ids.length>1?"(Multiple)":e},displayName:function(){return this.item.group==="v"?Q(this.item.name):this.item.name},linkLabel:function(){let e="";return e+=this.item.group==="c"?"Read":"Browse to",e+=" "+this.headerName,e}}},mr={class:"browserLink cardSubtitle text-caption"},pr={key:0,class:"seriesCaption"},hr={key:1,class:"volumeCaption"},fr={key:2,class:"headerName"},gr={class:"displayName"};function br(e,t,s,d,o,r){return l(),w("div",mr,[r.seriesName?(l(),w("div",pr,S(r.seriesName),1)):B("",!0),r.volumeName?(l(),w("div",hr,S(r.volumeName),1)):B("",!0),r.headerName?(l(),w("div",fr,S(r.headerName),1)):B("",!0),n("div",gr,S(r.displayName),1)])}const yr=b(cr,[["render",br],["__scopeId","data-v-a9a0493b"]]),vr=/iP(?:ad|hone|od)|Mac OS|X11; Linux/,Sr=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.matchMedia("(any-hover: none)").matches?vr.test(navigator.userAgent):!0,wr=Sr(),Br=U({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...E(),...Ve(),...X(),...Me({transition:"fade-transition"})},"VLazy"),_r=G()({name:"VLazy",directives:{intersect:Pe},props:Br(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:s}=t;const{dimensionStyles:d}=$e(e),o=Fe(e,"modelValue");function r(a){o.value||(o.value=a)}return q(()=>L(i(e.tag,{class:["v-lazy",e.class],style:[d.value,e.style]},{default:()=>[o.value&&i(Oe,{transition:e.transition,appear:!0},{default:()=>{var a;return[(a=s.default)==null?void 0:a.call(s)]}})]}),[[Ie("intersect"),{handler:r,options:e.options},null]])),{}}}),ie=100,Cr=-170,Tr={name:"BrowserCard",components:{BookCover:yt,BrowserCardControls:sr,BrowserCardSubtitle:yr,OrderByCaption:dr},props:{item:{type:Object,required:!0}},data(){return{doubleTapHovered:wr}},computed:{...v(g,{importMetadata:e=>e.page.adminFlags.importMetadata}),linkLabel(){let e="";return e+=this.item.group==="c"?"Read":"Browse to",e+=" "+this.item.name,e},ids(){return this.item.ids.join(",")},browserRoute(){return{name:"browser",params:{group:this.item.group,pks:this.ids,page:1},query:{ts:this.item.mtime}}},toRoute(){return this.doubleTapHovered?this.item.group==="c"?vt(this.item,this.importMetadata):this.browserRoute:{}},progressBGOpacity(){return this.item.progress?.1:0}},mounted(){this.scrollToMe()},methods:{scrollToMe:function(){if(!this.$route.hash||this.$route.hash.split("-")[1]!==String(this.ids))return;const e=this.$el;if(!e){console.warn("No element found to scroll to!");return}setTimeout(function(){e.scrollIntoView(),setTimeout(function(){window.scrollBy(0,Cr)},ie)},ie)}}},kr={class:"browserCardTop"},Vr={class:"cardFooter"};function Mr(e,t,s,d,o,r){const a=f("BookCover"),u=f("BrowserCardControls"),m=f("router-link"),y=f("BrowserCardSubtitle"),_=f("OrderByCaption");return l(),h(_r,{id:`card-${r.ids}`,transition:"scale-transition"},{default:p(()=>[n("div",{class:"browserCardCoverWrapper",onClick:t[0]||(t[0]=M=>o.doubleTapHovered=!0)},[n("div",kr,[i(a,{group:s.item.group,pks:s.item.ids,mtime:s.item.mtime,"child-count":s.item.childCount,finished:s.item.finished},null,8,["group","pks","mtime","child-count","finished"]),i(m,{class:"cardCoverOverlay",to:r.toRoute,"aria-label":r.linkLabel},{default:p(()=>[i(u,{item:s.item,"eye-open":!!r.toRoute},null,8,["item","eye-open"])]),_:1},8,["to","aria-label"])]),i(J,{class:"bookCoverProgress","bg-opacity":r.progressBGOpacity,"model-value":s.item.progress,"aria-label":`${s.item.progress}% read`,rounded:"",height:"2"},null,8,["bg-opacity","model-value","aria-label"]),n("footer",Vr,[i(y,{item:s.item},null,8,["item"]),i(_,{item:s.item},null,8,["item"])])])]),_:1},8,["id"])}const Pr=b(Tr,[["render",Mr],["__scopeId","data-v-106c6ffc"]]),$r={name:"BrowserEmptyResults",components:{EmptyState:Vt},data(){return{mdiOpenInNew:le}},computed:{...k(P,["isAuthorized","isUserAdmin"]),...v(P,{registration:e=>e.adminFlags.registration}),...k(g,["isFiltersClearable"]),...v(g,{librariesExist:e=>e.page.librariesExist}),empty(){let e={};return this.librariesExist?(e.headline="No Comics Found",e.title="For these filter and search settings",e.icon=xe):(e.headline="No Libraries Exist",this.isUserAdmin?e.title="Use the top right ☰ menu to navigate to the admin panel and add a comic library":this.isAuthorized?e.title="An administrator must add some comics libraries":e.title="Use the top right ☰ menu to log in as an administrator to add libraries",e.icon=De),e},showLinkToReadmeAdmin(){return!this.librariesExist&&this.isUserAdmin},actionText(){return this.isFiltersClearable?"Clear Filters and Search":""}},methods:{...C(g,["clearFilters"])}},Fr={key:0},Ir={href:"https://github.com/ajslater/codex#-administration",target:"_blank"};function Or(e,t,s,d,o,r){const a=f("EmptyState");return l(),h(a,{class:"browserEmpty",headline:r.empty.headline,title:r.empty.title,icon:r.empty.icon,"action-text":r.actionText,"onClick:action":t[0]||(t[0]=u=>e.clearFilters(!0))},{default:p(()=>[r.showLinkToReadmeAdmin?(l(),w("div",Fr,[t[2]||(t[2]=c(" See the ")),n("a",Ir,[t[1]||(t[1]=c("README ")),i(T,null,{default:p(()=>[c(S(o.mdiOpenInNew),1)]),_:1})]),t[3]||(t[3]=c(" for help "))])):B("",!0)]),_:1},8,["headline","title","icon","action-text"])}const xr=b($r,[["render",Or]]),Dr={name:"BrowserMain",components:{BrowserCard:Pr,BrowserEmptyState:xr,PlaceholderLoading:Mt},computed:{...v(P,{nonUsers:e=>e.adminFlags.nonUsers}),...k(P,["isAuthorized"]),...k(g,["isSearchMode"]),...v(g,{librariesExist:e=>e.page.librariesExist,showPlaceHolder(e){return this.nonUsers===void 0||this.isAuthorized&&(this.librariesExist==null||!e.browserPageLoaded)},cards:e=>[...e.page.groups??[],...e.page.books??[]],numPages:e=>e.page.numPages,query:e=>e.settings.q,isSearchOpen:e=>e.isSearchOpen}),browsePaneClasses(){return{padFooter:this.numPages>1,browsePaneSearch:this.isSearchOpen}},showBrowseItems(){return this.cards&&this.cards.length>0&&this.isAuthorized&&!this.showPlaceHolder},searchLimitMessage(){let e="";if(!this.query)return e;const t=+this.$route.params.page,s=100*t;return this.showPlaceHolder?e+=`Searching for ${s} entries...`:this.numPages>t&&(e+=`Search results truncated to ${s} entries.`,e+=" Advance the page to look for more."),e}}},Nr={key:0,id:"browsePaneContainer"},Rr={key:3,id:"searchLimitMessage",title:"You may change this in the settings drawer"};function Hr(e,t,s,d,o,r){const a=f("BrowserCard"),u=f("PlaceholderLoading"),m=f("BrowserEmptyState");return l(),h(fe,{id:"browsePane",class:H(r.browsePaneClasses)},{default:p(()=>[r.showBrowseItems?(l(),w("div",Nr,[(l(!0),w($,null,D(e.cards,y=>(l(),h(a,{key:`${y.group}${y.ids}`,item:y},null,8,["item"]))),128))])):e.showPlaceHolder?(l(),h(u,{key:1,class:"placeholder"})):(l(),h(m,{key:2})),r.searchLimitMessage?(l(),w("div",Rr,S(r.searchLimitMessage),1)):B("",!0)]),_:1},8,["class"])}const Ar=b(Dr,[["render",Hr],["__scopeId","data-v-0c0fe1dd"]]),Lr=U({divider:[Number,String],...E()},"VBreadcrumbsDivider"),Ur=G()({name:"VBreadcrumbsDivider",props:Lr(),setup(e,t){let{slots:s}=t;return q(()=>{var d;return i("li",{class:["v-breadcrumbs-divider",e.class],style:e.style},[((d=s==null?void 0:s.default)==null?void 0:d.call(s))??e.divider])}),{}}}),Er=U({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...E(),...Ne(),...X({tag:"li"})},"VBreadcrumbsItem"),ge=G()({name:"VBreadcrumbsItem",props:Er(),setup(e,t){let{slots:s,attrs:d}=t;const o=Re(e,d),r=Y(()=>{var y;return e.active||((y=o.isActive)==null?void 0:y.value)}),a=Y(()=>r.value?e.activeColor:e.color),{textColorClasses:u,textColorStyles:m}=He(a);return q(()=>i(e.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":r.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:r.value&&e.activeClass},u.value,e.class],style:[m.value,e.style],"aria-current":r.value?"page":void 0},{default:()=>{var y,_;return[o.isLink.value?i("a",{class:"v-breadcrumbs-item--link",href:o.href.value,"aria-current":r.value?"page":void 0,onClick:o.navigate},[((_=s.default)==null?void 0:_.call(s))??e.title]):((y=s.default)==null?void 0:y.call(s))??e.title]}})),{}}}),Gr=U({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:Ae,items:{type:Array,default:()=>[]},...E(),...Le(),...Ue(),...X({tag:"ul"})},"VBreadcrumbs"),qr=G()({name:"VBreadcrumbs",props:Gr(),setup(e,t){let{slots:s}=t;const{backgroundColorClasses:d,backgroundColorStyles:o}=Ee(I(e,"bgColor")),{densityClasses:r}=Ge(e),{roundedClasses:a}=qe(e);ze({VBreadcrumbsDivider:{divider:I(e,"divider")},VBreadcrumbsItem:{activeClass:I(e,"activeClass"),activeColor:I(e,"activeColor"),color:I(e,"color"),disabled:I(e,"disabled")}});const u=Y(()=>e.items.map(m=>typeof m=="string"?{item:{title:m},raw:m}:{item:m,raw:m}));return q(()=>{const m=!!(s.prepend||e.icon);return i(e.tag,{class:["v-breadcrumbs",d.value,r.value,a.value,e.class],style:[o.value,e.style]},{default:()=>{var y;return[m&&i("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[s.prepend?i(je,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},s.prepend):i(T,{key:"prepend-icon",start:!0,icon:e.icon},null)]),u.value.map((_,M,Z)=>{var ee;let{item:N,raw:ye}=_;return i($,null,[((ee=s.item)==null?void 0:ee.call(s,{item:N,index:M}))??i(ge,F({key:M,disabled:M>=Z.length-1},typeof N=="string"?{title:N}:N),{default:s.title?()=>{var R;return(R=s.title)==null?void 0:R.call(s,{item:N,index:M})}:void 0}),M<Z.length-1&&i(Ur,null,{default:s.divider?()=>{var R;return(R=s.divider)==null?void 0:R.call(s,{item:ye,index:M})}:void 0})])}),(y=s.default)==null?void 0:y.call(s)]}})}),{}}}),zr={f:"Folder",a:"Story Arc",r:"Top",p:"Publisher",i:"Imprint",s:"Series",v:"Volume"},jr={f:We,r:de,p:Ye,i:Qe,s:Ke},Wr={name:"BrowserBreadcrumbs",computed:{...v(g,{breadcrumbs(e){const t=[],s=e.settings.breadcrumbs.slice(0,e.settings.breadcrumbs.length-1);if(!s)return t;let d="";for(const o of s){const r=this.getTo(o,d),a=o.name?o.name:"",u=o.group,m=this.getIcon(o.pks,a,u),y=o.pks==="0"?"Top":zr[u],_={to:r,title:a,icon:m,tooltip:y};t.push(_),d=o.pks}return t}})},methods:{getTo(e,t){const s=ct(e);delete s.name;const d={name:"browser",params:s};return t&&(d.hash=`#card-${t}`),d},getIcon(e,t,s){let d;return"rfa".indexOf(s)!=-1&&e==="0"?d=de:t?d="":d=jr[s],d}}},Yr={key:1};function Qr(e,t,s,d,o,r){return l(),h(qr,{id:"browserBreadcrumbs",density:"compact",items:e.breadcrumbs},{item:p(({item:a})=>[i(ge,{to:a.to,title:a.tooltip},{default:p(()=>[a.icon?(l(),h(T,{key:0},{default:p(()=>[c(S(a.icon),1)]),_:2},1024)):(l(),w("span",Yr,S(a.title),1))]),_:2},1032,["to","title"])]),_:1},8,["items"])}const Kr=b(Wr,[["render",Qr],["__scopeId","data-v-b8e7faf5"]]),Xr={name:"BrowserHeader",components:{Breadcrumbs:Kr}};function Jr(e,t,s,d,o,r){const a=f("Breadcrumbs");return l(),h(j,{id:"breadcrumbsToolbar",height:24,class:"titleToolbar",elevation:"8"},{default:p(()=>[i(a)]),_:1})}const Zr=b(Xr,[["render",Jr],["__scopeId","data-v-fd83bc5e"]]),es={name:"BrowserHeader",data(){return{mdiReload:ue}},head(){return{meta:[{hid:"description",name:"description",content:["browse comics",this.longBrowserTitlePrefix,this.longBrowseTitleMain,this.longBrowseTitleSuffix].filter(Boolean).join(" ")}]}},computed:{...v(g,{browserTitle:e=>{var t;return(t=e.page)==null?void 0:t.title},groupNames:e=>e.choices.static.groupNames,modelGroup:e=>e.page.modelGroup}),...k(P,["isUserAdmin"]),title(){let e;if(Number(this.$route.params.pks)===0)e="All";else if(this.browserTitle){let t=[];const{groupName:s,groupCount:d}=this.browserTitle,r=this.$route.params.group==="v"?Q(s):s;if(r&&t.push(r),d){const a=`of ${d}`;t.push(a)}e=t.join(" ")}else e="";return e},subtitle(){return this.$route.params.group==="f"?"":this.groupNames[this.modelGroup]}}};function ts(e,t,s,d,o,r){return l(),h(j,{id:"browserToolbarTitle",height:24,"extension-height":24,elevation:"8"},ce({default:p(()=>[i(ne,{id:"browserTitle",class:"browserTitle"},{default:p(()=>[c(S(r.title),1)]),_:1})]),_:2},[r.subtitle?{name:"extension",fn:p(()=>[i(ne,{id:"browserSubtitle",class:"browserTitle"},{default:p(()=>[c(S(r.subtitle),1)]),_:1})]),key:"0"}:void 0]),1024)}const rs=b(es,[["render",ts],["__scopeId","data-v-1df24ead"]]),ss=10,os={name:"BrowserSearchCombobox",data(){return{mdiMagnify:z,menu:!1,query:"",items:[""]}},computed:{...v(g,{stateQ:e=>e.settings.q})},watch:{stateQ(e){this.query=e,this.addToMenu(e)}},beforeMount(){this.query=this.stateQ},methods:{...C(g,["setSettings","startSearchHideTimeout","clearSearchHideTimeout"]),addToMenu(e){if(!e||this.items.includes(e))return;const t=this.items[0]===""?[]:this.items;t.unshift(e),this.items=t.slice(0,ss)},doSearch(e=!1){this.menu=!1;const s={q:this.query?this.query.trim():""};e&&(s.orderBy="sort_name",s.orderReverse=!1,this.doBlur()),this.setSettings(s)},doBlur(){this.menu=!1,(this.query?this.query.trim():"")||this.startSearchHideTimeout()}}};function ns(e,t,s,d,o,r){return l(),h($t,{id:"searchbox",ref:"searchbox",modelValue:o.query,"onUpdate:modelValue":t[0]||(t[0]=a=>o.query=a),menu:o.menu,"onUpdate:menu":t[1]||(t[1]=a=>o.menu=a),items:o.items,autofocus:"","aria-label":"search",clearable:"",density:"compact","full-width":"","hide-details":"auto","hide-selected":"","menu-props":{maxHeight:void 0},"no-filter":"","prepend-inner-icon":o.mdiMagnify,variant:"solo","onClick:clear":t[2]||(t[2]=a=>r.doSearch(!0)),"onClick:prependInner":r.doSearch,onKeydown:e.clearSearchHideTimeout,onKeyup:[oe(r.doSearch,["enter"]),oe(r.doBlur,["esc"])],onFocus:e.clearSearchHideTimeout,onBlur:r.doBlur},null,8,["modelValue","menu","items","prepend-inner-icon","onClick:prependInner","onKeydown","onKeyup","onFocus","onBlur"])}const as=b(os,[["render",ns]]),is={name:"BrowserSearchToolbar",components:{BrowserSearchCombobox:as},computed:{...v(g,{isSearchOpen:e=>e.isSearchOpen})}};function ls(e,t,s,d,o,r){const a=f("BrowserSearchCombobox");return l(),h(Xe,null,{default:p(()=>[e.isSearchOpen?(l(),h(j,{key:0,density:"compact",height:64},{default:p(()=>[i(K,{id:"searchToolbarItems"},{default:p(()=>[i(a)]),_:1})]),_:1})):B("",!0)]),_:1})}const us=b(is,[["render",ls],["__scopeId","data-v-4900943a"]]),ds={name:"BrowserFilterSubMenu",props:{name:{type:String,required:!0}},emits:["selected"],data(){return{mdiChevronLeft:me,mdiCloseCircleOutline:pe,query:""}},computed:{...v(g,{choices(e){return e.choices.dynamic[this.name]},readingDirectionTitles:e=>e.choices.static.readingDirection,identifierTypeTitles:e=>e.choices.static.identifierType,filter(e){return e.settings.filters[this.name]}}),...he(g,["filterMode"]),hasNone(){for(const e of this.choices)if(ae.has(e)||e instanceof Object&&ae.has(e.pk))return!0;return!1},vuetifyItems(){return St(this.choices,this.query)},title(){return mt(this.name)},lowerTitle(){return this.title.toLowerCase()},filterMenuIcon(){return this.filter&&this.filter.length>0?Je:Ze},isClearable(){var e;return(e=this.filter)==null?void 0:e.length}},methods:{...C(g,["clearOneFilter","identifierTypeTitle","loadAvailableFilterChoices","loadFilterChoices"]),setUIFilterMode(e){this.filterMode=e,this.query="",e!=="base"&&typeof this.choices!="object"&&this.loadFilterChoices(e)},selected(e){const t={filters:{[this.name]:e}};this.$emit("selected",t)},itemTitle:function(e){return this.name==="readingDirection"?this.readingDirectionTitles[e.value]:this.name==="identifierType"?this.identifierTypeTitle(e.title):e.title},async _loadSubAvailableFilterChoices(){return this.loadAvailableFilterChoices().then(()=>this.loadFilterChoices(this.name))},onClear(){return this.clearOneFilter(this.name).then(()=>this._loadSubAvailableFilterChoices())}}},cs={key:0},ms={class:"filterHeader"};function ps(e,t,s,d,o,r){return l(),w("div",null,[i(et,{"hide-on-leave":""},{default:p(()=>[e.filterMode==="base"?(l(),h(V,{key:0,density:"compact",variant:"plain",title:r.title,"append-icon":r.filterMenuIcon,onClick:t[0]||(t[0]=a=>r.setUIFilterMode(s.name))},null,8,["title","append-icon"])):B("",!0)]),_:1}),i(rt,{"hide-on-leave":""},{default:p(()=>[e.filterMode===s.name?(l(),w("div",cs,[n("header",ms,[i(V,{class:"filterHeaderTitle","prepend-icon":o.mdiChevronLeft,title:r.lowerTitle,onClick:t[1]||(t[1]=a=>r.setUIFilterMode("base"))},null,8,["prepend-icon","title"]),r.isClearable?(l(),h(V,{key:0,density:"compact",class:"clearFilter",title:"Clear Filter","append-icon":o.mdiCloseCircleOutline,onClick:r.onClear},null,8,["append-icon","onClick"])):B("",!0),typeof e.choices=="object"?(l(),h(Ft,{key:1,modelValue:o.query,"onUpdate:modelValue":t[2]||(t[2]=a=>o.query=a),placeholder:"Filter","full-width":"",density:"compact",filled:"",rounded:"","hide-details":"auto",onFocus:t[3]||(t[3]=a=>e.filterMode=s.name)},null,8,["modelValue"])):(l(),h(J,{key:2,class:"filterValuesProgress",rounded:"",indeterminate:""}))]),typeof e.choices=="object"?(l(),h(tt,{key:0,"model-value":e.filter,class:"filterGroup overflow-y-auto",density:"compact",multiple:"",items:r.vuetifyItems,"onUpdate:selected":r.selected},{default:p(()=>[r.hasNone?(l(),h(V,{key:-1,title:"None",value:-1,class:"noneItem",density:"compact",variant:"plain"})):B("",!0),(l(!0),w($,null,D(r.vuetifyItems,a=>(l(),h(V,{key:a.value,title:r.itemTitle(a),value:a.value,density:"compact",variant:"plain"},null,8,["title","value"]))),128))]),_:1},8,["model-value","items","onUpdate:selected"])):B("",!0)])):B("",!0)]),_:1})])}const hs=b(ds,[["render",ps],["__scopeId","data-v-f1f62462"]]),fs={name:"BrowserFilterBySelect",components:{BrowserFilterSubMenu:hs,ToolbarSelect:x},extends:x,data(){return{mdiCloseCircleOutline:pe,mdiFilterMultipleOutline:st,menu:!1}},computed:{...k(g,["filterByChoicesMaxLen","isDynamicFiltersSelected","isFiltersClearable"]),...v(g,{bookmarkChoices:e=>e.choices.static.bookmark,bookmarkFilter:e=>e.settings.filters.bookmark||e.choices.static.bookmark[0],filters:e=>e.settings.filters,filterMenuClass:function(e){let t="filterMenu";return e.filterMode!=="base"&&(t+="Hidden"),t},dynamicChoiceNames:function(e){if(e.choices.dynamic===void 0)return;const t=[];for(const[s,d]of Object.entries(e.choices.dynamic))d&&t.push(s);return t}}),...he(g,["filterMode"]),padRight(){return this.$vuetify.display.xs&&!this.bookmarkFilter}},methods:{...C(g,["clearFilters","loadAvailableFilterChoices","setSettings"]),onUpdateModelValue(e){const t={filters:{bookmark:e}};this.onSubMenuSelected(t)},onSubMenuSelected(e){this.menu=!1,this.setSettings(e),this.filterMode="base"},onClear(){return this.clearFilters().then(()=>this.loadAvailableFilterChoices()).catch(()=>{console.error("clear filters")})},onMenu(e){e&&this.dynamicChoiceNames===void 0&&this.loadAvailableFilterChoices()}}},gs={class:"codexSelection"};function bs(e,t,s,d,o,r){const a=f("BrowserFilterSubMenu"),u=f("ToolbarSelect");return l(),h(u,{menu:o.menu,"onUpdate:menu":[t[0]||(t[0]=m=>o.menu=m),r.onMenu],class:H(["filterBySelect",{filterBySelectXSmall:r.padRight}]),"select-label":"filter by",items:e.bookmarkChoices,"menu-props":{contentClass:e.filterMenuClass,maxHeight:void 0},"model-value":e.bookmarkFilter,"max-select-len":e.filterByChoicesMaxLen-1,"onUpdate:modelValue":r.onUpdateModelValue},{selection:p(({item:m})=>[n("span",gs,S(m.title),1),e.isDynamicFiltersSelected?(l(),h(T,{key:0,class:"filterSuffix",size:"x-small"},{default:p(()=>[c(S(o.mdiFilterMultipleOutline),1)]),_:1})):B("",!0)]),"prepend-item":p(()=>[e.isFiltersClearable?(l(),h(V,{key:0,density:"compact",variant:"plain",class:"clearFilter",title:"Clear All Filters","append-icon":o.mdiCloseCircleOutline,onClick:r.onClear},null,8,["append-icon","onClick"])):B("",!0)]),"append-item":p(()=>[i(O),e.dynamicChoiceNames===void 0?(l(),h(V,{key:0,density:"compact",variant:"plain"},{default:p(()=>[i(J,{indeterminate:"",rounded:""})]),_:1})):e.dynamicChoiceNames.length>0?(l(!0),w($,{key:1},D(e.dynamicChoiceNames,m=>(l(),h(a,{key:m,name:m,onSelected:r.onSubMenuSelected},null,8,["name","onSelected"]))),128)):(l(),h(V,{key:2,class:"noChoices",density:"compact",variant:"plain",title:"No filters available"}))]),_:1},8,["menu","class","items","menu-props","model-value","max-select-len","onUpdate:modelValue","onUpdate:menu"])}const ys=b(fs,[["render",bs],["__scopeId","data-v-0d876944"]]),vs={name:"BrowseOrderBySelect",components:{ToolbarSelect:x},extends:x,computed:{...k(g,["orderByChoices","orderByChoicesMaxLen"]),...v(g,{orderBySetting:e=>e.settings.orderBy}),reverseValues(){const e=new Set;for(const t of this.orderByChoices)t.reverse&&e.add(t.value);return e},orderBy:{get(){return this.orderBySetting},set(e){const t={orderBy:e,orderReverse:this.reverseValues.has(e)};this.setSettings(t)}}},methods:{...C(g,["setSettings"])}};function Ss(e,t,s,d,o,r){const a=f("ToolbarSelect");return l(),h(a,F({modelValue:r.orderBy,"onUpdate:modelValue":t[0]||(t[0]=u=>r.orderBy=u),class:"orderBySelect","select-label":"order by",items:e.orderByChoices,"max-select-len":e.orderByChoicesMaxLen-4},e.$attrs),null,16,["modelValue","items","max-select-len"])}const ws=b(vs,[["render",Ss]]),Bs={name:"ToolbarButton",components:{ScaleButton:ht}};function _s(e,t,s,d,o,r){const a=f("ScaleButton");return l(),h(a,{variant:"plain",class:"toolbarButton"},ce({_:2},[D(e.$slots,(u,m)=>({name:m,fn:p(y=>[ot(e.$slots,m,F({props:u},y))])}))]),1024)}const be=b(Bs,[["render",_s]]),Cs={name:"BrowseOrderReverseButton",components:{ToolbarButton:be},data(){return{mdiSortVariant:nt}},computed:{...v(g,{orderReverseSetting:e=>e.settings.orderReverse}),title(){return this.orderReverseSetting?"order descending":"order ascending"},iconClasses(){return{inverted:!this.orderReverseSetting}}},methods:{...C(g,["setSettings"]),toggleOrderReverse(){const e={orderReverse:!this.orderReverseSetting};this.setSettings(e)}}};function Ts(e,t,s,d,o,r){const a=f("ToolbarButton");return l(),h(a,{class:"orderReverseButton",icon:"",title:r.title,onClick:r.toggleOrderReverse},{default:p(()=>[i(T,{class:H(r.iconClasses)},{default:p(()=>[c(S(o.mdiSortVariant),1)]),_:1},8,["class"])]),_:1},8,["title","onClick"])}const ks=b(Cs,[["render",Ts],["__scopeId","data-v-42884e89"]]),Vs={name:"BrowseOrderReverseButton",components:{ToolbarButton:be},data(){return{mdiMagnify:z}},computed:{...v(g,{isSearchOpen:e=>e.isSearchOpen,isQuery:e=>!!e.settings.q})},methods:{...C(g,["setIsSearchOpen"])}};function Ms(e,t,s,d,o,r){const a=f("ToolbarButton");return e.isSearchOpen?B("",!0):(l(),h(a,F({key:0,class:"searchButton",icon:o.mdiMagnify},e.$attrs,{title:"Search",onClick:t[0]||(t[0]=u=>e.setIsSearchOpen(!0))}),null,16,["icon"]))}const Ps=b(Vs,[["render",Ms]]),$s=new Set(["a","f"]),Fs={name:"BrowserTopGroupSelect",components:{ToolbarSelect:x},extends:x,data(){return{DIVIDED_VALUES:$s}},computed:{...v(g,{topGroupSetting:e=>e.settings.topGroup}),...k(g,["topGroupChoices","topGroupChoicesMaxLen"]),topGroup:{get(){return this.topGroupSetting},set(e){const t={topGroup:e};this.setSettings(t)}}},methods:{...C(g,["setSettings"])}};function Is(e,t,s,d,o,r){const a=f("ToolbarSelect");return l(),h(a,{modelValue:r.topGroup,"onUpdate:modelValue":t[0]||(t[0]=u=>r.topGroup=u),class:"topGroupSelect","select-label":"top group",items:e.topGroupChoices,"max-select-len":e.topGroupChoicesMaxLen-2.25},{item:p(({item:u,props:m})=>[o.DIVIDED_VALUES.has(u.value)?(l(),h(O,{key:0})):B("",!0),i(V,F(m,{density:"compact",variant:"plain",title:u.title,value:u.value}),null,16,["title","value"])]),_:1},8,["modelValue","items","max-select-len"])}const Os=b(Fs,[["render",Is]]),xs={name:"BrowserTopToolbar",components:{BrowserFilterBySelect:ys,BrowserSearchButton:Ps,BrowserTopGroupSelect:Os,BrowserOrderBySelect:ws,BrowserOrderReverseButton:ks,SettingsDrawerButton:ft},data(){return{mdiMagnify:z,mdiFamilyTree:at,browseMode:"filter"}}};function Ds(e,t,s,d,o,r){const a=f("BrowserTopGroupSelect"),u=f("BrowserFilterBySelect"),m=f("BrowserOrderBySelect"),y=f("BrowserOrderReverseButton"),_=f("BrowserSearchButton"),M=f("SettingsDrawerButton");return l(),h(j,{id:"browserToolbarTop",density:"compact",height:48},{default:p(()=>[i(K,{id:"browserToolbarLeftItems"},{default:p(()=>[i(a),i(u),i(m),i(y),i(_)]),_:1}),i(wt),i(K,null,{default:p(()=>[i(M)]),_:1})]),_:1})}const Ns=b(xs,[["render",Ds],["__scopeId","data-v-42686e3a"]]),Rs={name:"BrowserHeadToolbars",components:{BrowserBreadcrumbsToolbar:Zr,BrowserSearchToolbar:us,BrowserTopToolbar:Ns,BrowserTitleToolbar:rs}},Hs={id:"codexHeadToolbarWrapper"};function As(e,t,s,d,o,r){const a=f("BrowserTopToolbar"),u=f("BrowserSearchToolbar"),m=f("BrowserBreadcrumbsToolbar"),y=f("BrowserTitleToolbar");return l(),w("header",Hs,[i(a,{class:"codexHeadToolbar"}),i(u,{class:"codexHeadToolbar"}),i(m,{class:"codexHeadToolbar"}),i(y,{class:"codexHeadToolbar"})])}const Ls=b(Rs,[["render",As],["__scopeId","data-v-508c4760"]]),Us={name:"BrowserNavButton",components:{PaginationNavButton:Bt},props:{back:{type:Boolean,required:!0},more:{type:Boolean,default:!1}},data(){return{mdiChevronLeft:me,mdiMagnify:z,routeParams:this.$route.params,page:+this.$route.params.page}},computed:{...k(g,["isSearchMode"]),...v(g,{numPages:e=>e.page.numPages}),increment(){return this.back?-1:1},toPage(){return this.page+this.increment},title(){return this.showMore?"Search for More":"Page "+this.toPage},toRoute(){const e=this.toPage;return{params:{...this.routeParams,page:e}}},classes(){return{leftButton:this.back,rightButton:!this.back}},disabled(){return this.back&&this.page<=1||!this.back&&this.page>=this.numPages},showMore(){return this.more&&this.isSearchMode&&this.toPage===this.numPages}},watch:{$route(e){this.params=e.params,this.page=+e.params.page}}};function Es(e,t,s,d,o,r){const a=f("PaginationNavButton");return l(),h(a,{key:r.toRoute,class:H(r.classes),disabled:r.disabled,title:r.title,to:r.toRoute},{default:p(()=>[r.showMore?(l(),h(T,{key:0},{default:p(()=>[c(S(o.mdiMagnify),1)]),_:1})):B("",!0),i(T,{class:H({flipHoriz:!s.back})},{default:p(()=>[c(S(o.mdiChevronLeft),1)]),_:1},8,["class"])]),_:1},8,["class","disabled","title","to"])}const Gs=b(Us,[["render",Es],["__scopeId","data-v-372671b3"]]),qs={name:"BrowserNavToolbar",components:{BrowserNavButton:Gs,PaginationSlider:_t,PaginationToolbar:Ct},computed:{...v(g,{numPages:e=>e.page.numPages})},methods:{...C(g,["routeToPage"]),onUpdate(e){this.routeToPage(e)}}};function zs(e,t,s,d,o,r){const a=f("BrowserNavButton"),u=f("PaginationSlider"),m=f("PaginationToolbar");return e.numPages>1?(l(),h(m,{key:0},{default:p(()=>[i(a,{back:!0}),i(u,{"model-value":+e.$route.params.page,min:1,max:e.numPages,step:1,"onUpdate:modelValue":t[0]||(t[0]=y=>e.routeToPage(y))},null,8,["model-value","max"]),i(a,{back:!1,more:!0})]),_:1})):B("",!0)}const js=b(qs,[["render",zs]]),Ws={name:"MainBrowser",components:{BrowserHeadToolbars:Ls,BrowserMain:Ar,BrowserNavToolbar:js,BrowserSettingsDrawer:Qt,Unauthorized:Pt},computed:{...v(P,{user:e=>e.user}),...k(P,["isAuthorized"])},watch:{$route(e){var t;window.scrollTo(0,0),this.setPageMtime((t=e==null?void 0:e.query)==null?void 0:t.ts),this.loadBrowserPage()},user(){this.loadSettings()},isAuthorized(){this.loadSettings()}},created(){this.loadSettings()},methods:{...C(g,["loadBrowserPage","loadSettings","setPageMtime"])}};function Ys(e,t,s,d,o,r){const a=f("BrowserHeadToolbars"),u=f("BrowserMain"),m=f("BrowserNavToolbar"),y=f("BrowserSettingsDrawer"),_=f("Unauthorized");return e.isAuthorized?(l(),h(fe,{key:0,id:"browser"},{default:p(()=>[i(a),i(u),i(m),i(y)]),_:1})):(l(),h(_,{key:1}))}const ho=b(Ws,[["render",Ys],["__scopeId","data-v-4a8fba7b"]]);export{ho as default};
