import{aH as T,bf as de,az as H,_ as b,U as m,V as u,T as c,B as z,M as N,aq as O,cv as ue,r as ce,ac as me,h as q,D as fe,P as W,cw as ge,Q as a,am as V,al as Q,ba as R,ca as he,aL as Y,cx as pe,cy as J,aF as ve,R as P,A as we,m as w,bm as ye,S as X,W as g,bi as U,bL as _e,aE as A,af as ke,cz as be,aA as Se,aR as Ve,b7 as Ce,K as Z,aY as ee,cA as Le,L as Pe,N as Ae,au as Be,av as De,a$ as te,cq as Me,c2 as Ee,G as Ie,ak as $e,bg as xe,aB as Ue,bt as Fe,as as Re,b$ as Te,bw as ze,aK as Ne}from"./admin-drawer-panel-Ul8BRcOp.js";import{u as We,p as Ke}from"./main-BHIo0ep5.js";import{C as Oe}from"./change-password-dialog-DjxFqIRX.js";import{S as qe,V as F,a as je}from"./VTextField-D8612eNs.js";import{a as Ge,c as He,u as Qe,V as j,d as G}from"./VSelectionControl-BVJLEOcO.js";import{V as Ye}from"./VDialog-U73OI2x0.js";const Je={name:"AdminBrowserLink",components:{DrawerItem:T},data(){return{mdiBookshelf:de}},computed:{...H(We,["lastRoute"])}};function Xe(e,s,r,t,o,i){const l=m("DrawerItem");return u(),c(l,{to:e.lastRoute,"prepend-icon":o.mdiBookshelf,title:"Browser"},null,8,["to","prepend-icon"])}const Ze=b(Je,[["render",Xe]]),et=z({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ge(),...He()},"VSwitch"),tt=N()({name:"VSwitch",inheritAttrs:!1,props:et(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,s){let{attrs:r,slots:t}=s;const o=O(e,"indeterminate"),i=O(e,"modelValue"),{loaderClasses:l}=ue(e),{isFocused:d,focus:n,blur:y}=Qe(e),_=ce(),C=me&&window.matchMedia("(forced-colors: active)").matches,B=q(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),D=fe(),M=q(()=>e.id||`switch-${D}`);function k(){o.value&&(o.value=!1)}function L(h){var p,v;h.stopPropagation(),h.preventDefault(),(v=(p=_.value)==null?void 0:p.input)==null||v.click()}return W(()=>{const[h,p]=ge(r),v=j.filterProps(e),se=G.filterProps(e);return a(j,V({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":o.value},l.value,e.class]},h,v,{modelValue:i.value,"onUpdate:modelValue":E=>i.value=E,id:M.value,focused:d.value,style:e.style}),{...t,default:E=>{let{id:ae,messagesId:oe,isDisabled:ne,isReadonly:re,isValid:K}=E;const I={model:i,isValid:K};return a(G,V({ref:_},se,{modelValue:i.value,"onUpdate:modelValue":[S=>i.value=S,k],id:ae.value,"aria-describedby":oe.value,type:"checkbox","aria-checked":o.value?"mixed":void 0,disabled:ne.value,readonly:re.value,onFocus:n,onBlur:y},p),{...t,default:S=>{let{backgroundColorClasses:$,backgroundColorStyles:f}=S;return a("div",{class:["v-switch__track",C?void 0:$.value],style:f.value,onClick:L},[t["track-true"]&&a("div",{key:"prepend",class:"v-switch__track-true"},[t["track-true"](I)]),t["track-false"]&&a("div",{key:"append",class:"v-switch__track-false"},[t["track-false"](I)])])},input:S=>{let{inputNode:$,icon:f,backgroundColorClasses:ie,backgroundColorStyles:le}=S;return a(Q,null,[$,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":f||e.loading},e.inset||C?void 0:ie.value],style:e.inset?void 0:le.value},[t.thumb?a(R,{defaults:{VIcon:{icon:f,size:"x-small"}}},{default:()=>[t.thumb({...I,icon:f})]}):a(he,null,{default:()=>[e.loading?a(pe,{name:"v-switch",active:!0,color:K.value===!1?void 0:B.value},{default:x=>t.loader?t.loader(x):a(J,{active:x.isActive,color:x.color,indeterminate:!0,size:"16",width:"2"},null)}):f&&a(Y,{key:String(f),icon:f,size:"x-small"},null)]})])])}})}})}),{}}}),st={name:"AuthLoginDialog",components:{SubmitFooter:qe,DrawerItem:T},data(){return{rules:{username:[e=>!!e||"Username is required"],password:[e=>e?this.registerMode&&e.length<this.MIN_PASSWORD_LEN?`Password must be ${this.MIN_PASSWORD_LEN} characters long`:!0:"Password is required"],passwordConfirm:[e=>e===this.credentials.password||"Passwords must match"]},formModel:{},credentials:{username:"",password:"",passwordConfirm:""},submitButtonEnabled:!1,registerMode:!1,mdiLogin:ve}},computed:{...P(we,{formErrors:e=>e.form.errors,formSuccess:e=>e.form.success}),...P(w,{adminFlags:e=>e.adminFlags,MIN_PASSWORD_LEN:e=>e.MIN_PASSWORD_LEN}),...ye(w,["showLoginDialog"]),submitButtonLabel(){return this.registerMode?"Register":"Login"},loginLabel(){let e="Login";return this.adminFlags.registration&&(e+=" or Register"),e}},watch:{showLoginDialog(e){e&&(this.loadAdminFlags(),this.$refs.form&&this.$refs.form.reset())},credentials:{handler(){const e=this.$refs.form;e?e.validate().then(({valid:s})=>(this.submitButtonEnabled=s,s)).catch(console.error):this.submitButtonEnabled=!1},deep:!0}},mounted(){window.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){window.removeEventListener("keyup",this._keyUpListener)},methods:{...X(w,["loadAdminFlags","login","register"]),doAuth(e){return this[e](this.credentials).then(()=>(this.showLoginDialog=this.formErrors&&this.formErrors.length>0,this.showLoginDialog)).catch(console.error)},submit(){this.$refs.form.validate().then(({valid:s})=>{if(!s)return;const r=this.registerMode?"register":"login";return this.doAuth(r)}).catch(console.error)},_keyUpListener(e){e.stopImmediatePropagation()}}};function at(e,s,r,t,o,i){const l=m("DrawerItem"),d=m("SubmitFooter");return u(),c(Ye,{modelValue:e.showLoginDialog,"onUpdate:modelValue":s[7]||(s[7]=n=>e.showLoginDialog=n),origin:"center-top",transition:"slide-y-transition","max-width":"20em"},{activator:g(({props:n})=>[a(l,V(n,{"prepend-icon":o.mdiLogin,title:i.loginLabel}),null,16,["prepend-icon","title"])]),default:g(()=>[a(je,{id:"authDialog",ref:"form"},{default:g(()=>[a(F,{modelValue:o.credentials.username,"onUpdate:modelValue":s[0]||(s[0]=n=>o.credentials.username=n),autocomplete:"username",label:"Username",rules:o.rules.username,clearable:"",autofocus:"",onKeydown:s[1]||(s[1]=U(n=>e.$refs.password.focus(),["enter"]))},null,8,["modelValue","rules"]),a(F,{ref:"password",modelValue:o.credentials.password,"onUpdate:modelValue":s[2]||(s[2]=n=>o.credentials.password=n),autocomplete:o.registerMode?"new-password":"current-password",label:"Password",rules:o.rules.password,clearable:"",type:"password",onKeydown:s[3]||(s[3]=U(n=>{o.registerMode?e.$refs.passwordConfirm.focus():i.submit()},["enter"]))},null,8,["modelValue","autocomplete","rules"]),a(_e,null,{default:g(()=>[o.registerMode?(u(),c(F,{key:0,ref:"passwordConfirm",modelValue:o.credentials.passwordConfirm,"onUpdate:modelValue":s[4]||(s[4]=n=>o.credentials.passwordConfirm=n),autocomplete:"new-password",label:"Confirm Password",rules:o.rules.passwordConfirm,clearable:"",type:"password",onKeydown:U(i.submit,["enter"])},null,8,["modelValue","rules","onKeydown"])):A("",!0)]),_:1}),e.adminFlags.registration?(u(),c(tt,{key:0,modelValue:o.registerMode,"onUpdate:modelValue":s[5]||(s[5]=n=>o.registerMode=n),label:"Register"},{default:g(()=>s[8]||(s[8]=[ke(" Register ")])),_:1},8,["modelValue"])):A("",!0),a(d,{verb:o.registerMode?"Register":"Login",table:"",disabled:!o.submitButtonEnabled,onSubmit:i.submit,onCancel:s[6]||(s[6]=n=>e.showLoginDialog=!1)},null,8,["verb","disabled","onSubmit"])]),_:1},512)]),_:1},8,["modelValue"])}const ot=b(st,[["render",at],["__scopeId","data-v-11855db1"]]),nt={name:"AuthMenu",components:{AuthLoginDialog:ot,ChangePasswordDialog:Oe,DrawerItem:T},props:{showChangePassword:{type:Boolean,default:!0}},data(){return{mdiLogout:be}},computed:{...P(w,{user:e=>e.user}),logoutTitle(){return`Logout ${this.user.username}`}},methods:{...X(w,["logout"])}},rt={key:0};function it(e,s,r,t,o,i){const l=m("DrawerItem"),d=m("ChangePasswordDialog"),n=m("AuthLoginDialog");return e.user?(u(),Se("div",rt,[a(l,{"prepend-icon":o.mdiLogout,title:i.logoutTitle,onClick:Ve(e.logout,["stop"])},null,8,["prepend-icon","title","onClick"]),r.showChangePassword?(u(),c(d,{key:0,user:e.user},null,8,["user"])):A("",!0)])):(u(),c(n,{key:1}))}const lt=b(nt,[["render",it]]),dt={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function ut(e,s,r,t,o,i){return u(),c(J,V({"aria-label":"loading",class:"codexProgressCircular",indeterminate:r.indeterminate},e.$attrs),null,16,["indeterminate"])}const ct=b(dt,[["render",ut],["__scopeId","data-v-7bb4cf22"]]),mt=z({actionText:String,bgColor:String,color:String,icon:Ce,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Z(),...ee(),...Le({size:void 0}),...Pe()},"VEmptyState"),ft=N()({name:"VEmptyState",props:mt(),emits:{"click:action":e=>!0},setup(e,s){let{emit:r,slots:t}=s;const{themeClasses:o}=Ae(e),{backgroundColorClasses:i,backgroundColorStyles:l}=Be(De(e,"bgColor")),{dimensionStyles:d}=te(e),{displayClasses:n}=Me();function y(_){r("click:action",_)}return W(()=>{var L,h,p;const _=!!(t.actions||e.actionText),C=!!(t.headline||e.headline),B=!!(t.title||e.title),D=!!(t.text||e.text),M=!!(t.media||e.image||e.icon),k=e.size||(e.image?200:96);return a("div",{class:["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},o.value,i.value,n.value,e.class],style:[l.value,d.value,e.style]},[M&&a("div",{key:"media",class:"v-empty-state__media"},[t.media?a(R,{key:"media-defaults",defaults:{VImg:{src:e.image,height:k},VIcon:{size:k,icon:e.icon}}},{default:()=>[t.media()]}):a(Q,null,[e.image?a(Ee,{key:"image",src:e.image,height:k},null):e.icon?a(Y,{key:"icon",color:e.color,size:k,icon:e.icon},null):void 0])]),C&&a("div",{key:"headline",class:"v-empty-state__headline"},[((L=t.headline)==null?void 0:L.call(t))??e.headline]),B&&a("div",{key:"title",class:"v-empty-state__title"},[((h=t.title)==null?void 0:h.call(t))??e.title]),D&&a("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Ie(e.textWidth)}},[((p=t.text)==null?void 0:p.call(t))??e.text]),t.default&&a("div",{key:"content",class:"v-empty-state__content"},[t.default()]),_&&a("div",{key:"actions",class:"v-empty-state__actions"},[a(R,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",text:e.actionText}}},{default:()=>{var v;return[((v=t.actions)==null?void 0:v.call(t,{props:{onClick:y}}))??a($e,{onClick:y},null)]}})])])}),{}}}),gt={name:"EmptyState"};function ht(e,s,r,t,o,i){return u(),c(ft,{class:"empty"},xe({_:2},[Ue(e.$slots,(l,d)=>({name:d,fn:g(n=>[Fe(e.$slots,d,V({props:l},n),void 0,!0)])}))]),1024)}const pt=b(gt,[["render",ht],["__scopeId","data-v-c7e33c8c"]]),vt=z({scrollable:Boolean,...Z(),...ee(),...Re({tag:"main"})},"VMain"),wt=N()({name:"VMain",props:vt(),setup(e,s){let{slots:r}=s;const{dimensionStyles:t}=te(e),{mainStyles:o}=Ke(),{ssrBootStyles:i}=Te();return W(()=>a(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[o.value,i.value,t.value,e.style]},{default:()=>{var l,d;return[e.scrollable?a("div",{class:"v-main__scroller"},[(l=r.default)==null?void 0:l.call(r)]):(d=r.default)==null?void 0:d.call(r)]}})),{}}}),yt={name:"UnauthorizedEmptyState",components:{AdminBrowserLink:Ze,AuthMenu:lt,PlaceholderLoading:ct,EmptyState:pt},props:{admin:{type:Boolean,default:!1}},data(){return{mdiLockOutline:ze}},computed:{...H(w,["isAuthChecked","isAuthorized","isUserAdmin"]),...P(w,{showAdminBrowserLink(e){var s,r,t;return((t=(r=(s=this.$router.currentRoute)==null?void 0:s.value)==null?void 0:r.name)==null?void 0:t.startsWith("admin"))&&e.adminFlags.nonUsers},text(e){return e.adminFlags.registration?"":"Registration is disabled"}})}},_t={class:"login"};function kt(e,s,r,t,o,i){const l=m("AdminBrowserLink"),d=m("AuthMenu"),n=m("EmptyState"),y=m("PlaceholderLoading");return u(),c(wt,{id:"unauthorized"},{default:g(()=>[e.isAuthChecked?(u(),c(n,{key:0,class:"empty",headline:"Unauthorized",text:e.text,icon:o.mdiLockOutline},{default:g(()=>[Ne("div",_t,[e.showAdminBrowserLink?(u(),c(l,{key:0})):A("",!0),a(d,{"show-change-password":!1})])]),_:1},8,["text","icon"])):(u(),c(y,{key:1,id:"unauthorizedPlaceholder"}))]),_:1})}const At=b(yt,[["render",kt],["__scopeId","data-v-a56ad455"]]);export{Ze as A,pt as E,ct as P,At as U,wt as V,lt as a};
