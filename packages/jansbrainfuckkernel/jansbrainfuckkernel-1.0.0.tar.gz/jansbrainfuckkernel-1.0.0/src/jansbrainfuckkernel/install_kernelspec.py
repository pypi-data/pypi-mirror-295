#!/usr/bin/env python
# *_* coding: utf-8 *_*

"""brainfuck kernel install helper"""

import os
import shutil
from jupyter_client.kernelspec import KernelSpecManager

JSON ="""{"argv":["python","-m","jansbrainfuckkernel", "-f", "{connection_file}"],
 "display_name":"Brainfuck"
}"""

SVG = """<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   version="1.1"
   width="300"
   height="300"
   id="svg6"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <defs
     id="defs10">
    <linearGradient
       id="linearGradient896">
      <stop
         style="stop-color:#ffffff;stop-opacity:1;"
         offset="0"
         id="stop892" />
      <stop
         style="stop-color:#f08896;stop-opacity:1;"
         offset="1"
         id="stop894" />
    </linearGradient>
    <linearGradient
       id="linearGradient888">
      <stop
         style="stop-color:#faf8ea;stop-opacity:1;"
         offset="0"
         id="stop884" />
      <stop
         style="stop-color:#f08896;stop-opacity:1;"
         offset="1"
         id="stop886" />
    </linearGradient>
    <radialGradient
       xlink:href="#linearGradient888"
       id="radialGradient890"
       cx="120"
       cy="255.93105"
       fx="120"
       fy="255.93105"
       r="120"
       gradientTransform="matrix(1,0,0,2.1323877,0,-289.81315)"
       gradientUnits="userSpaceOnUse" />
    <radialGradient
       xlink:href="#linearGradient896"
       id="radialGradient898"
       cx="392"
       cy="256"
       fx="392"
       fy="256"
       r="120"
       gradientTransform="matrix(1,0,0,2.1333334,0,-290.13336)"
       gradientUnits="userSpaceOnUse" />
  </defs>
  <g
     id="g902"
     transform="scale(0.5859375)">
    <path
       d="m 225.21599,45.721027 c 0.28169,29.004368 -17.02484,11.21764 -16.78856,27.508549 0.10799,7.445458 9.29341,14.08638 14.26422,23.703385 5.9055,11.425319 7.61963,26.080079 5.71971,37.667379 -1.23569,7.53627 -3.74,15.12334 -7.09569,22.05609 -9.11599,18.83361 -23.6427,29.155 -46.81883,27.3174 -22.02446,-1.74628 -44.21022,-1.56186 -66.30199,-2.65221 -7.96328,-0.39302 -31.364161,-8.23712 -32.064784,-3.40592 -1.038391,7.15995 3.036659,12.19479 9.307838,14.12821 11.004952,3.39281 22.341176,6.71541 33.769276,7.75359 21.99854,1.99844 44.25281,1.53612 66.21221,3.77911 11.6216,1.18705 23.56347,4.50022 34.0883,9.36348 17.35814,8.02082 21.88882,22.06473 20.14459,43.86307 -1.6797,20.99182 -11.96197,35.38147 -30.8842,45.06119 -4.22781,2.16272 -8.25068,4.74414 -12.1573,7.4137 -6.6223,4.52526 -6.14418,9.8085 1.09329,13.10769 4.21312,1.92063 8.55524,3.58194 12.78597,5.469 19.60299,8.74325 32.48582,33.68188 27.56781,53.28769 -2.45923,9.80383 -15.01984,14.07818 -23.21642,7.98107 -12.5345,-9.32366 -26.0852,-16.58493 -42.26672,-18.16427 -13.22551,-1.29093 -24.47715,2.64029 -33.04308,12.41614 -1.68669,1.92489 -3.17749,5.72271 -2.28081,7.54626 1.04691,2.12924 4.68065,3.92117 7.4245,4.29205 5.26601,0.71183 10.70087,0.49027 16.05727,0.35425 33.99371,-0.86273 55.85033,14.00107 67.39111,44.68018 13.58611,36.11618 -15.68107,64.48913 -45.83386,70.40545 -20.86484,4.09394 -38.68094,-3.04769 -55.02237,-14.58984 -15.3461,-10.83914 -27.918234,-24.25635 -39.653777,-39.6134 11.236016,0.49121 21.642667,0.41638 31.909197,1.52459 13.8807,1.49845 27.66878,3.81931 41.46008,5.99799 2.64873,0.4184 5.23461,1.61057 7.66654,2.78976 6.80935,3.30161 6.88186,7.24219 0.93957,11.94568 -3.42502,1.18299 -7.90771,4.09143 -5.05296,7.07178 3.03117,2.89056 5.31764,3.1525 8.21196,3.93491 2.41191,0.65207 5.22386,0.41595 7.77571,0.0485 7.42604,-1.06928 14.51213,-3.2038 17.61374,-10.54691 3.13374,-7.41909 -0.73484,-13.52957 -5.33673,-19.15686 -12.26297,-14.9956 -29.7388,-18.84836 -48.25966,-20.21145 -26.14927,-1.92453 -52.328997,-3.50034 -78.45238,-5.69522 -5.902233,-0.49598 -11.842777,-2.417 -17.389663,-4.5665 -14.149861,-5.48328 -19.329627,-17.8075 -13.947594,-31.35932 8.792976,2.38169 17.415603,5.53208 26.340874,6.96775 19.503471,3.13736 37.508514,-0.73487 52.772793,-13.32062 7.60085,-6.26706 11.74488,-14.11621 10.06597,-24.06912 -0.91697,-5.43586 -4.2601,-7.11414 -8.92878,-3.93256 -4.68335,3.1915 -9.13504,6.75067 -13.3588,10.48804 -11.705015,10.35711 -25.321165,13.20505 -40.529402,9.62494 -16.200355,-3.81363 -30.772592,-10.33506 -39.219108,-25.05054 -9.228486,-16.07791 -3.347304,-38.09747 13.799549,-52.88419 3.525406,-3.04013 7.510044,-5.59478 10.340881,-7.6795 6.726551,4.87591 12.521858,9.3977 18.675381,13.41992 3.83741,2.50827 7.966682,2.42984 10.585159,-1.96832 2.643479,-4.44022 1.999924,-8.41504 -2.255195,-11.91123 -3.927643,-3.2272 -8.19188,-6.35742 -11.165322,-10.3132 -7.958877,-10.58801 -6.084572,-24.71704 3.942528,-33.55505 1.089798,-0.96053 2.815666,-1.77735 4.252602,-1.78642 16.894569,-0.10715 33.798257,-0.32695 50.681597,0.11227 6.35645,0.16537 12.94299,1.19275 18.94276,3.16389 14.69225,4.82688 22.93263,17.83774 20.68236,31.20316 -2.0634,12.25543 -14.10448,21.44037 -29.2563,22.24225 -2.74185,0.14508 -5.55414,-0.27997 -8.22948,0.15018 -6.49081,0.20443 -5.24521,6.77536 -4.09958,8.1033 10.56352,12.24429 27.1957,15.30716 41.63333,7.93185 34.0736,-17.40616 36.68885,-61.70389 4.87651,-82.2669 -11.79445,-7.62377 -24.93834,-11.8474 -38.99005,-12.525 -17.13838,-0.82638 -34.359357,-0.13081 -51.491544,-1.02257 -16.584072,-0.86325 -31.419762,-6.53778 -42.588223,-18.84518 -8.656978,-9.5398 -10.496505,-20.51064 -5.904249,-32.37567 8.824053,-22.79875 31.784922,-34.5977 59.108078,-29.58299 18.451758,3.3865 36.554288,8.63729 55.077138,11.49298 11.62082,1.79158 23.88838,1.94282 35.58562,0.60212 18.84967,-2.1604 30.078,-13.54477 34.13487,-31.16963 4.09012,-17.76923 -0.65431,-32.797392 -16.03946,-44.089903 -12.6835,-9.309533 -27.53328,-13.40371 -43.11111,-15.43351 -16.95712,-2.209549 -33.72837,-1.481392 -50.15449,3.438103 -9.342688,3.374763 -10.326239,9.234947 -9.777877,12.151664 0.364586,1.93911 5.203072,4.335762 8.097535,4.408669 13.715922,0.345382 27.488792,-0.688515 41.170872,0.01617 14.53492,0.748619 29.1644,2.289574 40.5981,12.724817 8.32332,7.59653 11.70639,17.23271 8.47098,25.03063 -3.52692,8.50046 -12.70493,13.96497 -24.45665,13.33638 -8.45686,-0.45236 -16.91061,-1.86842 -25.23546,-3.47145 -17.75954,-3.41981 -35.36912,-7.57522 -53.174651,-10.7393 -7.602699,-1.35106 -15.5419,-0.9762 -23.555629,-1.39756 C 55.006746,105.40317 50.253412,93.34719 71.195554,74.718543 90.56291,57.490669 113.50241,45.464931 141.02862,46.116489 c 9.465,0.224022 18.80431,4.184593 28.2607,6.180637 7.94829,1.677754 15.96635,3.077111 23.99504,4.363682 1.46344,0.23452 8.22249,1.606258 6.40035,-1.452881 -2.88666,-4.214634 -4.73757,-8.375027 -7.87818,-11.252266 -14.25667,-13.060907 -31.87442,-18.52964 -51.27508,-19.471678 -2.60703,-0.126564 -5.2246,-0.05073 -7.83695,-0.0896 -0.2465,-0.0037 -0.49058,-0.158327 -1.45259,-0.490067 7.04335,-10.623999 15.75925,-19.1681382 28.63814,-22.1676633 17.11552,-3.9861984 33.44819,-0.8194992 48.08177,8.3374363 14.75519,9.23306 17.07163,16.851849 17.25417,35.646935 z M 31.12018,235.5106 c -3.95525,-2.20123 -6.43306,-1.93133 -9.691059,0.66076 -17.0867977,13.59419 -22.1056972,31.71731 -21.3580521,51.8934 0.2644747,7.13724 2.5242033,13.71786 8.976634,18.02704 5.5253351,-4.49326 10.3967151,-9.18247 16.0148351,-12.82056 5.722498,-3.70581 12.179806,-6.37747 18.557686,-9.62527 -2.656677,-13.91385 1.548477,-26.5994 9.418675,-38.20511 -7.591198,-3.36469 -15.07581,-6.12198 -21.918719,-9.93026 z"
       id="path2"
       style="fill:url(#radialGradient890);fill-opacity:1" />
    <path
       d="m 288.18845,47 c 0.46173,-17.296257 2.25338,-25.108459 8.92904,-31.853014 21.97864,-22.2054119 60.76596,-19.6059113 78.90134,5.235126 0.75568,1.035061 1.39938,2.147929 2.36798,3.646428 -26.85666,0.963617 -51.44217,5.59691 -66.30249,29.509542 0.23355,0.9244 0.46719,1.848805 0.70074,2.773205 5.19251,0 10.48829,0.623184 15.54862,-0.174557 5.10254,-0.804424 10.13162,-2.658516 14.91443,-4.679733 19.20428,-8.115818 38.33404,-7.302197 57.17553,0.629436 14.99021,6.310364 29.2631,13.956658 40.44361,26.005898 10.03546,10.815231 13.52081,22.996539 8.00796,37.064759 -1.38031,3.5224 -2.37664,7.18798 -3.56009,10.8203 -30.60839,-2.17567 -58.50079,10.11679 -87.8226,13.9286 -6.58685,0.85631 -13.49008,1.2954 -20.01001,0.35635 -14.46072,-2.08274 -21.44018,-16.49426 -14.46289,-29.03108 7.06238,-12.689893 19.02545,-18.626341 33.02817,-19.649053 17.37436,-1.26899 34.85779,-1.177841 52.29749,-1.492478 4.17947,-0.07542 8.49935,0.416146 9.64733,-4.753715 1.12018,-5.044884 -0.98565,-8.948517 -6.07131,-10.551132 -31.77164,-10.012055 -62.72101,-8.561417 -91.70151,8.363723 -17.73682,10.358597 -23.91056,27.580075 -18.9188,47.355915 4.77732,18.92628 17.42222,29.12278 38.59763,31.11366 22.45868,2.11145 43.75177,-3.77539 65.07681,-9.19977 14.00577,-3.56265 27.9704,-6.63656 42.53165,-3.54248 22.11395,4.69891 39.07275,27.11034 35.24261,46.86865 -2.21499,11.42653 -9.87753,19.03902 -19.64224,24.75243 -11.84616,6.93132 -24.81415,9.42442 -38.62475,9.1822 -19.7323,-0.34606 -39.59238,-1.69682 -58.94406,3.82662 -12.13288,3.46304 -22.86875,9.39207 -31.47532,18.41534 -18.12417,19.00174 -13.53018,51.54651 9.52695,69.25772 15.03388,11.54819 32.37286,10.66413 45.71652,-2.68518 1.63312,-1.63385 2.34397,-4.82327 2.14127,-7.18213 -0.0782,-0.90902 -3.84305,-1.8793 -6.021,-2.17843 -4.50668,-0.61899 -9.19226,-0.30087 -13.59689,-1.26731 -12.97537,-2.84689 -20.89838,-11.54007 -22.33594,-23.78445 -1.2135,-10.33594 5.99155,-21.78204 17.14081,-27.21924 10.80536,-5.26947 22.42542,-4.65683 34.00143,-4.56917 11.96158,0.0906 23.92713,-0.14556 35.88508,0.0713 2.26242,0.041 5.07058,0.95616 6.6524,2.44993 10.88712,10.28029 10.4574,26.82979 -0.82037,37.62297 -2.19495,2.10062 -4.81885,3.77121 -7.2136,5.67759 -4.1289,3.28683 -4.45816,7.41961 -2.04803,11.63144 2.47086,4.31796 6.51492,4.63058 10.35443,2.0534 6.02029,-4.04098 11.724,-8.53073 18.03787,-13.181 15.00556,6.26416 28.45661,26.98956 28.05512,44.44037 -0.39377,17.11719 -12.15586,30.69528 -33.20828,38.32208 -19.30875,6.99512 -36.90592,5.50293 -51.99573,-9.61059 -3.06952,-3.07434 -6.711,-5.68711 -10.3812,-8.08716 -4.09707,-2.67926 -7.13092,-1.6658 -8.22131,3.3381 -2.48145,11.38691 2.81125,19.83002 11.47229,26.31705 21.36926,16.00534 44.67612,15.81464 68.77225,6.81323 2.1174,-0.79104 4.17526,-1.73388 6.23764,-2.59652 6.06442,10.83917 1.90045,26.03527 -10.22367,30.38183 -12.30319,4.41074 -25.56747,7.08335 -38.63882,8.46436 -23.36826,2.46881 -46.94733,2.98501 -70.36005,5.12964 -12.90976,1.18252 -24.33999,6.60659 -33.02533,16.43096 -5.66733,6.41047 -10.79861,13.29151 -6.57641,22.34699 3.20083,6.86487 14.23327,11.07864 24.39322,9.38214 2.84231,-0.47464 5.3995,-2.57373 8.08752,-3.92761 -1.65662,-2.3891 -2.86557,-5.30991 -5.05615,-7.06485 -5.92984,-4.75058 -6.02591,-9.70844 1.31308,-11.94953 11.20428,-3.42135 22.79828,-6.13299 34.43158,-7.58459 14.44748,-1.80267 29.10364,-2.01398 45.70065,-3.03799 -8.47629,9.40924 -15.40729,17.88598 -23.17545,25.556 -14.1556,13.97659 -29.87469,25.62509 -50.42803,29.43066 -35.99854,6.66525 -72.60495,-25.32413 -68.03833,-59.6134 4.49285,-33.73502 32.32717,-56.96009 67.04254,-56.02643 5.7803,0.15542 11.63025,0.44128 17.3298,-0.25427 2.7713,-0.3382 6.32224,-2.25477 7.54443,-4.48639 0.90735,-1.65674 -0.66714,-5.56131 -2.33902,-7.45316 -11.11251,-12.57455 -25.71286,-15.7323 -41.00174,-10.51562 -11.59091,3.95486 -22.4223,10.44564 -32.94424,16.82421 -7.68689,4.65998 -19.61066,1.3396 -22.14203,-7.39044 -5.34485,-18.43249 6.15906,-43.73391 24.29035,-53.05948 4.74768,-2.44189 9.789,-4.3352 14.65127,-6.5718 7.20065,-3.31229 7.77649,-8.91928 1.19727,-13.40058 -5.17832,-3.52707 -10.42582,-7.05844 -16.01038,-9.90024 -28.31955,-14.41082 -29.20053,-48.5137 -23.34436,-68.70126 3.01724,-10.4012 11.96765,-15.93675 21.44446,-20.12691 18.49786,-8.17878 38.43027,-7.75877 58.15512,-8.97198 19.53152,-1.20133 39.04007,-3.11159 58.45602,-5.50394 5.0358,-0.6205 10.05039,-3.69822 14.37403,-6.63038 2.43902,-1.65407 4.45025,-5.19692 4.80203,-8.10233 0.30762,-2.5406 -1.27545,-6.50273 -3.33841,-7.72507 -1.5983,-0.94702 -5.21487,1.40641 -7.95602,2.22333 -6.42395,1.91448 -12.77543,5.01679 -19.30842,5.44891 -20.52081,1.35738 -41.12023,1.53116 -61.67373,2.48194 -31.63312,1.46336 -49.68537,-12.3889 -55.69019,-44.63938 -1.91317,-10.27511 -1.65289,-21.12123 -0.95981,-31.6164 0.612,-9.268148 5.71967,-16.795332 14.21399,-21.73979 2.53504,-1.47557 5.1781,-2.968528 7.23246,-4.977989 1.845,-1.80468 6.11645,-7.87297 -1.97675,-11.471786 0,0 -14.94079,-4.916298 -14.47906,-22.212555 z m 215.1734,258.31714 c 17.76071,-12.99558 6.263,-61.26572 -17.4943,-71.67664 -8.96835,3.99163 -17.53073,7.80254 -26.52893,11.80745 8.21469,11.62047 11.68705,24.61064 9.58216,36.83498 12.08969,8.08557 23.13318,15.47146 34.44107,23.03421 z"
       id="path4"
       style="fill:url(#radialGradient898);fill-opacity:1" />
  </g>
</svg>
"""

def install_kernelspec():
    """create dir + files and install kernelspec"""
    kerneldir = "/tmp/jansbrainfuckinstall/"
    print('Creating tmp files...', end="")
    os.mkdir(kerneldir)

    with open(kerneldir + "kernel.json", "w", encoding="UTF-8") as file:
        file.write(JSON)

    with open(kerneldir + "logo-svg.svg", "w", encoding="UTF-8") as file:
        file.write(SVG)

    print(' Done!')
    print('Installing Jupyter kernel...', end="")

    ksm = KernelSpecManager()
    ksm.install_kernel_spec(kerneldir, 'jansbrainfuckkernel', user=os.getenv('USER'))

    print(' Done!')
    print('Cleaning up tmp files...', end="")

    shutil.rmtree(kerneldir)

    print(' Done!')
    print('For uninstall use: jupyter kernelspec uninstall jansbrainfuckkernel')
