"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([[1546],{31546:function(e,n,t){t.r(n),t.d(n,{HaSTTSelector:function(){return x}});var i,a,r,s,d,l,u=t(6238),o=t(36683),h=t(89231),v=t(29864),c=t(83647),f=t(8364),g=(t(77052),t(98597)),k=t(196),p=t(94881),y=t(1781),_=t(66123),b=t(27526),A=(t(4187),t(53501),t(36724),t(848),t(68113),t(84368),t(34517),t(66274),t(85767),t(98168),t(33167)),M=t(24517),m=t(91330),Z=t(11355),q=(t(9484),t(96334),t(19263)),w="__NONE_OPTION__",x=((0,f.A)([(0,k.EM)("ha-stt-picker")],(function(e,n){var t,d=function(n){function t(){var n;(0,h.A)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=(0,v.A)(this,t,[].concat(a)),e(n),n}return(0,c.A)(t,n),(0,o.A)(t)}(n);return{F:d,d:[{kind:"field",decorators:[(0,k.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,k.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,k.MZ)()],key:"language",value:void 0},{kind:"field",decorators:[(0,k.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,k.MZ)({type:Boolean,reflect:!0})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,k.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,k.wk)()],key:"_engines",value:void 0},{kind:"method",key:"render",value:function(){var e=this;if(!this._engines)return g.s6;var n=this.value;if(!n&&this.required){for(var t=0,s=Object.values(this.hass.entities);t<s.length;t++){var d=s[t];if("cloud"===d.platform&&"stt"===(0,q.m)(d.entity_id)){n=d.entity_id;break}}if(!n){var l,o=(0,_.A)(this._engines);try{for(o.s();!(l=o.n()).done;){var h,v=l.value;if(0!==(null==v||null===(h=v.supported_languages)||void 0===h?void 0:h.length)){n=v.engine_id;break}}}catch(c){o.e(c)}finally{o.f()}}}return n||(n=w),(0,g.qy)(i||(i=(0,u.A)(["\n      <ha-select\n        .label=","\n        .value=","\n        .required=","\n        .disabled=","\n        @selected=","\n        @closed=","\n        fixedMenuPosition\n        naturalMenuWidth\n      >\n        ","\n        ","\n      </ha-select>\n    "])),this.label||this.hass.localize("ui.components.stt-picker.stt"),n,this.required,this.disabled,this._changed,M.d,this.required?g.s6:(0,g.qy)(a||(a=(0,u.A)(["<ha-list-item .value=",">\n              ","\n            </ha-list-item>"])),w,this.hass.localize("ui.components.stt-picker.none")),this._engines.map((function(t){var i,a;if(t.deprecated&&t.engine_id!==n)return g.s6;if(t.engine_id.includes(".")){var s=e.hass.states[t.engine_id];a=s?(0,m.u)(s):t.engine_id}else a=t.name||t.engine_id;return(0,g.qy)(r||(r=(0,u.A)(["<ha-list-item\n            .value=","\n            .disabled=","\n          >\n            ","\n          </ha-list-item>"])),t.engine_id,0===(null===(i=t.supported_languages)||void 0===i?void 0:i.length),a)})))}},{kind:"method",key:"willUpdate",value:function(e){(0,b.A)(d,"willUpdate",this,3)([e]),this.hasUpdated?e.has("language")&&this._debouncedUpdateEngines():this._updateEngines()}},{kind:"field",key:"_debouncedUpdateEngines",value:function(){var e=this;return(0,Z.s)((function(){return e._updateEngines()}),500)}},{kind:"method",key:"_updateEngines",value:(t=(0,y.A)((0,p.A)().mark((function e(){var n,t,i=this;return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=this.hass,r=this.language,s=this.hass.config.country||void 0,a.callWS({type:"stt/engine/list",language:r,country:s});case 2:if(this._engines=e.sent.providers,this.value){e.next=5;break}return e.abrupt("return");case 5:t=this._engines.find((function(e){return e.engine_id===i.value})),(0,A.r)(this,"supported-languages-changed",{value:null==t?void 0:t.supported_languages}),t&&0!==(null===(n=t.supported_languages)||void 0===n?void 0:n.length)||(this.value=void 0,(0,A.r)(this,"value-changed",{value:this.value}));case 8:case"end":return e.stop()}var a,r,s}),e,this)}))),function(){return t.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,g.AH)(s||(s=(0,u.A)(["\n      ha-select {\n        width: 100%;\n      }\n    "])))}},{kind:"method",key:"_changed",value:function(e){var n,t=this,i=e.target;!this.hass||""===i.value||i.value===this.value||void 0===this.value&&i.value===w||(this.value=i.value===w?void 0:i.value,(0,A.r)(this,"value-changed",{value:this.value}),(0,A.r)(this,"supported-languages-changed",{value:null===(n=this._engines.find((function(e){return e.engine_id===t.value})))||void 0===n?void 0:n.supported_languages}))}}]}}),g.WF),(0,f.A)([(0,k.EM)("ha-selector-stt")],(function(e,n){var t=function(n){function t(){var n;(0,h.A)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=(0,v.A)(this,t,[].concat(a)),e(n),n}return(0,c.A)(t,n),(0,o.A)(t)}(n);return{F:t,d:[{kind:"field",decorators:[(0,k.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,k.MZ)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,k.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,k.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,k.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,k.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,k.MZ)({type:Boolean})],key:"required",value:function(){return!0}},{kind:"field",decorators:[(0,k.MZ)({attribute:!1})],key:"context",value:void 0},{kind:"method",key:"render",value:function(){var e,n;return(0,g.qy)(d||(d=(0,u.A)(["<ha-stt-picker\n      .hass=","\n      .value=","\n      .label=","\n      .helper=","\n      .language=","\n      .disabled=","\n      .required=","\n    ></ha-stt-picker>"])),this.hass,this.value,this.label,this.helper,(null===(e=this.selector.stt)||void 0===e?void 0:e.language)||(null===(n=this.context)||void 0===n?void 0:n.language),this.disabled,this.required)}},{kind:"field",static:!0,key:"styles",value:function(){return(0,g.AH)(l||(l=(0,u.A)(["\n    ha-stt-picker {\n      width: 100%;\n    }\n  "])))}}]}}),g.WF))}}]);