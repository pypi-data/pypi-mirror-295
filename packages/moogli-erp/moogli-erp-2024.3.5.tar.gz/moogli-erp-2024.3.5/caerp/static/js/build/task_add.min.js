(()=>{"use strict";var e,t,n,r={2286:(e,t,n)=>{var r=n(9722),i=n(6252),a=n(2262),o=n(3505),u=n(885),l=n(5861),s=n(4687),c=n.n(s),d=n(3577),p=n(2954),f=n(1097),m=n(2067),v=n(7476),b=n(9039),y=n(1582),g=n(9508),_=(0,b.Z)("project"),h=(0,v.Q_)("project",{state:function(){return{loading:!0,error:!1,collection:[],projectId:null,item:{}}},actions:{setCurrentProjectId:function(e){this.projectId=e},loadProject:function(){var e=arguments,t=this;return(0,l.Z)(c().mark((function n(){var r;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=(r=e.length>0&&void 0!==e[0]?e[0]:null)||t.projectId){n.next=4;break}throw Error("no Id provided");case 4:return t.loading=!0,n.abrupt("return",y.Z.projects.load(r).then((function(e){return t.loading=!1,t.error=!1,t.item=e,e})).catch(t.handleError));case 6:case"end":return n.stop()}}),n)})))()},loadProjects:function(e,t){var n=this;return(0,l.Z)(c().mark((function r(){return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.loading=!0,r.abrupt("return",y.Z.projects.getProjects(e,t).then((function(e){var r;return t.pageOptions&&2==e.length?(n.collectionMetaData=e[0],r=e[1]):r=e,n.loading=!1,n.error="",n.collection=r,r})).catch(n.handleError));case 2:case"end":return r.stop()}}),r)})))()},handleError:function(e){var t=this;return(0,l.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!1,t.error=e,n.abrupt("return",Promise.reject(e));case 3:case"end":return n.stop()}}),n)})))()},saveProject:function(e){var t=this;return(0,l.Z)(c().mark((function n(){var r;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=t.projectId||e.id)){n.next=5;break}return n.abrupt("return",y.Z.projects.update(e,r));case 5:return n.abrupt("return",t.createProject(e));case 6:case"end":return n.stop()}}),n)})))()},createProject:function(e){return(0,l.Z)(c().mark((function t(){var n,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=2;break}throw Error("Project already exists (has an id)");case 2:if(n=_(),r=n.getOptions("company_id")){t.next=6;break}throw Error("Missing company_id");case 6:return y.Z.projects.setCompanyId(r),t.abrupt("return",y.Z.projects.create(e));case 8:case"end":return t.stop()}}),t)})))()},updateProject:function(e,t){return(0,l.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}throw Error("no Id provided");case 2:return n.abrupt("return",y.Z.projects.update(e,t));case 3:case"end":return n.stop()}}),n)})))()}},getters:(0,g.Z)("project")}),j=(0,b.Z)("task"),S=(0,v.Q_)("task",{state:function(){return{loading:!0,error:!1,item:{}}},actions:{setAddUrl:function(e){y.Z.tasks.setCollectionUrl(e)},createTask:function(e){return(0,l.Z)(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=2;break}throw Error("Task already exists (has an id)");case 2:return t.abrupt("return",y.Z.tasks.create(e));case 3:case"end":return t.stop()}}),t)})))()}}}),k=n(6286),w=n(4925),U=n(4039),x=n(6625),Z=n(5735),C=n(5937),O=n(9304),P=n(4982),I=n(8809),K={class:"radio"},q={id:"tagId"},D=["name","value","id","checked","disabled"],A=["innerHTML"];const H={__name:"RadioChoice",props:{name:{type:String,required:!0},label:{type:String,default:""},value:{type:String||Number||Date,default:""},description:{type:String,default:""},required:{type:Boolean,default:!1},css_class:{type:String,default:""},editable:{type:Boolean,default:!0},options:{type:Array,default:function(){return[]}},idKey:{type:String,default:"id"},labelKey:{type:String,default:"label"},inline:{type:Boolean,default:!1}},emits:["changeValue","blurValue"],setup:function(e,t){var n=t.emit,o=e,u=n,l=(0,r.EL)(o.name),s=(0,a.Vh)(o,"name"),c=(0,p.U$)(s),f=c.value,m=c.errorMessage,v=(c.handleBlur,c.handleChange),b=c.meta;function y(e){v(e),u("changeValue",e.target.value)}return function(t,n){return(0,i.wg)(),(0,i.iD)("div",{class:(0,d.C_)(["form-group Integer",{"has-error":(0,a.SU)(b).touched&&!!(0,a.SU)(m)}])},[(0,i.Wm)(I.Z,{tagId:(0,a.SU)(l),required:e.required,label:e.label},null,8,["tagId","required","label"]),(0,i._)("div",K,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.options,(function(t,n){return(0,i.wg)(),(0,i.iD)("div",{class:(0,d.C_)({radio_inline:!!e.inline}),key:e.name+"-"+n},[(0,i._)("label",q,[(0,i._)("input",{type:"radio",name:e.name,value:t[e.idKey],id:(0,a.SU)(l)+"-"+n,checked:t[e.idKey]==(0,a.SU)(f),autofocus:"false",onInput:y,disabled:!e.editable},null,40,D),(0,i._)("span",null,(0,d.zw)(t[e.labelKey]),1)])],2)})),128))]),e.description?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"help-block",innerHTML:e.description},null,8,A)):(0,i.kq)("v-if",!0),(0,a.SU)(b).touched&&(0,a.SU)(m)?((0,i.wg)(),(0,i.j4)(P.Z,{key:1,message:(0,a.SU)(m)},null,8,["message"])):(0,i.kq)("v-if",!0)],2)}}};var V={class:"form-group"},F=["for"],T=["id","checked","value","name","disabled"],B=["innerHTML"];const E={__name:"Checkbox",props:{modelValue:{type:null},label:String,description:{type:String,default:""},name:String,value:{type:[String,Number]},divCss:{type:String,default:"toggle"},editable:{type:Boolean,default:!0}},setup:function(e){var t=e,n=(0,r.EL)(t.name),o=(0,a.BK)(t).name,u=(0,p.U$)(o,void 0,{type:"checkbox",checkedValue:t.value}),l=u.checked,s=u.handleChange;return function(t,r){return(0,i.wg)(),(0,i.iD)("div",V,[(0,i._)("div",{class:(0,d.C_)(e.divCss)},[(0,i._)("label",{for:(0,a.SU)(n)},[(0,i._)("input",{type:"checkbox",id:(0,a.SU)(n),checked:(0,a.SU)(l),onChange:r[0]||(r[0]=function(t){return(0,a.SU)(s)(e.value)}),value:e.value,name:(0,a.SU)(o),disabled:!e.editable},null,40,T),(0,i._)("span",null,(0,d.zw)(e.label),1)],8,F)],2),e.description?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"help-block",innerHTML:e.description},null,8,B)):(0,i.kq)("v-if",!0)])}}};var M={class:"form-group String"},G=["innerHTML"];const N={__name:"CheckboxList",props:{name:String,label:String,modelValue:{type:null},options:{type:Array},description:{type:String},idKey:{type:String,default:"id"},labelKey:{type:String,default:"label"},editable:{type:Boolean,default:!0},required:{type:Boolean,default:!1}},setup:function(e){var t=e,n=(0,r.EL)(t.name);return function(t,r){return(0,i.wg)(),(0,i.iD)("div",M,[(0,i.Wm)(I.Z,{label:e.label,required:e.required,tagId:(0,a.SU)(n)},null,8,["label","required","tagId"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.options,(function(t,n){return(0,i.wg)(),(0,i.j4)(E,{key:e.name+"-"+n,label:t[e.labelKey],name:e.name,value:t[e.idKey],editable:e.editable,divCss:"checkbox"},null,8,["label","name","value","editable"])})),128)),e.description?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"help-block",innerHTML:e.description},null,8,G)):(0,i.kq)("v-if",!0)])}}};var L={class:"deformFormFieldset"},W={class:"row form-row"},Y={class:"col-md-12"},$={class:"row form-row"},J={class:"col-md-12"},z={class:"row form-row"},Q={class:"col-md-12"},R={class:"row form-row"},X={class:"col-md-12"},ee=["disabled"];const te={__name:"ProjectForm",props:{project:{type:Object},layout:{type:Object}},emits:["saved","cancel","error"],setup:function(e,t){var n=t.emit,r=e,o=n,u=_(),l=u.getOptions("project_types"),s=(0,a.iH)(u.getOptions("invoicing_modes")),c=(0,a.iH)(u.getOptions("business_types")),m=u.getSchema("default"),v=(0,f.KJ)(m),b=(0,f.JP)(v),y=(0,p.cI)({validationSchema:v,initialValues:b}),g=y.values,j=y.handleSubmit,S=y.setFieldValue,k=y.isSubmitting,U=h(),x=j((0,f.Hc)(o,U.saveProject),(0,f.AU)(o)),Z=function(){return o("cancel")};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e&&(e=g.project_type_id),e){console.log("Changement du type de dossier");var t=l.find((function(t){return t.id==parseInt(e)}));"default"!=t.name?(S("mode","ht"),s.value=[{name:"ht"}]):s.value=u.getOptions("invoicing_modes"),c.value=u.getOptions("business_types").filter((function(e){return t.other_business_type_ids.includes(e.id)})),S("business_types",[])}}C();var P=function(e){return(0,f.k$)(v,e)};(0,i.YP)((function(){return g.project_type_id}),C);var I=r.layout;return function(t,n){return(0,i.wg)(),(0,i.j4)((0,a.SU)(I),{onSubmitForm:(0,a.SU)(x),onClose:Z},{title:(0,i.w5)((function(){return[e.project.id?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)("Modifier un dossier")],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)("Ajouter un dossier")],64))]})),fields:(0,i.w5)((function(){return[(0,i._)("fieldset",L,[(0,i._)("div",W,[(0,i._)("div",Y,[(0,i.Wm)(w.Z,(0,d.vs)((0,i.F4)(P("name"))),null,16)])]),(0,i._)("div",$,[(0,i._)("div",J,[(0,a.SU)(l).length>1?((0,i.wg)(),(0,i.j4)(H,(0,i.dG)({key:0},P("project_type_id"),{options:(0,a.SU)(l)}),null,16,["options"])):(0,i.kq)("v-if",!0),(0,i.Wm)(w.Z,(0,i.dG)({type:"hidden"},P("project_type_id")),null,16)])]),(0,i._)("div",z,[(0,i._)("div",Q,[s.value.length>1?((0,i.wg)(),(0,i.j4)(H,(0,i.dG)({key:0},P("mode"),{options:s.value,inline:"",idKey:"value"}),null,16,["options"])):(0,i.kq)("v-if",!0),(0,i.Wm)(w.Z,(0,i.dG)(P("mode"),{type:"hidden"}),null,16)])]),(0,i._)("div",R,[(0,i._)("div",X,[c.value.length>0?((0,i.wg)(),(0,i.j4)(N,(0,i.dG)({key:0,options:c.value},P("business_types"),{name:"business_types"}),null,16,["options"])):((0,i.wg)(),(0,i.j4)(w.Z,(0,i.dG)({key:1},P("business_types"),{type:"hidden"}),null,16))])])])]})),buttons:(0,i.w5)((function(){return[(0,i._)("button",{id:"deformsubmit",name:"submit",type:"submit",class:"btn btn-primary",value:"submit",disabled:(0,a.SU)(k)}," Valider ",8,ee),(0,i._)("button",{id:"deformcancel",name:"cancel",type:"button",class:"btn btn-default",onClick:Z}," Annuler "),(0,a.SU)(!1)?((0,i.wg)(),(0,i.j4)(O.Z,{key:0,debug:(0,a.SU)(g)},null,8,["debug"])):(0,i.kq)("v-if",!0)]})),_:1},8,["onSubmitForm"])}}};var ne={key:0};const re={__name:"ProjectFormComponent",props:{edit:{type:Boolean,default:!1},projectId:{type:Number||null,default:null},url:{type:String,required:!0},formConfigUrl:{type:String,required:!0},layout:{type:Object,default:C.Z}},emits:["saved","cancel"],setup:function(e,t){return(0,l.Z)(c().mark((function n(){var r,o,s,d,p,f,m,b,y,g,j,S,k,w,U,x;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x=function(){console.log("Cancel Project add/edit"),m("cancel")},U=function(e){m("saved",e)},s=t.emit,m=s,b=!!(f=e).projectId,y=(0,a.iH)(!0),(g=_()).setUrl(f.formConfigUrl),j=h(),S=function(){var e=(0,l.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[g.loadConfig()],b&&(j.setCurrentProjectId(f.projectId),t.push(j.loadProject())),Promise.all(t).then((function(){return y.value=!1}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=(0,v.Jk)(j),w=k.item,r=(0,i.mv)((function(){return S()})),o=(0,u.Z)(r,2),d=o[0],p=o[1],n.next=16,d;case 16:return p(),n.abrupt("return",(function(t,n){return y.value?((0,i.wg)(),(0,i.iD)("div",ne,"Chargement des informations")):((0,i.wg)(),(0,i.j4)(te,{key:1,project:(0,a.SU)(w),layout:e.layout,onSaved:U,onCancel:x},null,8,["project","layout"]))}));case 18:case"end":return n.stop()}}),n)})))()}};var ie={class:"deformFormFieldset"},ae={class:"layout flex end_button"},oe={class:"col-content"},ue={class:"col-button"},le=["title","aria-label"],se={class:"form-group layout flex end_button"},ce={class:"col-content"},de={class:"col-button"},pe=["title","aria-label"],fe={class:"btn-group"},me=["disabled"];const ve={__name:"TaskAddForm",props:{initialData:Object},emits:["saved","cancel","error"],setup:function(e,t){var n=t.emit,r=e,o=n,u=!!r.initialData.project_id,s=j(),v=s.getOptions("customers_url"),b=s.getOptions("customers_config_url"),y=s.getOptions("projects_url"),g=s.getOptions("projects_config_url"),_=(0,m.U)(),C=h(),O=S();function P(){return I.apply(this,arguments)}function I(){return(I=(0,l.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.loadProjects(r.initialData.company_id,{fields:["id","name"],related:["customer_ids","phases","business_types"]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return q.apply(this,arguments)}function q(){return(q=(0,l.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.loadCustomers(r.initialData.company_id,{fields:["id","label"],related:["project_ids"]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=(0,a.iH)([]),A=(0,a.iH)([]);(0,i.bv)((0,l.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:return D.value=e.sent,e.next=5,P();case 5:A.value=e.sent;case 6:case"end":return e.stop()}}),e)}))));var H=s.getSchema("default"),V=(0,f.KJ)(H),F=(0,f.JP)(V),T=(0,p.cI)({validationSchema:V,initialValues:F}),B=T.values,E=T.handleSubmit,M=T.setFieldValue,G=T.isSubmitting,N=function(){console.log("computing customers");var e,t=(0,a.IU)(D.value);if(u){var n=parseInt(B.project_id);if(n){var r=t.filter((function(e){return e.project_ids.includes(n)}));if(0===r.length)e=t;else{var i=t.filter((function(e){return!e.project_ids.includes(n)}));e=[{text:"Clients du projet",children:r}],i.length>0&&e.push({text:"Autres clients",children:i})}}else e=[]}else e=t;return e},L=(0,i.Fl)((function(){return function(){console.log("computing phases");var e=[];if(B.project_id){var t=C.getByid(B.project_id);t&&(e=t.phases)}return e}()})),W=(0,i.Fl)((function(){return function(){console.log("computing business types");var e=[];if(B.project_id){var t=C.getByid(B.project_id);t&&(e=t.business_types)}return e}()})),Y=(0,i.Fl)((function(){return N()})),$=(0,i.Fl)((function(){return function(){var e,t=(0,a.IU)(A.value);if(u)e=t;else{var n=parseInt(B.customer_id);if(n)if(J===n)e=t;else{var r=t.filter((function(e){return e.customer_ids.includes(n)}));if(0===r.length)e=t;else{var i=t.filter((function(e){return!e.customer_ids.includes(n)}));e=[{text:"Dossiers du client",children:r}],i.length>0&&e.push({text:"Autres dossiers",children:i})}}else e=[]}return e}()})),J=null,z=(0,a.iH)(!0);function Q(e,t){return R.apply(this,arguments)}function R(){return(R=(0,l.Z)(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=8;break}return C.setCurrentProjectId(t.id),r=[n],t.customer_ids&&(r=r.concat(t.customer_ids)),i={id:t.id,customers:r},e.next=7,C.saveProject(i);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,i.YP)((function(){return B.project_id}),(function(e,t){if(console.log("project_id changed from ".concat(t," to ").concat(e)),e){var n=C.getByid(e);u&&n.customer_ids&&1==n.customer_ids.length&&M("customer_id",n.customer_ids[0]),n.phases&&1==n.phases.length&&M("phase_id",n.phases[0].id),n.default_business_type_id?M("business_type_id",n.default_business_type_id):n.business_types&&1==n.business_types.length&&M("business_type_id",n.business_types[0].id)}})),(0,i.YP)((function(){return B.customer_id}),(function(e,t){if(console.log("customer_id changed from ".concat(t," to ").concat(e)),e){var n=_.getByid(e);u||(n.project_ids&&1==n.project_ids.length?(z.value=!0,M("project_id",n.project_ids[0])):0===n.project_ids.length?(z.value=!1,B.project_id=null):(z.value=!0,B.project_id=null))}}));var X,ee,te=(0,a.iH)(!1),ne=(0,a.iH)(!1),ve=function(){te.value=!1},be=function(){ne.value=!1},ye=function(){var e=(0,l.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J=t.id,!u){e.next=9;break}if(!(n=B.project_id)){e.next=7;break}return r=C.getByid(n),e.next=7,Q(r,t.id);case 7:e.next=10;break;case 9:delete B.project_id;case 10:return te.value=!1,e.next=13,K();case 13:D.value=e.sent,Y.value=N(),V.fields.customer_id._whitelist.add(t.id),M("customer_id",t.id);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=(0,l.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=8;break}if(!(n=B.customer_id)){e.next=6;break}return e.next=5,Q(t,n);case 5:J=null;case 6:e.next=9;break;case 8:delete B.customer_id;case 9:return ne.value=!1,e.next=12,P();case 12:A.value=e.sent,V.fields.project_id._whitelist.add(t.id),M("project_id",t.id);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=(0,a.qj)({fieldName:"customer_id",labelKey:"label",options:Y,onAdd:function(){te.value=!0},title:"Ajouter un client"}),he=(0,a.qj)({fieldName:"project_id",labelKey:"name",options:$,onAdd:function(){ne.value=!0},title:"Ajouter un dossier"});u?(ee=_e,X=he):(X=_e,ee=he);var je=E((0,f.Hc)(o,O.createTask),(0,f.AU)(o)),Se=function(e){return(0,f.k$)(V,e)};return function(e,t){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("form",{onSubmit:t[3]||(t[3]=function(){return(0,a.SU)(je)&&(0,a.SU)(je).apply(void 0,arguments)})},[(0,i._)("fieldset",ie,[(0,i.Wm)(w.Z,(0,d.vs)((0,i.F4)(Se("name"))),null,16),(0,i._)("div",ae,[(0,i._)("div",oe,[(0,i.Wm)(k.Z,(0,i.dG)(Se((0,a.SU)(X).fieldName),{name:(0,a.SU)(X).fieldName,idKey:"id",labelKey:(0,a.SU)(X).labelKey,options:(0,a.SU)(X).options,modelValue:(0,a.SU)(B)[(0,a.SU)(X).fieldName]}),null,16,["name","labelKey","options","modelValue"])]),(0,i._)("div",ue,[(0,i._)("button",{type:"button",class:"btn icon only",onClick:t[0]||(t[0]=function(){var e;return(0,a.SU)(X).onAdd&&(e=(0,a.SU)(X)).onAdd.apply(e,arguments)}),title:(0,a.SU)(X).title,"aria-label":(0,a.SU)(X).title},[(0,i.Wm)(U.Z,{name:"plus"})],8,le)])]),(0,i._)("div",se,[(0,i._)("div",ce,[(0,i.Wm)(k.Z,(0,i.dG)(Se((0,a.SU)(ee).fieldName),{name:(0,a.SU)(ee).fieldName,idKey:"id",labelKey:(0,a.SU)(ee).labelKey,options:(0,a.SU)(ee).options,modelValue:(0,a.SU)(B)[(0,a.SU)(ee).fieldName],description:(0,a.SU)(z)?null:"Le client sera automatiquement associé à ce nouveau projet"}),null,16,["name","labelKey","options","modelValue","description"])]),(0,i._)("div",de,[(0,i._)("button",{type:"button",class:"btn icon only",onClick:t[1]||(t[1]=function(){var e;return(0,a.SU)(ee).onAdd&&(e=(0,a.SU)(ee)).onAdd.apply(e,arguments)}),title:(0,a.SU)(ee).title,"aria-label":(0,a.SU)(ee).title},[(0,i.Wm)(U.Z,{name:"plus"})],8,pe)])]),1==(0,a.SU)(L).length?((0,i.wg)(),(0,i.j4)(w.Z,(0,i.dG)({key:0,type:"hidden"},Se("business_type_id")),null,16)):(0,i.kq)("v-if",!0),(0,a.SU)(L).length>1?((0,i.wg)(),(0,i.j4)(k.Z,(0,i.dG)({key:1},Se("phase_id"),{name:"phase_id",idKey:"id",labelKey:"name",options:(0,a.SU)(L),modelValue:(0,a.SU)(B).phase_id}),null,16,["options","modelValue"])):(0,i.kq)("v-if",!0),1==(0,a.SU)(W).length?((0,i.wg)(),(0,i.j4)(w.Z,(0,i.dG)({key:2,type:"hidden"},Se("business_type_id")),null,16)):(0,i.kq)("v-if",!0),(0,a.SU)(W).length>1?((0,i.wg)(),(0,i.j4)(k.Z,(0,i.dG)({key:3},Se("business_type_id"),{name:"business_type_id",idKey:"id",labelKey:"label",options:(0,a.SU)(W),modelValue:(0,a.SU)(B).business_type_id}),null,16,["options","modelValue"])):(0,i.kq)("v-if",!0)]),(0,i._)("div",fe,[(0,i._)("button",{id:"deformsubmit",name:"submit",type:"submit",class:"btn btn-primary btn btn-primary",value:"submit",disabled:(0,a.SU)(G)}," Valider ",8,me),(0,i._)("button",{id:"deformcancel",name:"cancel",type:"button",class:"btn btn-default",onClick:t[2]||(t[2]=function(){return o("cancel")})}," Annuler ")])],32),te.value?((0,i.wg)(),(0,i.j4)(Z.Z,{key:0,edit:!1,url:(0,a.SU)(v),"form-config-url":(0,a.SU)(b),onCancel:ve,onSaved:ye,layout:x.Z},null,8,["url","form-config-url"])):(0,i.kq)("v-if",!0),ne.value?((0,i.wg)(),(0,i.j4)(re,{key:1,edit:!1,url:(0,a.SU)(y),"form-config-url":(0,a.SU)(g),onCancel:be,onSaved:ge,layout:x.Z},null,8,["url","form-config-url"])):(0,i.kq)("v-if",!0)])}}},be=ve;var ye={key:0};const ge={__name:"TaskAddFormComponent",props:{initialData:Object,url:String,formConfigUrl:String},emits:["save","cancel"],setup:function(e,t){return(0,l.Z)(c().mark((function n(){var r,o,s,d,p,f,m,v,b,y,g,_;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=t.emit,f=e,m=s,(v=j()).setUrl(f.formConfigUrl),b=(0,a.iH)(!0),y=function(){var e=(0,l.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.loadConfig().then((function(e){b.value=!1}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S().setAddUrl(f.url),g=function(e){return m("save",e)},_=function(){return m("cancel")},r=(0,i.mv)((function(){return y()})),o=(0,u.Z)(r,2),d=o[0],p=o[1],n.next=14,d;case 14:return p(),n.abrupt("return",(function(t,n){return b.value?((0,i.wg)(),(0,i.iD)("div",ye,"Chargement des informations")):((0,i.wg)(),(0,i.j4)(be,{key:1,"initial-data":e.initialData,onSave:g,onCancel:_},null,8,["initial-data"]))}));case 16:case"end":return n.stop()}}),n)})))()}};var _e={class:"limited_width width30"};const he={__name:"App",setup:function(e){var t=(0,o.Yc)(),n=function(e){var t=e.type_.replace("internal","");window.location.replace("/"+t+"s/"+e.id)},r=function(){history.length>1?history.back():window.location="/"};return function(e,o){return(0,i.wg)(),(0,i.j4)(i.n4,null,{fallback:(0,i.w5)((function(){return[(0,i.Uk)(" Loading... ")]})),default:(0,i.w5)((function(){return[(0,i._)("div",_e,[(0,i.Wm)(ge,{initialData:(0,a.SU)(t).initial_data,url:(0,a.SU)(t).api_url,formConfigUrl:(0,a.SU)(t).form_config_url,onSaved:n,onCancel:r},null,8,["initialData","url","formConfigUrl"])])]})),_:1})}}};(0,r.GP)(he)}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e].call(n.exports,n,n.exports,a),n.exports}a.m=r,e=[],a.O=(t,n,r,i)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,r,i]=e[c],u=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(u=!1,i<o&&(o=i));if(u){e.splice(c--,1);var s=r();void 0!==s&&(t=s)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,r,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var i=Object.create(null);a.r(i);var o={};t=t||[null,n({}),n([]),n(n)];for(var u=2&r&&e;"object"==typeof u&&!~t.indexOf(u);u=n(u))Object.getOwnPropertyNames(u).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,a.d(i,o),i},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.e=()=>Promise.resolve(),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=866,(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={866:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[o,u,l]=n,s=0;if(o.some((t=>0!==e[t]))){for(r in u)a.o(u,r)&&(a.m[r]=u[r]);if(l)var c=l(a)}for(t&&t(n);s<o.length;s++)i=o[s],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},n=self.webpackChunkenDI=self.webpackChunkenDI||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var o=a.O(void 0,[382],(()=>a(2286)));o=a.O(o)})();