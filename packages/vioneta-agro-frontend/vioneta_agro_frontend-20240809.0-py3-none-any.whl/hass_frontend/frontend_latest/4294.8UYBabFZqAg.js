export const id=4294;export const ids=[4294,56721];export const modules={78691:(t,e,a)=>{a.a(t,(async(t,s)=>{try{a.d(e,{EO:()=>i,ol:()=>o,xo:()=>n});var l=a(35193),c=a(45269),r=t([l]);l=(r.then?(await r)():r)[0];const d=(t,e,a,s)=>{const c=a((0,l.L_)(t,e),s);return c instanceof Date?(0,l.uk)(c,e):c},o=(t,e,a,s,l)=>a.time_zone===c.Wj.server?d(t,s.time_zone,e,l):e(t,l),n=(t,e,a,s,l)=>a.time_zone===c.Wj.server?d(t,s.time_zone,e,l):e(t,l),i=(t,e,a,s,r)=>n(t,a,s,r,s.time_zone===c.Wj.server?(0,l.L_)(e,r.time_zone):e);s()}catch(t){s(t)}}))},10469:(t,e,a)=>{a.d(e,{$:()=>s});a(89655);const s=(t,e)=>{const a={};for(const s of t){const t=e(s);t in a?a[t].push(s):a[t]=[s]}return a}},31265:(t,e,a)=>{a.d(e,{JW:()=>u,TC:()=>c,VN:()=>r,Vx:()=>d,XQ:()=>_,eM:()=>n,iH:()=>o,k3:()=>h,m4:()=>s,qf:()=>l,yv:()=>i});const s=33524==a.j?["migration_error","setup_error","setup_retry"]:null,l=33524==a.j?["not_loaded","loaded","setup_error","setup_retry"]:null,c=(t,e,a)=>{const s={type:"config_entries/subscribe"};return a&&a.type&&(s.type_filter=a.type),t.connection.subscribeMessage((t=>e(t)),s)},r=(t,e)=>{const a={};return e&&(e.type&&(a.type_filter=e.type),e.domain&&(a.domain=e.domain)),t.callWS({type:"config_entries/get",...a})},d=(t,e)=>t.callWS({type:"config_entries/get_single",entry_id:e}),o=(t,e,a)=>t.callWS({type:"config_entries/update",entry_id:e,...a}),n=(t,e)=>t.callApi("DELETE",`config/config_entries/entry/${e}`),i=(t,e)=>t.callApi("POST",`config/config_entries/entry/${e}/reload`),_=(t,e)=>t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:"user"}),h=(t,e)=>t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:null}),u=(t,e)=>{const a=[...t],s=t=>{const a=e[t.domain];return"helper"===a?.integration_type?-1:1};return a.sort(((t,e)=>s(e)-s(t)))}},47076:(t,e,a)=>{a.a(t,(async(t,s)=>{try{a.d(e,{AN:()=>P,B2:()=>M,BV:()=>S,E$:()=>x,GW:()=>Z,KJ:()=>B,Q4:()=>W,RB:()=>w,WN:()=>T,X4:()=>F,_d:()=>R,al:()=>H,bs:()=>j,c:()=>C,m7:()=>k,oU:()=>V,tb:()=>A,uh:()=>q,yM:()=>N});a(89655),a(253),a(54846),a(16891);var l=a(31195),c=a(77301),r=a(91103),d=a(39902),o=a(72730),n=a(61310),i=a(31293),_=a(63165),h=a(60132),u=a(83324),m=a(88444),y=a(78691),b=a(41924),g=a(10469),f=a(31265),p=a(4826),$=t([y,b]);[y,b]=$.then?(await $)():$;const v=[],k=()=>({stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),w=()=>({stat_energy_to:"",stat_compensation:null,entity_energy_price:null,number_energy_price:null}),q=()=>({type:"grid",flow_from:[],flow_to:[],cost_adjustment_day:0}),W=()=>({type:"solar",stat_energy_from:"",config_entry_solar_forecast:null}),V=()=>({type:"battery",stat_energy_from:"",stat_energy_to:""}),C=()=>({type:"gas",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),Z=()=>({type:"water",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),S=t=>t.callWS({type:"energy/info"}),M=async t=>(await t.loadBackendTranslation("issues","energy"),t.callWS({type:"energy/validate"})),j=t=>t.callWS({type:"energy/get_prefs"}),T=async(t,e)=>{const a=t.callWS({type:"energy/save_prefs",...e});return D(t),a},z=async(t,e,a,s,l,c="hour")=>t.callWS({type:"energy/fossil_energy_consumption",start_time:e.toISOString(),end_time:l?.toISOString(),energy_statistic_ids:a,co2_statistic_id:s,period:c}),x=t=>(0,g.$)(t.energy_sources,(t=>t.type)),P=(t,e,a)=>{const s=[];for(const l of t.energy_sources)if(!a||a.includes(l.type))if("solar"!==l.type)if("gas"!==l.type&&"water"!==l.type)if("battery"!==l.type){for(const t of l.flow_from){s.push(t.stat_energy_from),t.stat_cost&&s.push(t.stat_cost);const a=e.cost_sensors[t.stat_energy_from];a&&s.push(a)}for(const t of l.flow_to){s.push(t.stat_energy_to),t.stat_compensation&&s.push(t.stat_compensation);const a=e.cost_sensors[t.stat_energy_to];a&&s.push(a)}}else s.push(l.stat_energy_from),s.push(l.stat_energy_to);else{s.push(l.stat_energy_from),l.stat_cost&&s.push(l.stat_cost);const t=e.cost_sensors[l.stat_energy_from];t&&s.push(t)}else s.push(l.stat_energy_from);return a&&!a.includes("device")||s.push(...t.device_consumption.map((t=>t.stat_consumption))),s},E=async(t,e,a,s,_)=>{const[h,u]=await Promise.all([(0,f.VN)(t,{domain:"co2signal"}),S(t)]),m=h.length?h[0]:void 0;let b;if(m)for(const e of Object.values(t.entities)){if("co2signal"!==e.platform)continue;const a=t.states[e.entity_id];if(a&&"%"===a.attributes.unit_of_measurement){b=a.entity_id;break}}const g=[];for(const t of e.energy_sources)if("grid"===t.type)for(const e of t.flow_from)g.push(e.stat_energy_from);const $=P(e,u,["grid","solar","battery","gas","device"]),v=P(e,u,["water"]),k=[...$,...v],w=(0,l.c)(s||new Date,a),q=w>35?"month":w>2?"day":"hour",W=t.config.unit_system.length||"",V={energy:"kWh",volume:"km"===W?"m³":"ft³"},C={volume:"km"===W?"L":"gal"},Z=$.length?(0,p.sz)(t,a,s,$,q,V,["change"]):{},M=v.length?(0,p.sz)(t,a,s,v,q,C,["change"]):{};let j,T,x,E,D,O={},A={};_&&(T=(0,y.xo)(a,c.e,t.locale,t.config)&&(0,y.xo)(s||new Date,r.c,t.locale,t.config)?(0,y.ol)(a,d.P,t.locale,t.config,-(0,y.EO)(s||new Date,a,o.W,t.locale,t.config)-1):(0,y.ol)(a,n.f,t.locale,t.config,-1*(w+1)),x=(0,i.A)(a,-1),$.length&&(O=(0,p.sz)(t,T,x,$,q,V,["change"])),v.length&&(A=(0,p.sz)(t,T,x,v,q,C,["change"]))),void 0!==b&&(E=z(t,a,g,b,s,w>35?"month":w>2?"day":"hour"),_&&(D=z(t,T,g,b,x,w>35?"month":w>2?"day":"hour")));const H={},L=k.length?(0,p.Wr)(t,k):[],[R,B,N,F,J,K,Q]=await Promise.all([Z,M,O,A,L,E,D]),X={...R,...B};_&&(j={...N,...F}),k.length&&J.forEach((t=>{H[t.statistic_id]=t}));return{start:a,end:s,startCompare:T,endCompare:x,info:u,prefs:e,stats:X,statsMetadata:H,statsCompare:j,co2SignalConfigEntry:m,co2SignalEntity:b,fossilEnergyConsumption:K,fossilEnergyConsumptionCompare:Q}},D=t=>{v.forEach((e=>{const a=A(t,{key:e});a.clearPrefs(),a._active&&a.refresh()}))},O=t=>{if(t._refreshTimeout&&clearTimeout(t._refreshTimeout),t._active&&(!t.end||t.end>new Date)){const e=new Date;e.getMinutes()>=20&&e.setHours(e.getHours()+1),e.setMinutes(20,0,0),t._refreshTimeout=window.setTimeout((()=>t.refresh()),e.getTime()-Date.now())}},A=(t,e={})=>{let a="_energy";if(e.key){if(!e.key.startsWith("energy_"))throw new Error("Key need to start with energy_");a=`_${e.key}`}if(t.connection[a])return t.connection[a];v.push(e.key);const s=(0,m.X)(t.connection,a,(async()=>(s.prefs||(s.prefs=await j(t)),O(s),E(t,s.prefs,s.start,s.end,s.compare)))),l=s.subscribe;s.subscribe=t=>{const e=l(t);return s._active++,void 0===s._refreshTimeout&&O(s),()=>{s._active--,s._active<1&&(clearTimeout(s._refreshTimeout),s._refreshTimeout=void 0),e()}},s._active=0,s.prefs=e.prefs;const c=new Date,r=(0,b.LW)(c,t.locale,t.config).split(":")[0];s.start=(0,y.ol)("0"===r?(0,n.f)(c,-1):c,_.o,t.locale,t.config),s.end=(0,y.ol)("0"===r?(0,n.f)(c,-1):c,h.D,t.locale,t.config);const d=()=>{s._updatePeriodTimeout=window.setTimeout((()=>{s.start=(0,y.ol)(new Date,_.o,t.locale,t.config),s.end=(0,y.ol)(new Date,h.D,t.locale,t.config),d()}),(0,u.L)((0,y.ol)(c,h.D,t.locale,t.config),1).getTime()-Date.now())};return d(),s.clearPrefs=()=>{s.prefs=void 0},s.setPeriod=(e,a)=>{s.start=e,s.end=a,s.start.getTime()!==(0,y.ol)(new Date,_.o,t.locale,t.config).getTime()||s.end?.getTime()!==(0,y.ol)(new Date,h.D,t.locale,t.config).getTime()||s._updatePeriodTimeout?s._updatePeriodTimeout&&(clearTimeout(s._updatePeriodTimeout),s._updatePeriodTimeout=void 0):d()},s.setCompare=t=>{s.compare=t},s},H=t=>t.callWS({type:"energy/solar_forecast"}),L=["volume","energy"],R=(t,e={},a)=>{for(const s of t.energy_sources){if("gas"!==s.type)continue;if(a&&a===s.stat_energy_from)continue;const t=e[s.stat_energy_from];if(L.includes(t?.unit_class))return t.unit_class}},B=(t,e,a={})=>{const s=R(e,a);if(void 0!==s)return"energy"===s?"kWh":"km"===t.config.unit_system.length?"m³":"ft³"},N=t=>"km"===t.config.unit_system.length?"L":"gal",F="/docs/energy/faq/#troubleshooting-missing-entities";s()}catch(t){s(t)}}))},20712:(t,e,a)=>{a.d(e,{E:()=>r});var s=a(36312),l=a(68689),c=a(77706);const r=t=>(0,s.A)(null,(function(t,e){class a extends e{constructor(...e){super(...e),t(this)}}return{F:a,d:[{kind:"field",decorators:[(0,c.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,l.A)(a,"connectedCallback",this,3)([]),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,l.A)(a,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,l.A)(a,"updated",this,3)([t]),t.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const e of t.keys())if(this.hassSubscribeRequiredHostProps.includes(e))return void this.__checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){void 0===this.__unsubs&&this.isConnected&&void 0!==this.hass&&!this.hassSubscribeRequiredHostProps?.some((t=>void 0===this[t]))&&(this.__unsubs=this.hassSubscribe())}}]}}),t)},23469:(t,e,a)=>{a.d(e,{g:()=>c});var s=a(3254),l=a(92164);function c(t,e,a,c,r,d){const o=t.getPropertyValue(r+"-"+d).trim(),n=o.length>0?o:t.getPropertyValue(r).trim();let i=(0,s.RQ)(n);return 0===o.length&&d&&(i=(0,s.v2)((0,s.BE)(e?(0,l.T)((0,s.Nc)((0,s.xp)(i)),d):(0,l.d)((0,s.Nc)((0,s.xp)(i)),d)))),c?i+=a?"32":"7F":a&&(i+="7F"),i}},4294:(t,e,a)=>{a.a(t,(async(t,s)=>{try{a.r(e),a.d(e,{HuiEnergySourcesTableCard:()=>g});var l=a(36312),c=(a(253),a(2075),a(16891),a(68560)),r=a(15112),d=a(77706),o=a(63073),n=a(57636),i=a(23469),_=(a(13082),a(47076)),h=a(4826),u=a(20712),m=a(7934),y=t([n,_]);[n,_]=y.then?(await y)():y;const b={grid_return:"--energy-grid-return-color",grid_consumption:"--energy-grid-consumption-color",battery_in:"--energy-battery-in-color",battery_out:"--energy-battery-out-color",solar:"--energy-solar-color",gas:"--energy-gas-color",water:"--energy-water-color"};let g=(0,l.A)([(0,d.EM)("hui-energy-sources-table-card")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_data",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:()=>["_config"]},{kind:"method",key:"hassSubscribe",value:function(){return[(0,_.tb)(this.hass,{key:this._config?.collection_key}).subscribe((t=>{this._data=t}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,m.xP)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return r.s6;if(!this._data)return r.qy`${this.hass.localize("ui.panel.lovelace.cards.energy.loading")}`;let t=0,e=0,a=0,s=0,l=0,c=0,d=0,u=0,m=!1,y=!1,g=!1,f=0,p=0,$=0,v=0,k=0,w=0,q=0,W=0;const V=(0,_.E$)(this._data.prefs),C=getComputedStyle(this),Z=V.grid?.[0].flow_from.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price))||V.grid?.[0].flow_to.some((t=>t.stat_compensation||t.entity_energy_price||t.number_energy_price))||V.gas?.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price))||V.water?.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price)),S=(0,_.KJ)(this.hass,this._data.prefs,this._data.statsMetadata)||"",M=(0,_.yM)(this.hass)||"m³",j=void 0!==this._data.statsCompare;return r.qy` <ha-card> ${this._config.title?r.qy`<h1 class="card-header">${this._config.title}</h1>`:""} <div class="mdc-data-table"> <div class="mdc-data-table__table-container"> <table class="mdc-data-table__table" aria-label="Energy sources"> <thead> <tr class="mdc-data-table__header-row"> <th class="mdc-data-table__header-cell"></th> <th class="mdc-data-table__header-cell" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.source")} </th> ${j?r.qy`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_energy")} </th> ${Z?r.qy`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_cost")} </th>`:""}`:""} <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.energy")} </th> ${Z?r.qy` <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.cost")} </th>`:""} </tr> </thead> <tbody class="mdc-data-table__content"> ${V.solar?.map(((t,e)=>{const s=(0,h.$j)(this._data.stats[t.stat_energy_from])||0;a+=s;const l=j&&(0,h.$j)(this._data.statsCompare[t.stat_energy_from])||0;return $+=l,r.qy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.W)({borderColor:(0,i.g)(C,this.hass.themes.darkMode,!1,!1,b.solar,e),backgroundColor:(0,i.g)(C,this.hass.themes.darkMode,!0,!1,b.solar,e)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.$O)(this.hass,t.stat_energy_from,this._data?.statsMetadata[t.stat_energy_from])} </th> ${j?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(l,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(s,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${V.solar?r.qy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.solar_total")} </th> ${j?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)($,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(a,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${V.battery?.map(((t,e)=>{const a=(0,h.$j)(this._data.stats[t.stat_energy_from])||0,l=(0,h.$j)(this._data.stats[t.stat_energy_to])||0;s+=a-l;const c=j&&(0,h.$j)(this._data.statsCompare[t.stat_energy_from])||0,d=j&&(0,h.$j)(this._data.statsCompare[t.stat_energy_to])||0;return v+=c-d,r.qy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.W)({borderColor:(0,i.g)(C,this.hass.themes.darkMode,!1,!1,b.battery_out,e),backgroundColor:(0,i.g)(C,this.hass.themes.darkMode,!0,!1,b.battery_out,e)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.$O)(this.hass,t.stat_energy_from,this._data?.statsMetadata[t.stat_energy_from])} </th> ${j?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(c,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(a,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell"></td>`:""} </tr> <tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.W)({borderColor:(0,i.g)(C,this.hass.themes.darkMode,!1,!1,b.battery_in,e),backgroundColor:(0,i.g)(C,this.hass.themes.darkMode,!0,!1,b.battery_in,e)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.$O)(this.hass,t.stat_energy_to,this._data?.statsMetadata[t.stat_energy_to])} </th> ${j?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(-1*d,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(-1*l,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${V.battery?r.qy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.battery_total")} </th> ${j?r.qy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(v,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(s,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${V.grid?.map((a=>r.qy`${a.flow_from.map(((a,s)=>{const l=(0,h.$j)(this._data.stats[a.stat_energy_from])||0;t+=l;const c=j&&(0,h.$j)(this._data.statsCompare[a.stat_energy_from])||0;f+=c;const d=a.stat_cost||this._data.info.cost_sensors[a.stat_energy_from],_=d?(0,h.$j)(this._data.stats[d])||0:null;null!==_&&(m=!0,e+=_);const u=j&&d?(0,h.$j)(this._data.statsCompare[d])||0:null;return null!==u&&(p+=u),r.qy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.W)({borderColor:(0,i.g)(C,this.hass.themes.darkMode,!1,!1,b.grid_consumption,s),backgroundColor:(0,i.g)(C,this.hass.themes.darkMode,!0,!1,b.grid_consumption,s)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.$O)(this.hass,a.stat_energy_from,this._data?.statsMetadata[a.stat_energy_from])} </th> ${j?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(c,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==u?(0,n.ZV)(u,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(l,this.hass.locale)} kWh </td> ${Z?r.qy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==_?(0,n.ZV)(_,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${a.flow_to.map(((a,s)=>{const l=-1*((0,h.$j)(this._data.stats[a.stat_energy_to])||0);t+=l;const c=a.stat_compensation||this._data.info.cost_sensors[a.stat_energy_to],d=c?-1*((0,h.$j)(this._data.stats[c])||0):null;null!==d&&(m=!0,e+=d);const _=-1*(j&&(0,h.$j)(this._data.statsCompare[a.stat_energy_to])||0);f+=_;const u=j&&c?-1*((0,h.$j)(this._data.statsCompare[c])||0):null;return null!==u&&(p+=u),r.qy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.W)({borderColor:(0,i.g)(C,this.hass.themes.darkMode,!1,!1,b.grid_return,s),backgroundColor:(0,i.g)(C,this.hass.themes.darkMode,!0,!1,b.grid_return,s)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.$O)(this.hass,a.stat_energy_to,this._data?.statsMetadata[a.stat_energy_to])} </th> ${j?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(_,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==u?(0,n.ZV)(u,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(l,this.hass.locale)} kWh </td> ${Z?r.qy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==d?(0,n.ZV)(d,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))}`))} ${V.grid&&(V.grid?.[0].flow_from?.length||V.grid?.[0].flow_to?.length)?r.qy` <tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.grid_total")} </th> ${j?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(f,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${m?(0,n.ZV)(p,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(t,this.hass.locale)} kWh </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${m?(0,n.ZV)(e,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${V.gas?.map(((t,e)=>{const a=(0,h.$j)(this._data.stats[t.stat_energy_from])||0;l+=a;const s=j&&(0,h.$j)(this._data.statsCompare[t.stat_energy_from])||0;k+=s;const d=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],_=d?(0,h.$j)(this._data.stats[d])||0:null;null!==_&&(y=!0,c+=_);const u=j&&d?(0,h.$j)(this._data.statsCompare[d])||0:null;return null!==u&&(w+=u),r.qy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.W)({borderColor:(0,i.g)(C,this.hass.themes.darkMode,!1,!1,b.gas,e),backgroundColor:(0,i.g)(C,this.hass.themes.darkMode,!0,!1,b.gas,e)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.$O)(this.hass,t.stat_energy_from,this._data?.statsMetadata[t.stat_energy_from])} </th> ${j?r.qy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(s,this.hass.locale)} ${S} </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==u?(0,n.ZV)(u,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(a,this.hass.locale)} ${S} </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==_?(0,n.ZV)(_,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${V.gas?r.qy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.gas_total")} </th> ${j?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(k,this.hass.locale)} ${S} </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${y?(0,n.ZV)(w,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(l,this.hass.locale)} ${S} </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${y?(0,n.ZV)(c,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${V.water?.map(((t,e)=>{const a=(0,h.$j)(this._data.stats[t.stat_energy_from])||0;d+=a;const s=j&&(0,h.$j)(this._data.statsCompare[t.stat_energy_from])||0;q+=s;const l=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],c=l?(0,h.$j)(this._data.stats[l])||0:null;null!==c&&(g=!0,u+=c);const _=j&&l?(0,h.$j)(this._data.statsCompare[l])||0:null;return null!==_&&(W+=_),r.qy`<tr class="mdc-data-table__row"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,o.W)({borderColor:(0,i.g)(C,this.hass.themes.darkMode,!1,!1,b.water,e),backgroundColor:(0,i.g)(C,this.hass.themes.darkMode,!0,!1,b.water,e)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,h.$O)(this.hass,t.stat_energy_from,this._data?.statsMetadata[t.stat_energy_from])} </th> ${j?r.qy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(s,this.hass.locale)} ${M} </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==_?(0,n.ZV)(_,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(a,this.hass.locale)} ${M} </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==c?(0,n.ZV)(c,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${V.water?r.qy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.water_total")} </th> ${j?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(q,this.hass.locale)} ${M} </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${g?(0,n.ZV)(W,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(d,this.hass.locale)} ${M} </td> ${Z?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${g?(0,n.ZV)(u,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${[y,g,m].filter(Boolean).length>1?r.qy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.total_costs")} </th> ${j?r.qy`<td class="mdc-data-table__cell"></td> <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(w+p+W,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""} <td class="mdc-data-table__cell"></td> <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,n.ZV)(c+e+u,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td> </tr>`:""} </tbody> </table> </div> </div> </ha-card>`}},{kind:"get",static:!0,key:"styles",value:function(){return r.AH`${(0,r.iz)(c)} .mdc-data-table{width:100%;border:0}.mdc-data-table__cell,.mdc-data-table__header-cell{color:var(--primary-text-color);border-bottom-color:var(--divider-color);text-align:var(--float-start)}.mdc-data-table__row:not(.mdc-data-table__row--selected):hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.total{--mdc-typography-body2-font-weight:500}.total .mdc-data-table__cell{border-top:1px solid var(--divider-color)}ha-card{height:100%;overflow:hidden}.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}.cell-bullet{width:32px;padding-right:0;padding-inline-end:0;padding-inline-start:16px;direction:var(--direction)}.bullet{border-width:1px;border-style:solid;border-radius:4px;height:16px;width:32px}.mdc-data-table__cell--numeric{direction:ltr}`}}]}}),(0,u.E)(r.WF));s()}catch(t){s(t)}}))}};
//# sourceMappingURL=4294.8UYBabFZqAg.js.map