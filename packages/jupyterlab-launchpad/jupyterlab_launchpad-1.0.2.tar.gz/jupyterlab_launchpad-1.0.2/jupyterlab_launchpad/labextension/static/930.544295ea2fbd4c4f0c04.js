"use strict";(self.webpackChunkjupyterlab_launchpad=self.webpackChunkjupyterlab_launchpad||[]).push([[930],{930:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var a=n(909),s=n(200),o=n(313),r=n(887),l=n(614),c=n(678),i=n(460),d=n(53),m=n(345),u=n.n(m);const h=new i.LabIcon({name:"jupyterlab-launchpad:star",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n  <path class="jp-icon3 jp-star-filled" fill="rgb(97,97,97)" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />\n  <path class="jp-icon3 jp-star-border" fill="rgb(97,97,97)" d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z" />\n</svg>\n'}),p=new i.LabIcon({name:"jupyterlab-launchpad:file",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n  <path class="jp-icon3" fill="rgb(97,97,97)" d="M13.81 22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H14L20 8V13.09C19.67 13.04 19.34 13 19 13S18.33 13.04 18 13.09V9H13V4H6V20H13.09C13.21 20.72 13.46 21.39 13.81 22M23 18H20V15H18V18H15V20H18V23H20V20H23V18Z" />\n</svg>'}),g=new i.LabIcon({name:"jupyterlab-launchpad:code-server",svgstr:'<svg width="64" viewBox="0 0 2250 2250" version="1.1" xmlns="http://www.w3.org/2000/svg" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n<g class="jp-icon0" fill="#000" style="fill-rule:nonzero;">\n  <path d="M1991.66,1034.72c-38.493,0 -64.144,-22.57 -64.144,-68.897l-0,-266.084c-0,-169.867 -69.982,-263.709 -250.762,-263.709l-83.976,0l-0,179.368l25.661,0c71.144,0 104.967,39.201 104.967,109.285l0,235.201c0,102.156 30.324,143.733 96.806,165.114c-66.482,20.196 -96.806,62.958 -96.806,165.114l0,174.621c0,48.7 0,96.216 -12.829,144.917c-12.829,45.141 -33.823,87.903 -62.98,124.726c-16.329,21.386 -34.991,39.202 -55.981,55.835l-0,23.755l83.971,-0c180.781,-0 250.763,-93.843 250.763,-263.709l-0,-266.084c-0,-47.516 24.485,-68.897 64.144,-68.897l47.822,-0l-0,-179.37l-46.656,-0l0,-1.186Z"/>\n  <path d="M1420.16,706.904l-258.923,0c-5.833,0 -10.495,-4.752 -10.495,-10.691l-0,-20.192c-0,-5.941 4.662,-10.692 10.495,-10.692l260.089,0c5.83,0 10.495,4.751 10.495,10.692l0,20.192c0,5.939 -5.833,10.691 -11.661,10.691Z" />\n  <path d="M1464.48,963.474l-188.942,0c-5.833,0 -10.501,-4.754 -10.501,-10.693l0,-20.192c0,-5.938 4.668,-10.691 10.501,-10.691l188.942,-0c5.833,-0 10.495,4.753 10.495,10.691l-0,20.192c-0,4.754 -4.662,10.693 -10.495,10.693Z"/>\n  <path d="M1539.12,835.188l-377.885,0c-5.833,0 -10.495,-4.75 -10.495,-10.689l-0,-20.196c-0,-5.939 4.662,-10.69 10.495,-10.69l376.719,0c5.833,0 10.499,4.751 10.499,10.69l-0,20.196c-0,4.75 -3.5,10.689 -9.333,10.689Z"/>\n  <path d="M861.493,765.074c25.658,0 51.319,2.376 75.811,8.316l0,-48.705c0,-68.897 34.989,-109.285 104.971,-109.285l25.658,0l-0,-179.368l-83.977,0c-180.781,0 -250.758,93.842 -250.758,263.709l0,87.901c40.819,-14.252 83.977,-22.568 128.295,-22.568Z"/>\n  <path d="M1618.44,1411.25c-18.662,-150.861 -132.962,-276.776 -279.919,-305.285c-40.818,-8.314 -81.642,-9.504 -121.295,-2.376c-1.166,-0 -1.166,-1.189 -2.332,-1.189c-64.148,-136.605 -201.772,-226.884 -351.063,-226.884c-149.289,-0 -285.747,87.905 -351.062,224.51c-1.166,-0 -1.166,1.188 -2.332,1.188c-41.987,-4.753 -83.975,-2.379 -125.963,8.314c-144.623,35.634 -254.257,159.175 -274.085,308.847c-2.332,15.441 -3.499,30.883 -3.499,45.141c0,45.136 30.325,86.713 74.645,92.652c54.817,8.317 102.636,-34.448 101.469,-89.089c0,-8.317 0,-17.821 1.167,-26.134c9.331,-76.025 66.48,-140.168 141.123,-157.99c23.328,-5.939 46.654,-7.124 68.814,-3.559c71.146,9.502 141.124,-27.324 171.449,-91.467c22.162,-47.516 57.151,-89.094 103.804,-111.664c51.314,-24.946 109.633,-28.506 163.286,-9.499c55.979,20.192 97.966,62.954 123.627,116.409c26.824,52.27 39.653,89.093 96.805,96.221c23.325,3.559 88.639,2.374 113.132,1.185c47.82,0 95.64,16.631 129.463,51.079c22.156,23.757 38.485,53.455 45.486,86.715c10.495,53.455 -2.334,106.908 -33.825,147.296c-22.162,28.509 -52.485,49.89 -86.308,59.394c-16.329,4.754 -32.657,5.939 -48.986,5.939l-257.757,0c-51.314,0 -92.138,-41.573 -92.138,-93.842l0,-348.049c0,-14.251 -11.661,-26.13 -25.658,-26.13l-36.156,0c-71.148,1.185 -128.295,81.964 -128.295,167.488l-0,312.415c-0,92.652 73.476,167.488 164.451,167.488c0,0 404.714,-1.19 410.544,-1.19c93.304,-9.503 179.614,-58.204 237.927,-133.04c58.319,-72.46 85.142,-167.492 73.481,-264.894Z"/>\n</g></svg>'});var f=n(602);class v{constructor(e){var t,n,a,s;this._options=e,this._refreshLastUsed=new f.Signal(this),this._refreshClock=null;const{item:o,commands:r,cwd:l}=e,c={...o.args,cwd:l};this.command=o.command,this.args=c,this.category=o.category,this.rank=o.rank,this.kernelIconUrl=o.kernelIconUrl,this.metadata=null!==(t=o.metadata)&&void 0!==t?t:{},this.iconClass=r.iconClass(o.command,c),this.icon=r.icon(o.command,c),this.caption=r.caption(o.command,c),this.label=r.label(o.command,c);const i=this.metadata.kernel;if(i){const e=(null!==(n=i.conda_env_name)&&void 0!==n?n:"").match(/(?<namespace>.+)-(?<duplicate>\1)-(?<environment>.+)/);if(e&&this.metadata){const t=e.groups;this.label=null!==(a=i.conda_language)&&void 0!==a?a:t.environment;const n={...i};delete n.conda_env_name,this.metadata={...this.metadata,kernel:{Namespace:t.namespace,conda_env_name:t.environment,...n}}}}"server-proxy:open"===this.command&&(null===(s=this.kernelIconUrl)||void 0===s?void 0:s.endsWith("/vscode"))&&(this.icon=g)}get starred(){var e;const{item:t,favoritesDatabase:n}=this._options;return null!==(e=n.get(t))&&void 0!==e&&e}get lastUsed(){const e=this._lastUsed;return this._setRefreshClock(e),e}get _lastUsed(){const{item:e,lastUsedDatabase:t}=this._options;return t.get(e)}get refreshLastUsed(){return this._refreshLastUsed}async execute(){const{item:e,commands:t,lastUsedDatabase:n}=this._options;await t.execute(e.command,this.args),await n.recordAsUsedNow(e),this._refreshLastUsed.emit()}async markAsUsedNow(){const{item:e,lastUsedDatabase:t}=this._options;await t.recordAsUsedNow(e),this._refreshLastUsed.emit()}async toggleStar(){const{item:e,favoritesDatabase:t}=this._options,n=!t.get(e);return t.set(e,n)}_setRefreshClock(e){if(null!==this._refreshClock&&(window.clearTimeout(this._refreshClock),this._refreshClock=null),!e)return;const t=Date.now()-e.getTime(),n=t<6e4?1e4:t<36e5?6e4:36e5;this._refreshClock=window.setTimeout((()=>{this._refreshLastUsed.emit(),this._setRefreshClock(this._lastUsed)}),n)}}var b=n(473);const _="jp-sortable-table";function w(e){const[t,n]=(0,m.useState)({sortKey:e.sortKey,sortDirection:e.sortDirection||1});let a=e.rows;const s=e.columns.filter((e=>e.id===t.sortKey))[0];if(s){const n=s.sort.bind(s);a=e.rows.sort(((e,a)=>{var s;return(null!==(s=n(e.data,a.data))&&void 0!==s?s:0)*t.sortDirection}))}const o=e.columns.filter((e=>(!e.isAvailable||e.isAvailable())&&!e.isHidden)),[r,l]=u().useState({}),c=a.map((t=>{const n=o.map((e=>u().createElement("td",{key:e.id+"-"+t.key,className:r[e.id]?"jp-mod-col-resized":""},e.renderCell(t.data))));return u().createElement("tr",{key:t.key,"data-key":t.key,onClick:e.onRowClick,className:"jp-sortable-table-tr"},n)})),i=o.map((e=>u().createElement(y,{label:e.label,id:e.id,state:t,key:e.id,onSort:()=>{var a;(a=e.id)===t.sortKey?n({sortKey:a,sortDirection:-1*t.sortDirection}):n({sortKey:a,sortDirection:1})},onResize:()=>{l({...r,[e.id]:!0})},minWidth:e.minWidth})));return u().createElement("table",{className:_},u().createElement("thead",null,u().createElement("tr",{className:"jp-sortable-table-tr"},i)),u().createElement("tbody",null,c))}function y(e){var t;const n=e.id===e.state.sortKey,a=n&&1!==e.state.sortDirection?i.caretDownIcon:i.caretUpIcon,[s,o]=u().useState(null),r=u().useRef(null),[l,c]=u().useState(!1),[d,h]=(0,m.useState)(null);requestAnimationFrame((()=>{if(r.current){const{left:e}=r.current.getBoundingClientRect();h(e)}})),u().useEffect((()=>{const t=t=>{if(l){let n;if(null===d){if(!r.current)throw Error("Cannot resize: no reference to the current table");console.warn("Resize cache for column was not available"),n=r.current.getBoundingClientRect().left}else n=d;o(t.clientX-n),e.onResize()}},n=e=>{l&&(document.body.classList.remove(f),c(!1),e.stopImmediatePropagation())};return document.body.addEventListener("pointermove",t),document.body.addEventListener("pointerup",n),()=>{document.body.removeEventListener("pointermove",t),document.body.removeEventListener("pointerup",n)}}));const p=[];n&&p.push("jp-sorted-header"),l&&p.push("jp-header-resizing");const g="jp-sortable-table-resize-handle",f="jp-mod-resize-table";return u().createElement("th",{key:e.id,ref:r,onClick:()=>e.onSort(),className:p.join(" "),"data-id":e.id,style:{width:null!==s?`${Math.max(null!==(t=e.minWidth)&&void 0!==t?t:50,s)}px`:""},onPointerDown:e=>{e.target instanceof HTMLElement&&e.target.className===g&&(document.body.classList.add(f),c(!0))}},u().createElement("div",{className:"jp-sortable-table-th-wrapper"},u().createElement("label",null,e.label),u().createElement(a.react,{tag:"span",className:"jp-sort-icon"})),u().createElement("div",{className:g}))}var C=n(262);const k="jupyterlab-launchpad:plugin";var S;!function(e){e.create="launcher:create",e.moveColumn="launchpad:table-move-column",e.toggleColumn="launchpad:table-toggle-column",e.showStarred="launchpad:show-starred",e.searchAllSections="launchpad:search-all-sections",e.openSettings="launchpad:open-settings"}(S||(S={}));const E=new C.Token("jupyterlab-launchpad:ILauncherDatabase","Databases for launchpad."),N="jp-starIconButton",L="jp-TableKernelItem";function j(e){if(0===e.length)return"(empty)";switch(e){case"conda_env_name":return"Environment";case"conda_env_path":return"Environment path";case"conda_language":return"Language";case"conda_raw_kernel_name":return"Kernel";case"conda_is_base_environment":return"Base?";case"conda_is_currently_running":return"Running?"}return e[0].toUpperCase()+e.substring(1)}function D(e){const[t,n]=m.useState(void 0),a=m.useRef(null);return m.createElement("div",{className:"jp-ellipsis-wrapper",title:e.title},m.createElement("div",{className:"jp-ellipsis",title:t,ref:a,onMouseEnter:()=>{if(e.title)return;const t=a.current;t&&t.scrollWidth>t.clientWidth?n(t.innerText):n(void 0)}},e.children))}function U(e){var t,n,a,s;const{trans:o}=e;let r,l;const[c,d]=m.useState("");e.showSearchBox?(r=c,l=d):r=e.query;const[,u]=m.useReducer((e=>e+1),0);m.useEffect((()=>(e.favouritesChanged.connect(u),()=>{e.favouritesChanged.disconnect(u)}))),m.useEffect((()=>(e.lastUsedChanged.connect(u),()=>{e.lastUsedChanged.disconnect(u)})));const p=new Set;for(const n of e.items){const e=null===(t=n.metadata)||void 0===t?void 0:t.kernel;if(e)for(const t of Object.keys(e))p.add(t)}const g=[...p].map((e=>({id:e,label:j(e),renderCell:t=>{var n;const a=null===(n=t.metadata)||void 0===n?void 0:n.kernel;return m.createElement(D,null,(()=>{if(!a)return"-";const t=a[e];return"string"==typeof t?t:JSON.stringify(t)})())},sort:(t,n)=>{var a,s;const o=null===(a=t.metadata)||void 0===a?void 0:a.kernel,r=null===(s=n.metadata)||void 0===s?void 0:s.kernel,l=o?o[e]:void 0,c=r?r[e]:void 0;return l===c?0:l?c?"string"==typeof l&&"string"==typeof c?l.localeCompare(c):l>c?1:-1:-1:1}})));e.showWidgetType&&g.push({id:"widget-type",label:o.__("Type"),renderCell:e=>e.command.split(":")[0],sort:(e,t)=>e.command.localeCompare(t.command)});const f=[{id:"kernel",label:o.__("Kernel"),renderCell:t=>m.createElement(D,null,m.createElement("span",{className:L,onClick:n=>{e.onClick(t),n.stopPropagation()},onKeyDown:e=>{"Enter"===e.key&&t.execute()},tabIndex:0},m.createElement("span",{className:"jp-LauncherCard-icon",onClick:()=>e.onClick(t)},t.kernelIconUrl?m.createElement("img",{src:t.kernelIconUrl,className:"jp-Launcher-kernelIcon",alt:t.label}):m.createElement("div",{className:"jp-LauncherCard-noKernelIcon"},t.label[0].toUpperCase())),m.createElement("span",{className:"jp-TableKernelItem-label"},t.label))),sort:(e,t)=>e.label.localeCompare(t.label)},...g,{id:"last-used",label:o.__("Last Used"),renderCell:e=>m.createElement(i.UseSignal,{signal:e.refreshLastUsed},(()=>m.createElement(D,{title:e.lastUsed?b.Time.format(e.lastUsed):o.__("No information about last use of this kernel is available in the layout database")},e.lastUsed?b.Time.formatHuman(e.lastUsed):o.__("Never")))),sort:(e,t)=>e.lastUsed===t.lastUsed?0:e.lastUsed?t.lastUsed?e.lastUsed>t.lastUsed?-1:1:-1:1},{id:"star",label:"",renderCell:e=>{const t=e.starred,n=t?o.__("Click to remove the kernel from favourites"):o.__("Click to add this kernel to favourites");return m.createElement("button",{className:t?`${N} jp-mod-starred`:N,title:n,onClick:async t=>{t.stopPropagation(),await e.toggleStar()}},m.createElement(h.react,{className:"jp-starIcon"}))},sort:(e,t)=>Number(e.starred)-Number(t.starred)}],v=null!==(n=e.hideColumns)&&void 0!==n?n:[],_=f.filter((e=>!v.includes(e.id))),[y,C]=m.useState(null!==(a=e.settings.composite.hiddenColumns)&&void 0!==a?a:{}),k=_.map((e=>e.id)),[E,U]=m.useState(null!==(s=e.settings.composite.columnOrder)&&void 0!==s?s:k),I=w,x=()=>{var t,n;const a=null!==(t=e.settings.composite.hiddenColumns)&&void 0!==t?t:{};y!==a&&C(a);const s=null!==(n=e.settings.composite.columnOrder)&&void 0!==n?n:k;E!==s&&U(s)};return m.useEffect((()=>(e.settings.changed.connect(x),()=>{e.settings.changed.disconnect(x)}))),m.createElement("div",{className:"jp-NewLauncher-table"},e.showSearchBox?m.createElement("div",{className:"jp-Launcher-searchBox"},m.createElement(i.FilterBox,{placeholder:o.__("Filter kernels"),updateFilter:(e,t)=>{l(null!=t?t:"")},initialQuery:"",useFuzzyFilter:!1})):null,m.createElement("div",{className:"jp-NewLauncher-table-scroller",onContextMenu:t=>{var n;t.preventDefault();const a=new i.MenuSvg({commands:e.commands});a.addClass("jp-NewLauncher-contextMenu");const s=new i.MenuSvg({commands:e.commands});s.addClass("jp-NewLauncher-contextMenu-visibleColumns");for(const e of _)s.addItem({command:S.toggleColumn,args:{id:e.id,label:e.label}});s.title.label=o.__("Visible Columns"),a.addItem({type:"submenu",submenu:s});const r=null===(n=t.target.closest("th[data-id]"))||void 0===n?void 0:n.dataset.id;r&&(a.addItem({command:S.moveColumn,args:{direction:"left",order:E,id:r}}),a.addItem({command:S.moveColumn,args:{direction:"right",order:E,id:r}})),a.open(t.clientX,t.clientY)}},m.createElement(I,{rows:e.items.filter((e=>{var t;const n=r.toLowerCase();if(e.label.toLowerCase().includes(n))return!0;const a=null===(t=e.metadata)||void 0===t?void 0:t.kernel;if(a){for(const e of p){const t=a[e];if("string"==typeof t&&t.toLowerCase().includes(n))return!0}return!1}})).map((e=>({data:e,key:e.command+JSON.stringify(e.args)}))),blankIndicator:()=>m.createElement("div",null,o.__("No entries")),sortKey:"kernel",onRowClick:e=>{const t=e.target,n=t.closest("tr");if(!n)return;const a=t.closest("td"),s=null==a?void 0:a.querySelector(`.${N}`);if(s)return s.click();n.querySelector(`.${L}`).click()},columns:_.filter((e=>"hidden"!==y[e.id])).map((e=>{var t;return{...e,rank:null!==(t=E.indexOf(e.id))&&void 0!==t?t:10}})).sort(((e,t)=>e.rank-t.rank))})))}function I(e){const[t,n]=m.useState(e.open);return m.createElement("details",{onToggle:t=>{n(t.currentTarget.open),e.onToggled&&e.onToggled(t.currentTarget.open)},className:(0,i.classes)(e.className,"jp-CollapsibleSection"),open:t},m.createElement("summary",null,m.createElement("div",{className:"jp-CollapsibleSection-CollapserIconWrapper","aria-hidden":"true"},m.createElement(i.caretRightIcon.react,{className:"jp-CollapsibleSection-CollapserIcon"})),m.createElement(e.icon.react,{tag:"span",className:"jp-CollapsibleSection-CategoryIcon"}),m.createElement("h3",{className:"jp-CollapsibleSection-Title"},e.title)),m.createElement("div",{className:"jp-Launcher-CardGroup jp-Launcher-cardContainer"},e.children))}function x(e){const{item:t}=e;return m.createElement("div",{onClick:()=>t.execute(),className:"jp-Launcher-TypeCard jp-LauncherCard",title:t.caption||t.label,tabIndex:0},m.createElement("div",{className:"jp-LauncherCard-icon"},m.createElement(i.LabIcon.resolveReact,{icon:t.icon,iconClass:(0,i.classes)(t.iconClass,"jp-Icon-cover")})),m.createElement("div",{className:"jp-LauncherCard-label"},m.createElement("p",null,t.label)))}function B(e){const{commands:t}=e,n=new i.MenuSvg({commands:t});n.addItem({command:S.showStarred}),n.addItem({command:S.searchAllSections}),n.addItem({command:S.openSettings});const a=m.useRef(null);return m.createElement("div",{className:"jp-Launcher-TypeCard jp-LauncherCard jp-Launcher-QuickSettings",ref:a,onClick:e=>{(e=>{const t=a.current;let s,o;if(t){const e=t.getBoundingClientRect();s=e.left,o=e.bottom}else s=e.clientX,o=e.clientY;n.open(s,o)})(e)}},m.createElement("div",{className:"jp-LauncherCard-icon"},m.createElement(i.settingsIcon.react,null)))}function A(e){var t;const{trans:n,cwd:a,typeItems:s,commands:o,otherItems:r,favouritesChanged:l}=e,[c,d]=m.useState(""),[,u]=m.useReducer((e=>e+1),0),[g,f]=m.useState(e.settings.composite.starredSection),[v,b]=m.useState(e.settings.composite.searchAllSections),_=()=>{const t=e.settings.composite.starredSection;g!==t&&f(t);const n=e.settings.composite.searchAllSections;v!==n&&b(n)};if(m.useEffect((()=>(e.settings.changed.connect(_),()=>{e.settings.changed.disconnect(_)}))),l){const e=()=>{g&&u()};m.useEffect((()=>(l.connect(e),()=>{l.disconnect(e)})))}const w=new Set;for(const n of e.notebookItems){const e=null===(t=n.metadata)||void 0===t?void 0:t.kernel;if(e)for(const t of Object.keys(e))w.add(t)}const y=[...e.notebookItems,...e.consoleItems].filter((e=>e.starred)),C=e.settings.composite.collapsedSections,k=[{className:"jp-Launcher-openByType",title:n.__("Create Empty"),icon:p,id:"create-empty",rank:1,render:()=>s.filter((e=>!c||-1!==e.label.toLowerCase().indexOf(c.toLowerCase()))).map((e=>m.createElement(x,{item:e,trans:n})))},{className:"jp-Launcher-openByKernel jp-Launcher-launchNotebook",title:n.__("Launch New Notebook"),icon:i.notebookIcon,id:"launch-notebook",rank:3,render:()=>m.createElement(U,{items:e.notebookItems,commands:e.commands,showSearchBox:!v,query:c,settings:e.settings,trans:n,onClick:e=>e.execute(),favouritesChanged:e.favouritesChanged,lastUsedChanged:e.lastUsedChanged})},{className:"jp-Launcher-openByKernel jp-Launcher-launchConsole",title:n.__("Launch New Console"),icon:i.consoleIcon,id:"launch-console",rank:5,render:()=>m.createElement(U,{items:e.consoleItems,commands:e.commands,showSearchBox:!v,query:c,settings:e.settings,trans:n,onClick:e=>e.execute(),favouritesChanged:e.favouritesChanged,lastUsedChanged:e.lastUsedChanged})}];g&&k.push({className:"jp-Launcher-openByKernel",title:n.__("Starred"),icon:h,id:"starred",rank:2,render:()=>y.length>0?m.createElement(U,{items:y,commands:e.commands,showSearchBox:!v,showWidgetType:!0,query:c,settings:e.settings,trans:n,onClick:e=>e.execute(),favouritesChanged:e.favouritesChanged,lastUsedChanged:e.lastUsedChanged}):"No starred items"});const S=[...k,...e.sections];return m.createElement("div",{className:"jp-LauncherBody"},m.createElement("div",{className:"jp-NewLauncher-TopBar"},m.createElement("div",{className:"jp-Launcher-cwd"},m.createElement("h3",null,n.__("Current folder:")," ",m.createElement("code",null,a||"/"))),m.createElement("div",{className:"jp-NewLauncher-OtherItems"},r.map((e=>m.createElement(x,{item:e,trans:n}))),m.createElement(B,{commands:o,trans:n}))),v?m.createElement("div",{className:"jp-Launcher-searchBox"},m.createElement(i.FilterBox,{placeholder:n.__("Filter"),updateFilter:(e,t)=>{d(null!=t?t:"")},initialQuery:"",useFuzzyFilter:!1})):null,S.sort(((e,t)=>e.rank-t.rank)).map((e=>m.createElement(I,{className:e.className,title:e.title,icon:e.icon,open:"collapsed"!==C[e.id]},e.render()))))}const K="server-proxy:open";class M extends r.Launcher{constructor(e){super(e),this.renderCommand=e=>new v({item:e,cwd:this.cwd,commands:this.commands,lastUsedDatabase:this._lastUsedDatabase,favoritesDatabase:this._favoritesDatabase}),this.renderKernelCommand=e=>this.renderCommand(e),this.commands=e.commands,this.trans=this.translator.load("jupyterlab-launchpad"),this._lastUsedDatabase=e.lastUsedDatabase,this._favoritesDatabase=e.favoritesDatabase,this._settings=e.settings,this._newModel=e.model,this._newModel.sectionAdded.connect((()=>{this.update()}))}render(){if(!this.model)return null;const e=this.trans,t=[...this.model.items()],n=e.__("Notebook"),a=e.__("Console"),s=[n,a],o=this._settings.composite.utilityCommands,r=t.filter((e=>o.includes(e.command))).map(this.renderCommand),l=t.filter((e=>(!e.category||!s.includes(e.category))&&!o.includes(e.command)||e.command===K)),c={"terminal:create-new":3,"fileeditor:create-new":6,"fileeditor:create-new-markdown-file":5};for(const e of l)e.command in c&&(e.rank=c[e.command]);const i=[{command:"notebook:create-new",rank:1},{command:"console:create",rank:4},...l].sort(((e,t)=>{var n,a;return(null!==(n=null==e?void 0:e.rank)&&void 0!==n?n:0)-(null!==(a=null==t?void 0:t.rank)&&void 0!==a?a:0)})),d=t.filter((e=>e.category&&e.category===n&&e.command!==K)).map(this.renderKernelCommand),u=t.filter((e=>e.category&&e.category===a&&e.command!==K)).map(this.renderKernelCommand),h=i.map(this.renderCommand);return m.createElement(A,{trans:this.trans,cwd:this.cwd,commands:this.commands,typeItems:h,notebookItems:d,consoleItems:u,otherItems:r,settings:this._settings,favouritesChanged:this._favoritesDatabase.changed,lastUsedChanged:this._lastUsedDatabase.changed,sections:this._newModel.sections})}}class T extends r.LauncherModel{constructor(){super(...arguments),this.sections=[],this._sectionAdded=new f.Signal(this)}addSection(e){this.sections.push(e),this._sectionAdded.emit()}get sectionAdded(){return this._sectionAdded}}class R extends s.SessionContextDialogs{constructor(e){var t;super(e),this.options=e;const n=null!==(t=e.translator)&&void 0!==t?t:c.nullTranslator;this.trans=n.load("jupyterlab")}async selectKernel(e){const t=this.trans;if(e.isDisposed)return Promise.resolve();let n=t.__("Cancel");e.hasNoKernel&&(n=e.kernelDisplayName);const a=[s.Dialog.cancelButton({label:n}),s.Dialog.okButton({label:t.__("Select"),ariaLabel:t.__("Select Kernel"),className:"jp-KernelSelector-SelectButton"})],o=e.kernelPreference.autoStartDefault,r="boolean"==typeof o,l=await this.options.settingRegistry.load(k),c=new s.Dialog({title:t.__("Select Kernel"),body:new z({data:{specs:e.specsManager.specs,sessions:e.sessionManager.running(),preference:e.kernelPreference},name:e.name,commands:this.options.commands,favoritesDatabase:this.options.database.favorites,lastUsedDatabase:this.options.database.lastUsed,settings:l,trans:t,acceptDialog:()=>{c.resolve(1)},type:e.type}),buttons:a,checkbox:r?{label:t.__("Always start the preferred kernel"),caption:t.__("Remember my choice and always start the preferred kernel"),checked:o}:null});c.node.classList.add("jp-KernelSelector-Dialog");const i=await c.launch();if(e.isDisposed||!i.button.accept)return;r&&null!==i.isChecked&&(e.kernelPreference={...e.kernelPreference,autoStartDefault:i.isChecked});const d=i.value;if(null===d&&!e.hasNoKernel)return e.shutdown();d&&await e.changeKernel(d)}}const O={id:"jupyterlab-launchpad:dialogs",description:"Session dialogs for redesigned JupyterLab launcher",provides:s.ISessionContextDialogs,autoStart:!0,requires:[c.ITranslator,E,l.ISettingRegistry],activate:(e,t,n,a)=>new R({translator:t,database:n,commands:e.commands,settingRegistry:a})};class z extends s.ReactWidget{constructor(e){super(),this.options=e,this.renderKernelCommand=e=>new v({item:e,cwd:"",commands:this.commands,lastUsedDatabase:this._lastUsedDatabase,favoritesDatabase:this._favoritesDatabase}),this._selection=null,this.commands=e.commands,this._lastUsedDatabase=e.lastUsedDatabase,this._favoritesDatabase=e.favoritesDatabase,this._settings=e.settings,this._name=e.name,this.trans=e.trans}onBeforeAttach(e){super.onBeforeAttach(e),this.node.style.minWidth="",this.node.style.minHeight=""}onAfterAttach(e){super.onAfterAttach(e),requestAnimationFrame((()=>{const e=this.node.getBoundingClientRect();this.node.style.minWidth=e.width+"px",this.node.style.minHeight=e.height+"px"}))}render(){var e;const t=[],n=this.options.data.specs.kernelspecs,a="console"===this.options.type?"console:create":"notebook:create-new";for(const e of Object.values(n)){if(!e)continue;const n=e.resources["logo-svg"]||e.resources["logo-64x64"];t.push({command:a,args:"console"===this.options.type?{isLauncher:!0,kernelPreference:{name:e.name}}:{isLauncher:!0,kernelName:e.name},kernelIconUrl:n,metadata:{kernel:C.JSONExt.deepCopy(e.metadata||{})}})}const s=[];for(const t of this.options.data.sessions){const o=t.kernel;if(!o)continue;const r=n[o.name],l=r.resources["logo-svg"]||r.resources["logo-64x64"];s.push({command:a,args:"console"===this.options.type?{isLauncher:!0,kernelPreference:{name:r.name}}:{isLauncher:!0,kernelName:r.name},kernelIconUrl:l,metadata:{kernel:{...C.JSONExt.deepCopy(r.metadata||{}),state:null!==(e=o.execution_state)&&void 0!==e?e:"running","used by":t.name},model:o}})}const o=t.map(this.renderKernelCommand),r=s.map(this.renderKernelCommand);return m.createElement(m.Fragment,null,m.createElement("h3",{className:"jp-KernelSelector-Section"},this.trans.__('Start a new kernel for "%1"',this._name)),m.createElement(U,{trans:this.trans,commands:this.commands,items:o,settings:this._settings,query:"",showSearchBox:!0,onClick:e=>{this._selection=e,this.options.acceptDialog()},favouritesChanged:this._favoritesDatabase.changed,lastUsedChanged:this._lastUsedDatabase.changed}),r.length>0?m.createElement(m.Fragment,null,m.createElement("h3",{className:"jp-KernelSelector-Section"},this.trans.__("Connect to a running kernel")),m.createElement(U,{trans:this.trans,commands:this.commands,items:r,settings:this._settings,query:"",showSearchBox:!1,onClick:e=>{this._selection=e,this.options.acceptDialog()},hideColumns:["last-used","star"],favouritesChanged:this._favoritesDatabase.changed,lastUsedChanged:this._lastUsedDatabase.changed})):null)}getValue(){var e;return this._selection?(this._selection.markAsUsedNow().catch(console.warn),(null===(e=this._selection.metadata)||void 0===e?void 0:e.model)?this._selection.metadata.model:{name:this._selection.args.kernelName}):null}}var H=n(354);async function P(e="",t={}){const n=H.ServerConnection.makeSettings(),a=b.URLExt.join(n.baseUrl,"jupyterlab-launchpad",e);let s;try{s=await H.ServerConnection.makeRequest(a,t,n)}catch(e){throw new H.ServerConnection.NetworkError(e)}let o=await s.text();if(o.length>0)try{o=JSON.parse(o)}catch(e){console.log("Not a JSON response body.",s)}if(!s.ok)throw new H.ServerConnection.ResponseError(s,o.message||o);return o}class q{constructor(e){this._db=null,this._stateDB=e.stateDB;const t=new C.PromiseDelegate;this.ready=t.promise,window.setTimeout((()=>this._updateDB().then((()=>t.resolve()))),0),window.setInterval(this._updateDB.bind(this),e.fetchInterval)}_get(e){return this._db?this._db[this._itemKey(e)]:(console.error("Database is not ready!"),null)}async _set(e,t){const n=await this._fetch();this._db=n,n[this._itemKey(e)]=t,await this._stateDB.save(this._stateDBKey,n)}async _updateDB(){const e=await this._fetch();this._db=e}async _fetch(){let e=await this._stateDB.fetch(this._stateDBKey);return void 0===e&&(e=await this._stateDB.fetch(this._stateDBKey)),void 0===e?{}:e}}class F extends q{_itemKey(e){return e.command+"_"+JSON.stringify(e.args)}}class W extends F{constructor(){super(...arguments),this._stateDBKey="launchpad:last-used",this._changed=new f.Signal(this)}get(e){const t=super._get(e);return t?new Date(t):null}async recordAsUsedNow(e){await this.recordAsUsed(e,new Date)}async recordAsUsed(e,t){await this._set(e,t.toUTCString()),this._changed.emit()}get changed(){return this._changed}}class V extends F{constructor(){super(...arguments),this._stateDBKey="launchpad:favorites",this._changed=new f.Signal(this)}get(e){var t;return null!==(t=super._get(e))&&void 0!==t?t:null}async set(e,t){await this._set(e,t),this._changed.emit()}get changed(){return this._changed}}class J{constructor(){this._endpointsMap={"launchpad:favorites":"database/favorites","launchpad:last-used":"database/last-used"}}async fetch(e){return await P(this._endpointsMap[e])}async save(e,t){await P(this._endpointsMap[e],{method:"POST",body:JSON.stringify(t)})}}const Z={id:"jupyterlab-launchpad:database",description:"A redesigned JupyterLab launcher databases",provides:E,autoStart:!0,activate:e=>{const t={stateDB:new J,fetchInterval:1e4};return{lastUsed:new W(t),favorites:new V(t)}}},$=[{id:k,description:"A redesigned JupyterLab launcher",provides:r.ILauncher,autoStart:!0,requires:[c.ITranslator,l.ISettingRegistry,E],optional:[a.ILabShell,s.ICommandPalette,o.IDefaultFileBrowser],activate:function(e,t,n,a,o,r,l){const{commands:c,shell:m}=e,u=t.load("jupyterlab-launchpad"),h=new T;if(-1!==navigator.userAgent.indexOf("AppleWebKit")&&-1===navigator.userAgent.indexOf("Chrome")){const e=function(e){const t=document.createElement("style");return t.setAttribute("type","text/css"),t.appendChild(document.createTextNode(".jp-starIconButton {\n  /* do not rotate on webkit as the result is off when zoomed in see https://bugs.webkit.org/show_bug.cgi?id=194903 */\n  --jp-transition-transform: rotate(0deg);\n}\n\n.jp-starIcon .jp-star-filled,\n.jp-starIcon .jp-star-border {\n  /* disable animation on webkit */\n  transition-property: none;\n}\n")),t}();document.body.appendChild(e)}n.load(k).then((t=>{!function(e,t,n){e.commands.addCommand(S.toggleColumn,{label:e=>{if(e.label)return e.label;if(e.id){const t=e.id;return t[0].toLocaleUpperCase()+t.substring(1)}return t.__("Toggle given column")},execute:async e=>{var t;const a=e.id;if(!a)return console.error("Column ID missing");const s=null!==(t=n.composite.hiddenColumns)&&void 0!==t?t:{};"visible"!==s[a]&&s[a]?s[a]="visible":s[a]="hidden",await n.set("hiddenColumns",s)},isToggleable:!0,isToggled:e=>{var t;const a=e.id;return a?"hidden"!==(null!==(t=n.composite.hiddenColumns)&&void 0!==t?t:{})[a]:(console.error("Column ID missing for checking if toggled"),!1)}}),e.commands.addCommand(S.moveColumn,{label:e=>"left"===e.direction?t.__("Move Column Left"):"right"===e.direction?t.__("Move Column Right"):t.__("Move column left or right"),execute:async e=>{const t=e.order,a=e.id,s=t.indexOf(a),o=s+("left"===e.direction?-1:1);if(o<0||o>=t.length)return void console.log("Cannot move the column any further");const r=t[o];t[o]=a,t[s]=r,await n.set("columnOrder",t)}}),e.commands.addCommand(S.showStarred,{isToggleable:!0,isToggled:()=>n.composite.starredSection,label:t.__("Show Starred Section"),execute:async()=>{const e=n.composite.starredSection;await n.set("starredSection",!e)}}),e.commands.addCommand(S.searchAllSections,{isToggleable:!0,isToggled:()=>n.composite.searchAllSections,label:t.__("Search in All Sections"),execute:async()=>{const e=n.composite.searchAllSections;await n.set("searchAllSections",!e)}}),e.commands.addCommand(S.openSettings,{label:t.__("Open Settings Editor"),execute:()=>{e.commands.execute("settingeditor:open",{query:"Launchpad"})}})}(e,u,t)}));const p={},g=async()=>{const t=[...e.serviceManager.sessions.running()];for(const e of t){if(!e.kernel)continue;let t;t="notebook"===e.type?"notebook:create-new":"console"===e.type?"console:create":"unknown";const n=t+"-"+e.kernel.name,s=e.kernel.last_activity;if(s&&p[n]!==s){p[n]=s;const o={command:t,args:{isLauncher:!0,kernelName:e.kernel.name}};await a.lastUsed.recordAsUsed(o,new Date(s))}}};return e.serviceManager.sessions.ready.then(g),e.serviceManager.sessions.runningChanged.connect(g),c.addCommand(S.create,{label:u.__("New Launcher"),icon:e=>e.toolbar?i.addIcon:void 0,execute:async e=>{var r,p;const g=null!==(p=null!==(r=e.cwd)&&void 0!==r?r:null==l?void 0:l.model.path)&&void 0!==p?p:"",f="launcher-"+Q.id++,v=await n.load(k);await Promise.all([a.lastUsed.ready,a.favorites.ready]);const b=new M({model:h,cwd:g,callback:e=>{(0,d.find)(m.widgets("main"),(t=>t===e))&&(m.add(e,"main",{ref:f}),b.dispose())},commands:c,translator:t,lastUsedDatabase:a.lastUsed,favoritesDatabase:a.favorites,settings:v});b.model=h,b.title.icon=i.launcherIcon,b.title.label=u.__("Launcher");const _=new s.MainAreaWidget({content:b});if(_.title.closable=!!Array.from(m.widgets("main")).length,_.id=f,m.add(_,"main",{activate:e.activate,ref:e.ref}),o&&o.layoutModified.connect((()=>{_.title.closable=Array.from(o.widgets("main")).length>1}),_),l){const e=e=>{b.cwd=e.path};l.model.pathChanged.connect(e),b.disposed.connect((()=>{l.model.pathChanged.disconnect(e)}))}return _}}),o&&Promise.all([e.restored,null==l?void 0:l.model.restored]).then((()=>{o.layoutModified.connect((()=>{o.isEmpty("main")&&c.execute(S.create)}))})),r&&r.addItem({command:S.create,category:u.__("Launcher")}),o&&(o.addButtonEnabled=!0,o.addRequested.connect(((e,t)=>{var n;const a=(null===(n=t.currentTitle)||void 0===n?void 0:n.owner.id)||t.titles[t.titles.length-1].owner.id;return c.execute(S.create,{ref:a})}))),h}},O,Z];var Q;!function(e){e.id=0}(Q||(Q={}))}}]);