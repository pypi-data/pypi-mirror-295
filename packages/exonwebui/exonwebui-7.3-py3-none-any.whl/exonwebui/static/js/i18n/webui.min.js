/*
  :copyright: 2019-2023, ExonLabs. All rights reserved.
  :license: BSD, see LICENSE for more details.
*/
var WebUI=function(a,l){return a.ajaxSetup({cache:!0}),l.format_url=function(e){return"/"+e.replace(/^[\/#]/,"")},l.doctitle={base:document.title,update:function(e){void 0!==e&&0<e.length&&(e=e[0].toUpperCase()+e.slice(1),document.title=e+" | "+l.doctitle.base)},reset:function(){document.title=l.doctitle.base}},l.pagelock={show:function(e,o){l.pagelock.hide(),a("body").append('<div id="_UiPageLock" class="container-fluid overflow-auto scroll page-lock '+(o||"")+'">'+(e||"")+"</div>")},loading:function(e){return l.pagelock.show('<div class="row"><div class="col cancel"><a id="_UiPageLock_btnCancel">&times;</a></div></div>'+(e||""),"page-loading"),a("#_UiPageLock_btnCancel").on("click",function(){l.pagelock.hide()}),a("#_UiPageLock_btnCancel")},progress:function(e){if(!e)return l.pagelock.loading('<div class="row h-100 align-items-center justify-content-center"><div class="col-5"><div class="progress"><div class="progress-bar progress-bar-striped progress-bar-animated"></div></div></div></div>');a("#_UiPageLock .progress-bar").css("width",e+"%")},modal:function(e,o,t,r){l.pagelock.show('<div class="modal-dialog modal-dialog-centered '+(r||"")+'"><div class="modal-content"><div class="modal-header pt-2 pb-1">'+(e||"")+'<button class="close" onclick="WebUI.pagelock.hide()">&times;</button></div><div class="modal-body scroll">'+(o||"")+(t?'</div><div class="modal-footer p-1">'+t+"</div></div></div>":""))},hide:function(){a("#_UiPageLock").length&&a("#_UiPageLock").remove()}},l.notify={stack:{dir1:"down",dir2:"left",push:"top",firstpos1:14,firstpos2:10,spacing1:7,spacing2:7},clear:PNotify.removeAll,show:function(e,o,t,r){t&&PNotify.removeAll(),window.innerWidth<576?(l.notify.stack.firstpos1=0,l.notify.stack.firstpos2=0):(l.notify.stack.firstpos1=14,l.notify.stack.firstpos2=10),"rtl"==a("html").attr("dir")||"rtl"==a("body").attr("dir")?l.notify.stack.dir2="right":l.notify.stack.dir2="left";var n={styling:"fontawesome",icon:!1,hide:!r,animate_speed:"fast",buttons:{sticker:!1,closer:!0},addclass:"stack-custom",stack:l.notify.stack};"error"==e?(n.type="error",n.text='<i class="fa fas fa-ta fa-exclamation-circle"></i>'+o):"warn"==e?(n.type="notice",n.text='<i class="fa fas fa-ta fa-exclamation-circle"></i>'+o):"success"==e?(n.type="success",n.text='<i class="fa fas fa-ta fa-check-circle"></i>'+o):(n.type="info",n.text='<i class="fa fas fa-ta fa-info-circle"></i>'+o);var i=new PNotify(n);i.get().click(function(){i.remove()})},error:function(e,o,t){l.notify.show("error",e,o,t)},warn:function(e,o,t){l.notify.show("warn",e,o,t)},info:function(e,o,t){l.notify.show("info",e,o,t)},success:function(e,o,t){l.notify.show("success",e,o,t)},load:function(e){for(var o=0;o<e.length;o++)l.notify.show(e[o][0],e[o][1],e[o][2],e[o][3])}},l.scrolltop=function(e){a("body").animate({scrollTop:0},e||300)},l.redirect=function(e,o){void 0!==e&&0<e.length&&("#"==e[0]?e==window.location.hash?a(window).trigger("hashchange"):window.location.hash=e:o?window.open(e):e==window.location?location.reload():window.location=e)},l.request=function(e,o,t,r,n,i,c){return a.ajax({url:l.format_url(o),type:e,data:t||{},contentType:!(t instanceof FormData)&&"application/x-www-form-urlencoded; charset=UTF-8",processData:!(t instanceof FormData),success:function(e,o,t){l.request.success(e,r)},error:function(e,o,t){t="abort"==t?null:e.status?t||a.i18n._("request failed"):a.i18n._("no connection"),l.request.error(t,n)},complete:function(e,o){l.request.complete(o,i)},xhr:function(){return"function"==typeof c?c():new window.XMLHttpRequest}})},l.request.success=function(e,o){"function"==typeof o?o(e):(e.notifications&&l.notify.load(e.notifications),e.redirect&&l.redirect(e.redirect,e.blank))},l.request.error=function(e,o){"function"==typeof o?o(e):null!==e&&l.notify.error(e,!0,!1)},l.request.complete=function(e,o){"function"==typeof o&&o(e)},l.loader={req_xhr:null,lock_timer:null,progress_timer:null,progress_xhr:null,load:function(e,o,t,r,n,i,c){l.loader.cancel(),l.loader.lock_timer=setTimeout(function(){l.pagelock.loading().off("click").on("click",function(e){l.loader.cancel()})},c||500),l.loader.req_xhr=l.request(e,o,t,function(e){l.loader.reset(),l.pagelock.hide(),l.request.success(e,r)},function(e){l.loader.reset(),l.pagelock.hide(),l.request.error(e,n)},i)},progress:function(e,o,t,r,n,i,c,a){l.loader.cancel(),l.loader.lock_timer=setTimeout(function(){l.pagelock.progress().off("click").on("click",function(e){l.loader.cancel()}),l.loader.progress_timer=setInterval(function(){null===l.loader.progress_xhr&&(l.loader.progress_xhr=l.request(e,o,{get_progress:1},function(e){l.pagelock.progress(e.payload)},function(e){},function(e){l.loader.progress_xhr=null}))},a||5e3)},c||500),l.loader.req_xhr=l.request(e,o,t,function(e){l.loader.reset(),l.pagelock.progress(100),setTimeout(function(){l.pagelock.hide(),l.request.success(e,r)},500)},function(e){l.loader.reset(),l.pagelock.hide(),l.request.error(e,n)},i)},formsubmit:function(e,o,t,r,n){l.loader.cancel();var i=l.pagelock.progress;l.loader.lock_timer=setTimeout(function(){i().off("click").on("click",function(e){l.loader.cancel()})},n||500),l.loader.req_xhr=l.request(e.attr("method"),e.attr("action"),new FormData(e[0]),function(e){l.loader.reset(),l.pagelock.hide(),l.request.success(e,o)},function(e){l.loader.reset(),l.pagelock.hide(),l.request.error(e,t)},r,function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var o=parseInt(e.loaded/e.total*100);if(o<100)return l.pagelock.progress(o),null;l.pagelock.progress(100)}i=l.pagelock.loading},!1),e})},cancel:function(){l.loader.req_xhr&&l.loader.req_xhr.abort()},reset:function(){l.loader.lock_timer&&clearTimeout(l.loader.lock_timer),l.loader.progress_timer&&clearTimeout(l.loader.progress_timer),l.loader.req_xhr=null,l.loader.lock_timer=null,l.loader.progress_timer=null}},l.static_local_url_prefix="/static/vendor",l.loadCss=function(e,o){a("head link[href='"+e+"']").length||a("head").append('<link rel="stylesheet" type="text/css" href="'+e+'" '+(o?"onerror=\"this.onerror=null;this.href='"+o+"'\"":"")+">")},l.loadCssCdn=function(e,o){e?l.loadCss(e+"/"+o,l.static_local_url_prefix+"/"+o):l.loadCss(l.static_local_url_prefix+"/"+o)},l.loadScript=function(t,r,n){if(a("body script[_src='"+t+"']").length&&"function"==typeof r)return r();a.getScript(t).done(function(e,o){a("body").append('<script type="text/javascript" _src="'+t+'"><\/script>'),"function"==typeof r&&r()}).fail(function(e,o,t){"function"==typeof n?n():l.notify.warn(a.i18n._("Failed to load all page contents !!")+"<br>"+a.i18n._("Please reload page and try again."),null,!0)})},l.loadScriptCdn=function(e,o,t,r){if(!e)return l.loadScript(l.static_local_url_prefix+"/"+o,t,r);l.loadScript(e+"/"+o,t,function(){l.loadScript(l.static_local_url_prefix+"/"+o,t,r)})},a(document).ready(function(){a("html").attr("lang")&&"undefined"!=typeof webui_i18n&&a.i18n.load(webui_i18n)}),l}(jQuery,WebUI||{});