<!doctype html><html><head><title>{{title}}</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,viewport-fit=cove"><meta http-equiv="X-UA-Compatible" content="IE=edge">{{contentrefresh|safe}}
<link rel="icon"  href="/static/smartui/img/favicon.ico"><link rel="stylesheet" href="/static/smartchart/js/fun.css?_=1"><script src="/static/smartchart/js/jquery-2.2.3.min.js"></script>
{% if devhead %}<link rel="stylesheet" href="/static/smartchart/js/dev.css?_=3.1"><link rel="stylesheet" href="/static/smartchart/icon/iconfont.css?_=2"><link rel="stylesheet" href="/static/smartchart/editor/modal.css">{% endif %}
<script src="/static/smartui/js/vue.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/element-ui/2.15.7/theme-chalk/index.css" /><script src="https://cdn.staticfile.org/element-ui/2.15.7/index.js"></script>
<style>
body {background-color: #f1f1f1;width: 100%;}
.el-table td.el-table__cell, .el-table th.el-table__cell.is-leaf {text-align: center;}
.el-table--border th.el-table__cell, .el-table__fixed-right-patch {background-color: #475254;color: #fff; border: none !important;text-align: center;}
.search_base_div{display:flex;justify-content:center;}
.search_div{background-color: #fff;padding:0.5rem;width:95%;margin-top:0.5rem;border-radius:1rem;}
.body_base_div{display:flex;justify-content:center;}
.body_div{background-color: #fff;padding:0.5rem;width:95%;margin-top:0.5rem;border-radius:1rem;}
.filter_base_div{display:flex;justify-content: center;align-items:center;}
.filter_div{width:99%;display:flex;justify-content: space-between;align-items:center}
.table_base_div{display:flex;justify-content:center;align-items:center;margin-top:1rem;}
.table_div{width:99%;display:flex;flex-direction: column;}
</style>{% block head %}{% endblock %}</head>
{% autoescape off %}{{linkhead}}{{devhead}}{% block body %}
<body><vue id="vue_app">{% for div in div_list %}{{div}}{% endfor %} <div class="search_base_div" v-if="btnSearch||btnDownload||btnAdd"><div class="search_div"><div style="display:flex;"> {% block body_search %}{% endblock %} <el-select v-for="(value, key) in searchDict" v-model="searchDict[key]" :style="{width:inputWidth}" :placeholder="nameDict[key]||key" size="mini" clearable><el-option v-for="item in optionDict[key]" :key="item[0]" :label="item[0]" :value="item[0]"></el-option></el-select><el-button size="mini" v-if="btnSearch" style="background-color:#66b1ff;border: none;color:#fff" @click="search" icon="el-icon-search"></el-button><el-button size="mini" v-if="btnDownload" style="background-color:#66b1ff;border: none;color:#fff" @click='daochu' icon="el-icon-download"></el-button><el-button size="mini" v-if="btnAdd" style="background-color:#ff9900;border: none;color:#fff" @click='handleAdd' icon="el-icon-circle-plus-outline"></el-button></div></div></div><div class="body_base_div"><div class="body_div"><div class="filter_base_div"><div class="filter_div"><h2>{[title]}</h2><div> {% block body_filter %}{% endblock %} <el-input v-for="(value, key) in filterDict" v-model="filterDict[key]" size="mini" :placeholder="nameDict[key]" @input='data_filter()' :style="{width:inputWidth}"></el-input><el-popconfirm :title="'execute:'+value[0]+'?'" v-for="(value, key) in actionDict" @confirm='action_batch(key)'><el-button slot="reference" :disabled="isClicked" size="mini" :style="{background:value[1],border:'none',color:'#fff'}" >{[value[0]]}</el-button></el-popconfirm></div></div></div><div class="table_base_div"><div class="table_div"> {% block body_table %} <el-table :data="tableData.slice((currentPage-1)*pageSize, currentPage*pageSize)" size="mini" header-cell-class-name="tablehead" border ref="multipleTable" :max-height="maxheight" @selection-change="handleSelectionChange" style="width: 100%;"><el-table-column type="selection" width="55" v-if="actionDict" key="1"></el-table-column><el-table-column v-for="item in tableHead" :label="nameDict[item]||item" :width="widthDict[item]" :property="item" :key="item" sortable show-overflow-tooltip><template slot-scope="scope"><el-tag v-if="tagFields.includes(item)" :color="statusColor[scope.row[item]]" style="color:white" disable-transitions>{[scope.row[item]]}</el-tag> {% block body_table_column %}{% endblock %} <span v-else>{[ scope.row[item]]}</span></template></el-table-column><el-table-column fixed="right" label="Action" width="80" v-if="btnEdit||btnRequest||btnView" key="2"><template slot-scope="scope"><el-button type="text" size="small" icon="el-icon-edit-outline" @click.stop="handleRequestClick(scope.row)" v-if="btnRequest"></el-button><el-button type="text" size="small" icon="el-icon-edit" @click.stop="handleEditClick(scope.row)" v-else-if="btnEdit"></el-button><el-button type="text" size="small" icon="el-icon-view" @click.stop="handleViewClick(scope.row)" v-if="btnView"></el-button> {% block body_table_column_button %}{% endblock %} </template></el-table-column></el-table><el-pagination align='center' v-if="pageSize<10000" @size-change="handlerSizeChange" @current-change="handlerCurrentChange" :current-page="currentPage" :page-size="pageSize" layout="total,sizes,prev,pager,next,jumper" :total="tableData.length"></el-pagination> {% endblock %} </div></div></div></div> {% block dialog_modify %}<el-dialog :title="title" :visible.sync="dialogFormVisible"><el-form ref="form" :model="form" :rules="rules"><el-form-item v-for="(value, key) in form" :prop="key" :label="nameDict[key]||key" :label-width="formLabelWidth"><el-input v-if="typeDict[key]=='text'" v-model="form[key]" type="textarea" autosize></el-input><el-select v-else-if="typeDict[key]=='select'" v-model="form[key]"><el-option v-for="item in optionDict[key]" :key="item[0]" :label="item[0]" :value="item[0]"></el-option></el-select><el-input v-else v-model="form[key]" autocomplete="off" :disabled="constFields.includes(key) && modifyFlag"></el-input></el-form-item></el-form><div slot="footer" class="dialog-footer"><el-button @click="dialogFormVisible = false" icon="el-icon-circle-close"></el-button><el-button :disabled="isClicked" type="primary" @click.stop="update_data" icon="el-icon-success"></el-button></div></el-dialog>{% endblock %} {% block dialog_card %}<el-dialog :visible.sync="dialogTableVisible"><el-descriptions class="margin-top" :title="title" :column="3" size="mini" border :labelStyle="{'color': 'red'}"><el-descriptions-item v-for="(value,key) in detail" :key="key" :label="nameDict[key]||key">{[value]}</el-descriptions-item></el-descriptions></el-dialog>{% endblock %} {% block dialog_request %}<el-dialog :title="title+':变更需求'" :visible.sync="dialogFormVisible_r"><el-form ref="rform" :model="rform" :rules="rules"><el-form-item prop="code" label="主键" :label-width="formLabelWidth"><el-input v-model="rform.code" autocomplete="off" disabled></el-input></el-form-item><el-form-item prop="columnname" label="列名" :label-width="formLabelWidth"><el-select v-model="rform.columnname" @change="rform_select_change"><el-option v-for="(value, key) in nameDict" :key="key" :label="value" :value="key"></el-option></el-select></el-form-item><el-form-item prop="oldvalue" label="旧值" :label-width="formLabelWidth"><el-input v-model="rform.oldvalue" autocomplete="off" disabled></el-input></el-form-item><el-form-item prop="newvalue" label="新值" :label-width="formLabelWidth"><el-input v-model="rform.newvalue" autocomplete="off"></el-input></el-form-item><el-form-item prop="request_remark" label="备注" :label-width="formLabelWidth"><el-input v-model="rform.request_remark" autocomplete="off"></el-input></el-form-item></el-form><div slot="footer" class="dialog-footer"><el-button @click="dialogFormVisible_r = false" icon="el-icon-circle-close"></el-button><el-button :disabled="isClicked" type="primary" @click.stop="update_data_r" icon="el-icon-success"></el-button></div></el-dialog>{% endblock %}</vue></body>
{% endblock %}{% endautoescape %}
</html><script>const dashid={{ dashid }};const dsDict={{ dsdict|safe }};</script><script src="/static/smartchart/js/fun.js?_=5"></script>
{{footer|safe}}{% block javascript %}<script src="/static/smartchart/opt/smt_crud.js?_=0.3"></script>{% endblock %}{% if devhead %}<div class="modal" id="modal_iframe"><div class="modal-content modal-dash"><header class="modal-header" id="id_header">
<span class="close" onclick="hideModal()">×</span>SmartChart<a class='iconfont iconed_ds' onclick=dev_dseditor()>数据集</a><a class='iconfont iconed_chart' onclick=dev_dschart()>图形</a><a class='iconfont iconed_div' onclick=dev_dsdiv()>布局</a>
    <span class="editor_head"></span></header><div class="modal-body"><iframe id="iframepage" class="iframechart"  width="100%"></iframe></div></div></div><script src="/static/smartchart/js/dev.js?_=8.1"></script>{% endif %}
<script>var charts = [];{{echart_main|safe}}window.onresize = function(){for(var i = 0; i < charts.length; i++){charts[i].resize();}};</script>
{% block footer %}{% endblock %}<script>vapp.refreshTable()</script>
<!--powered by smartchart.cn,Designed by JohnYan mailto:84345999@qq.com, https://gitee.com/smartchart/smartchart you need keep this-->