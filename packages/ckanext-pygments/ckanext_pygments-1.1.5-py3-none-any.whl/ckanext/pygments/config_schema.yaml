scheming_version: 2
schema_id: pygments_config
about: An extension config form schema

fields:
  - field_name: ckanext.pygments.supported_formats
    label: Supported Formats
    help_text: Specify a list of supported formats
    required: true
    choices_helper: pygments_supported_formats_options
    validators: not_missing unicode_safe
    form_snippet: tom_select.html
    form_attrs:
      multiple: "true"
      data-module-load-url: "/api/action/pygments_formats_list"

  - field_name: ckanext.pygments.max_size
    label: Max Size
    help_text: Specify how many bytes we are going to render from file. Default to 1MB
    input_type: number

  - field_name: ckanext.pygments.include_htmx_asset
    label: Include HTMX Asset
    help_text: Include HTMX asset
    preset: select
    required: true
    choices:
      - value: true
        label: True
      - value: false
        label: False

  - field_name: ckanext.pygments.default_theme
    label: Default Theme
    help_text: Default theme for preview
    preset: select
    required: true
    choices_helper: pygments_theme_options

  - field_name: ckanext.pygments.cache.enable
    label: Enable Cache
    help_text: Enable cache
    preset: select
    required: true
    choices:
      - value: true
        label: True
      - value: false
        label: False

  - field_name: ckanext.pygments.cache.preview_max_size
    label: Preview Max Size
    help_text: Specify what is the maximum size of a preview we are going to cache. Default is 20MB
    input_type: number

  - field_name: ckanext.pygments.cache.ttl
    label: Cache TTL
    help_text: Specify the time to live of the cache. Default is 2 hours
    input_type: number

  # - field_name: ckanext.charts.cache_strategy
  #   label: Cache Strategy
  #   help_text: Choose the cache strategy for the charts extension.
  #   preset: select
  #   required: true
  #   choices:
  #     - value: file_orc
  #       label: File (ORC)
  #     - value: file_csv
  #       label: File (CSV)
  #     - value: redis
  #       label: Redis

  # - field_name: ckanext.charts.redis_cache_ttl
  #   label: Redis Cache TTL
  #   help_text: Time to live for the Redis cache in seconds. Set 0 to disable cache.
  #   input_type: number

  # - field_name: ckanext.charts.file_cache_ttl
  #   label: File Cache TTL
  #   help_text: Time to live for the File cache in seconds. Set 0 to disable cache.
  #   input_type: number

  # - field_name: ckanext.charts.enable_cache
  #   label: Enable Cache
  #   help_text: Enable or disable the cache.
  #   preset: select
  #   required: true
  #   choices:
  #     - value: true
  #       label: True
  #     - value: false
  #       label: False

  # - field_name: ckanext.charts.reinit_ckan_js_modules
  #   label: Reinit CKAN JS Modules
  #   help_text: Reinitialize CKAN JS modules.
  #   preset: select
  #   required: true
  #   choices:
  #     - value: true
  #       label: True
  #     - value: false
  #       label: False

  # - field_name: ckanext.charts.allow_anon_building_charts
  #   label: Allow Anonymous Building Charts
  #   help_text: Allow anonymous users to build charts.
  #   preset: select
  #   required: true
  #   choices:
  #     - value: true
  #       label: True
  #     - value: false
  #       label: False
